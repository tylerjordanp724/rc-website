if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");!function(t){"use strict";var e=jQuery.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(),function(t){"use strict";t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one("bsTransitionEnd",(function(){n=!0}));return setTimeout((function(){n||t(i).trigger(t.support.transition.end)}),e),this},t((function(){t.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})}))}(jQuery),function(t){"use strict";var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.prototype.close=function(e){function i(){s.detach().trigger("closed.bs.alert").remove()}var o=t(this),r=o.attr("data-target");r||(r=(r=o.attr("href"))&&r.replace(/.*(?=#[^\s]*$)/,""));var s=t(r);e&&e.preventDefault(),s.length||(s=o.closest(".alert")),s.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i())};var i=t.fn.alert;t.fn.alert=function(e){return this.each((function(){var i=t(this),o=i.data("bs.alert");o||i.data("bs.alert",o=new n(this)),"string"==typeof e&&o[e].call(i)}))},t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=i,this},t(document).on("click.bs.alert.data-api",e,n.prototype.close)}(jQuery),function(t){"use strict";function e(e){return this.each((function(){var i=t(this),o=i.data("bs.button"),r="object"==typeof e&&e;o||i.data("bs.button",o=new n(this,r)),"toggle"==e?o.toggle():e&&o.setState(e)}))}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.5",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(e){var n="disabled",i=this.$element,o=i.is("input")?"val":"html",r=i.data();e+="Text",null==r.resetText&&i.data("resetText",i[o]()),setTimeout(t.proxy((function(){i[o](null==r[e]?this.options[e]:r[e]),"loadingText"==e?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))}),this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),t&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=e,t.fn.button.Constructor=n,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',(function(n){var i=t(n.target);i.hasClass("btn")||(i=i.closest(".btn")),e.call(i,"toggle"),t(n.target).is('input[type="radio"]')||t(n.target).is('input[type="checkbox"]')||n.preventDefault()})).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',(function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))}))}(jQuery),function(t){"use strict";function e(e){return this.each((function(){var i=t(this),o=i.data("bs.carousel"),r=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e),s="string"==typeof e?e:r.slide;o||i.data("bs.carousel",o=new n(this,r)),"number"==typeof e?o.to(e):s?o[s]():r.interval&&o.pause().cycle()}))}var n=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};n.VERSION="3.3.5",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},n.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},n.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e);if(("prev"==t&&0===n||"next"==t&&n==this.$items.length-1)&&!this.options.wrap)return e;var i=(n+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(i)},n.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",(function(){e.to(t)})):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},n.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(e,i){var o=this.$element.find(".item.active"),r=i||this.getItemForDirection(e,o),s=this.interval,a="next"==e?"left":"right",l=this;if(r.hasClass("active"))return this.sliding=!1;var c=r[0],u=t.Event("slide.bs.carousel",{relatedTarget:c,direction:a});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=t(this.$indicators.children()[this.getItemIndex(r)]);d&&d.addClass("active")}var h=t.Event("slid.bs.carousel",{relatedTarget:c,direction:a});return t.support.transition&&this.$element.hasClass("slide")?(r.addClass(e),r[0].offsetWidth,o.addClass(a),r.addClass(a),o.one("bsTransitionEnd",(function(){r.removeClass([e,a].join(" ")).addClass("active"),o.removeClass(["active",a].join(" ")),l.sliding=!1,setTimeout((function(){l.$element.trigger(h)}),0)})).emulateTransitionEnd(n.TRANSITION_DURATION)):(o.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(h)),s&&this.cycle(),this}};var i=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=n,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this};var o=function(n){var i,o=t(this),r=t(o.attr("data-target")||(i=o.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(r.hasClass("carousel")){var s=t.extend({},r.data(),o.data()),a=o.attr("data-slide-to");a&&(s.interval=!1),e.call(r,s),a&&r.data("bs.carousel").to(a),n.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),t(window).on("load",(function(){t('[data-ride="carousel"]').each((function(){var n=t(this);e.call(n,n.data())}))}))}(jQuery),function(t){"use strict";function e(e){var n,i=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(i)}function n(e){return this.each((function(){var n=t(this),o=n.data("bs.collapse"),r=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);!o&&r.toggle&&/show|hide/.test(e)&&(r.toggle=!1),o||n.data("bs.collapse",o=new i(this,r)),"string"==typeof e&&o[e]()}))}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.5",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(e=o.data("bs.collapse"),e&&e.transitioning))){var r=t.Event("show.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){o&&o.length&&(n.call(o,"hide"),e||o.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var l=t.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[s](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[n](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(i.TRANSITION_DURATION):o.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy((function(n,i){var o=t(i);this.addAriaAndCollapsedClass(e(o),o)}),this)).end()},i.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var o=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',(function(i){var o=t(this);o.attr("data-target")||i.preventDefault();var r=e(o),s=r.data("bs.collapse")?"toggle":o.data();n.call(r,s)}))}(jQuery),function(t){"use strict";function e(e){var n=e.attr("data-target");n||(n=(n=e.attr("href"))&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}function n(n){n&&3===n.which||(t(i).remove(),t(o).each((function(){var i=t(this),o=e(i),r={relatedTarget:this};o.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&t.contains(o[0],n.target)||(o.trigger(n=t.Event("hide.bs.dropdown",r)),n.isDefaultPrevented()||(i.attr("aria-expanded","false"),o.removeClass("open").trigger("hidden.bs.dropdown",r))))})))}var i=".dropdown-backdrop",o='[data-toggle="dropdown"]',r=function(e){t(e).on("click.bs.dropdown",this.toggle)};r.VERSION="3.3.5",r.prototype.toggle=function(i){var o=t(this);if(!o.is(".disabled, :disabled")){var r=e(o),s=r.hasClass("open");if(n(),!s){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",n);var a={relatedTarget:this};if(r.trigger(i=t.Event("show.bs.dropdown",a)),i.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},r.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var i=t(this);if(n.preventDefault(),n.stopPropagation(),!i.is(".disabled, :disabled")){var r=e(i),s=r.hasClass("open");if(!s&&27!=n.which||s&&27==n.which)return 27==n.which&&r.find(o).trigger("focus"),i.trigger("click");var a=r.find(".dropdown-menu li:not(.disabled):visible a");if(a.length){var l=a.index(n.target);38==n.which&&l>0&&l--,40==n.which&&l<a.length-1&&l++,~l||(l=0),a.eq(l).trigger("focus")}}}};var s=t.fn.dropdown;t.fn.dropdown=function(e){return this.each((function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new r(this)),"string"==typeof e&&i[e].call(n)}))},t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",(function(t){t.stopPropagation()})).on("click.bs.dropdown.data-api",o,r.prototype.toggle).on("keydown.bs.dropdown.data-api",o,r.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",r.prototype.keydown)}(jQuery),function(t){"use strict";function e(e,i){return this.each((function(){var o=t(this),r=o.data("bs.modal"),s=t.extend({},n.DEFAULTS,o.data(),"object"==typeof e&&e);r||o.data("bs.modal",r=new n(this,s)),"string"==typeof e?r[e](i):s.show&&r.show(i)}))}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy((function(){this.$element.trigger("loaded.bs.modal")}),this))};n.VERSION="3.3.5",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var i=this,o=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",(function(){i.$element.one("mouseup.dismiss.bs.modal",(function(e){t(e.target).is(i.$element)&&(i.ignoreBackdropClick=!0)}))})),this.backdrop((function(){var o=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),o&&i.$element[0].offsetWidth,i.$element.addClass("in"),i.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});o?i.$dialog.one("bsTransitionEnd",(function(){i.$element.trigger("focus").trigger(r)})).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(r)})))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy((function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")}),this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy((function(t){27==t.which&&this.hide()}),this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop((function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")}))},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var i=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&o;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy((function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))}),this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;r?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):s()}else e&&e()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',(function(n){var i=t(this),o=i.attr("href"),r=t(i.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),s=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},r.data(),i.data());i.is("a")&&n.preventDefault(),r.one("show.bs.modal",(function(t){t.isDefaultPrevented()||r.one("hidden.bs.modal",(function(){i.is(":visible")&&i.trigger("focus")}))})),e.call(r,s,this)}))}(jQuery),function(t){"use strict";var e=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};e.VERSION="3.3.5",e.TRANSITION_DURATION=150,e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},e.prototype.init=function(e,n,i){if(this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),r=o.length;r--;){var s=o[r];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return(e=t.extend({},this.getDefaults(),this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,(function(t,i){n[t]!=i&&(e[t]=i)})),e},e.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusin"==e.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void(n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout((function(){"in"==n.hoverState&&n.show()}),n.options.delay.show)):n.show())},e.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},e.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusout"==e.type?"focus":"hover"]=!1),n.isInStateTrue()?void 0:(clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout((function(){"out"==n.hoverState&&n.hide()}),n.options.delay.hide)):n.hide())},e.prototype.show=function(){var n=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(n);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(n.isDefaultPrevented()||!i)return;var o=this,r=this.tip(),s=this.getUID(this.type);this.setContent(),r.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&r.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(a);c&&(a=a.replace(l,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var u=this.getPosition(),d=r[0].offsetWidth,h=r[0].offsetHeight;if(c){var f=a,p=this.getPosition(this.$viewport);a="bottom"==a&&u.bottom+h>p.bottom?"top":"top"==a&&u.top-h<p.top?"bottom":"right"==a&&u.right+d>p.width?"left":"left"==a&&u.left-d<p.left?"right":a,r.removeClass(f).addClass(a)}var m=this.getCalculatedOffset(a,u,d,h);this.applyPlacement(m,a);var g=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==t&&o.leave(o)};t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",g).emulateTransitionEnd(e.TRANSITION_DURATION):g()}},e.prototype.applyPlacement=function(e,n){var i=this.tip(),o=i[0].offsetWidth,r=i[0].offsetHeight,s=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),e.top+=s,e.left+=a,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;"top"==n&&c!=r&&(e.top=e.top+r-c);var u=this.getViewportAdjustedDelta(n,e,l,c);u.left?e.left+=u.left:e.top+=u.top;var d=/top|bottom/.test(n),h=d?2*u.left-o+l:2*u.top-r+c,f=d?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(h,i[0][f],d)},e.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(n){function i(){"in"!=o.hoverState&&r.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),n&&n()}var o=this,r=t(this.$tip),s=t.Event("hide.bs."+this.type);return this.$element.trigger(s),s.isDefaultPrevented()?void 0:(r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",i).emulateTransitionEnd(e.TRANSITION_DURATION):i(),this.hoverState=null,this)},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(e){var n=(e=e||this.$element)[0],i="BODY"==n.tagName,o=n.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var r=i?{top:0,left:0}:e.offset(),s={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},a=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,s,a,r)},e.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},e.prototype.getViewportAdjustedDelta=function(t,e,n,i){var o={top:0,left:0};if(!this.$viewport)return o;var r=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-r-s.scroll,l=e.top+r-s.scroll+i;a<s.top?o.top=s.top-a:l>s.top+s.height&&(o.top=s.top+s.height-l)}else{var c=e.left-r,u=e.left+r+n;c<s.left?o.left=s.left-c:u>s.right&&(o.left=s.left+s.width-u)}return o},e.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},e.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},e.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var n=this;e&&((n=t(e.currentTarget).data("bs."+this.type))||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),e?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},e.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide((function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null}))};var n=t.fn.tooltip;t.fn.tooltip=function(n){return this.each((function(){var i=t(this),o=i.data("bs.tooltip"),r="object"==typeof n&&n;(o||!/destroy|hide/.test(n))&&(o||i.data("bs.tooltip",o=new e(this,r)),"string"==typeof n&&o[n]())}))},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.VERSION="3.3.5",e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=t.fn.popover;t.fn.popover=function(n){return this.each((function(){var i=t(this),o=i.data("bs.popover"),r="object"==typeof n&&n;(o||!/destroy|hide/.test(n))&&(o||i.data("bs.popover",o=new e(this,r)),"string"==typeof n&&o[n]())}))},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),function(t){"use strict";function e(n,i){this.$body=t(document.body),this.$scrollElement=t(t(n).is(document.body)?window:n),this.options=t.extend({},e.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each((function(){var i=t(this),o=i.data("bs.scrollspy"),r="object"==typeof n&&n;o||i.data("bs.scrollspy",o=new e(this,r)),"string"==typeof n&&o[n]()}))}e.VERSION="3.3.5",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,n="offset",i=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(n="position",i=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map((function(){var e=t(this),o=e.data("target")||e.attr("href"),r=/^#./.test(o)&&t(o);return r&&r.length&&r.is(":visible")&&[[r[n]().top+i,o]]||null})).sort((function(t,e){return t[0]-e[0]})).each((function(){e.offsets.push(this[0]),e.targets.push(this[1])}))},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),o=this.offsets,r=this.targets,s=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),e>=i)return s!=(t=r[r.length-1])&&this.activate(t);if(s&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)s!=r[t]&&e>=o[t]&&(void 0===o[t+1]||e<o[t+1])&&this.activate(r[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(n).parents("li").addClass("active")
;i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this},t(window).on("load.bs.scrollspy.data-api",(function(){t('[data-spy="scroll"]').each((function(){var e=t(this);n.call(e,e.data())}))}))}(jQuery),function(t){"use strict";function e(e){return this.each((function(){var i=t(this),o=i.data("bs.tab");o||i.data("bs.tab",o=new n(this)),"string"==typeof e&&o[e]()}))}var n=function(e){this.element=t(e)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=n.find(".active:last a"),r=t.Event("hide.bs.tab",{relatedTarget:e[0]}),s=t.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(r),e.trigger(s),!s.isDefaultPrevented()&&!r.isDefaultPrevented()){var a=t(i);this.activate(e.closest("li"),n),this.activate(a,a.parent(),(function(){o.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:o[0]})}))}}},n.prototype.activate=function(e,i,o){function r(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var s=i.find("> .active"),a=o&&t.support.transition&&(s.length&&s.hasClass("fade")||!!i.find("> .fade").length);s.length&&a?s.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),s.removeClass("in")};var i=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=i,this};var o=function(n){n.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),function(t){"use strict";function e(e){return this.each((function(){var i=t(this),o=i.data("bs.affix"),r="object"==typeof e&&e;o||i.data("bs.affix",o=new n(this,r)),"string"==typeof e&&o[e]()}))}var n=function(e,i){this.options=t.extend({},n.DEFAULTS,i),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.5",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(t,e,n,i){var o=this.$target.scrollTop(),r=this.$element.offset(),s=this.$target.height();if(null!=n&&"top"==this.affixed)return n>o&&"top";if("bottom"==this.affixed)return null!=n?!(o+this.unpin<=r.top)&&"bottom":!(t-i>=o+s)&&"bottom";var a=null==this.affixed,l=a?o:r.top;return null!=n&&n>=o?"top":null!=i&&l+(a?s:e)>=t-i&&"bottom"},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},n.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),i=this.options.offset,o=i.top,r=i.bottom,s=Math.max(t(document).height(),t(document.body).height());"object"!=typeof i&&(r=o=i),"function"==typeof o&&(o=i.top(this.$element)),"function"==typeof r&&(r=i.bottom(this.$element));var a=this.getState(s,e,o,r);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var l="affix"+(a?"-"+a:""),c=t.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:s-e-r})}};var i=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=n,t.fn.affix.noConflict=function(){return t.fn.affix=i,this},t(window).on("load",(function(){t('[data-spy="affix"]').each((function(){var n=t(this),i=n.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),e.call(n,i)}))}))}(jQuery),window.CodeMirror=function(){"use strict";function t(e,n){if(!(this instanceof t))return new t(e,n);for(var i in this.options=n=n||{},Mi)!n.hasOwnProperty(i)&&Mi.hasOwnProperty(i)&&(n[i]=Mi[i]);u(n);var o="string"==typeof n.value?0:n.value.first,s=this.display=function(t,e){var n={},i=n.input=In("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");return ti?i.style.width="1000px":i.setAttribute("wrap","off"),ci&&(i.style.border="1px solid black"),i.setAttribute("autocorrect","off"),i.setAttribute("autocapitalize","off"),i.setAttribute("spellcheck","false"),n.inputDiv=In("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),n.scrollbarH=In("div",[In("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),n.scrollbarV=In("div",[In("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),n.scrollbarFiller=In("div",null,"CodeMirror-scrollbar-filler"),n.gutterFiller=In("div",null,"CodeMirror-gutter-filler"),n.lineDiv=In("div",null,"CodeMirror-code"),n.selectionDiv=In("div",null,null,"position: relative; z-index: 1"),n.cursor=In("div"," ","CodeMirror-cursor"),n.otherCursor=In("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"),n.measure=In("div",null,"CodeMirror-measure"),n.lineSpace=In("div",[n.measure,n.selectionDiv,n.lineDiv,n.cursor,n.otherCursor],null,"position: relative; outline: none"),n.mover=In("div",[In("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=In("div",[n.mover],"CodeMirror-sizer"),n.heightForcer=In("div",null,null,"position: absolute; height: "+qi+"px; width: 1px;"),n.gutters=In("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=In("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=In("div",[n.inputDiv,n.scrollbarH,n.scrollbarV,n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),Qn&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),t.appendChild?t.appendChild(n.wrapper):t(n.wrapper),ci&&(i.style.width="0px"),ti||(n.scroller.draggable=!0),ri?(n.inputDiv.style.height="1px",n.inputDiv.style.position="absolute"):Qn&&(n.scrollbarH.style.minWidth=n.scrollbarV.style.minWidth="18px"),n.viewOffset=n.lastSizeC=0,n.showingFrom=n.showingTo=e,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.prevInput="",n.alignWidgets=!1,n.pollingFast=!1,n.poll=new yn,n.cachedCharWidth=n.cachedTextHeight=null,n.measureLineCache=[],n.measureLineCachePos=0,n.inaccurateSelection=!1,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n}(e,o);s.wrapper.CodeMirror=this,a(this),n.autofocus&&!ui&&et(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new yn},r(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var l,c=n.value;"string"==typeof c&&(c=new ji(n.value,n.mode)),_(this,Fe)(this,c),Xn&&setTimeout(En(tt,this,!0),20),function(t){function e(){t.state.focused&&setTimeout(En(et,t),0)}function n(){null==r&&(r=setTimeout((function(){r=null,s.cachedCharWidth=s.cachedTextHeight=to=null,H(t),Y(t,En(X,t))}),100))}function i(e){mn(t,e)||t.options.onDragEvent&&t.options.onDragEvent(t,on(e))||ln(e)}function o(){s.inaccurateSelection&&(s.prevInput="",s.inaccurateSelection=!1,s.input.value=t.getSelection(),xn(s.input))}var r,s=t.display;dn(s.scroller,"mousedown",_(t,rt)),dn(s.scroller,"dblclick",Xn?_(t,(function(e){if(!mn(t,e)){var n=ot(t,e);if(n&&!at(t,e)&&!it(t.display,e)){rn(e);var i=Xt(ze(t.doc,n.line).text,n);Ft(t.doc,i.from,i.to)}}})):function(e){mn(t,e)||rn(e)}),dn(s.lineSpace,"selectstart",(function(t){it(s,t)||rn(t)})),bi||dn(s.scroller,"contextmenu",(function(e){yt(t,e)})),dn(s.scroller,"scroll",(function(){s.scroller.clientHeight&&(ct(t,s.scroller.scrollTop),ut(t,s.scroller.scrollLeft,!0),fn(t,"scroll",t))})),dn(s.scrollbarV,"scroll",(function(){s.scroller.clientHeight&&ct(t,s.scrollbarV.scrollTop)})),dn(s.scrollbarH,"scroll",(function(){s.scroller.clientHeight&&ut(t,s.scrollbarH.scrollLeft)})),dn(s.scroller,"mousewheel",(function(e){dt(t,e)})),dn(s.scroller,"DOMMouseScroll",(function(e){dt(t,e)})),dn(s.scrollbarH,"mousedown",e),dn(s.scrollbarV,"mousedown",e),dn(s.wrapper,"scroll",(function(){s.wrapper.scrollTop=s.wrapper.scrollLeft=0})),dn(window,"resize",n),setTimeout((function t(){for(var e=s.wrapper.parentNode;e&&e!=document.body;e=e.parentNode);e?setTimeout(t,5e3):hn(window,"resize",n)}),5e3),dn(s.input,"keyup",_(t,(function(e){mn(t,e)||t.options.onKeyEvent&&t.options.onKeyEvent(t,on(e))||16==e.keyCode&&(t.doc.sel.shift=!1)}))),dn(s.input,"input",(function(){Xn&&!Zn&&t.display.inputHasSelection&&(t.display.inputHasSelection=null),Z(t)})),dn(s.input,"keydown",_(t,mt)),dn(s.input,"keypress",_(t,gt)),dn(s.input,"focus",En(vt,t)),dn(s.input,"blur",En(bt,t)),t.options.dragDrop&&(dn(s.scroller,"dragstart",(function(e){!function(t,e){if(Xn&&(!t.state.draggingText||+new Date-ki<100))return void ln(e);if(!mn(t,e)&&!it(t.display,e)){var n=t.getSelection();if(e.dataTransfer.setData("Text",n),e.dataTransfer.setDragImage&&!oi){var i=In("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",ii&&(i.width=i.height=1,t.display.wrapper.appendChild(i),i._top=i.offsetTop),e.dataTransfer.setDragImage(i,0,0),ii&&i.parentNode.removeChild(i)}}}(t,e)})),dn(s.scroller,"dragenter",i),dn(s.scroller,"dragover",i),dn(s.scroller,"drop",_(t,lt))),dn(s.scroller,"paste",(function(e){it(s,e)||(et(t),Z(t))})),dn(s.input,"paste",(function(){if(ti&&!t.state.fakedLastChar&&!(new Date-t.state.lastMiddleDown<200)){var e=s.input.selectionStart,n=s.input.selectionEnd;s.input.value+="$",s.input.selectionStart=e,s.input.selectionEnd=n,t.state.fakedLastChar=!0}t.state.pasteIncoming=!0,Z(t)})),dn(s.input,"cut",o),dn(s.input,"copy",o),ri&&dn(s.sizer,"mouseup",(function(){document.activeElement==s.input&&s.input.blur(),et(t)}))}(this);try{l=document.activeElement==s.input}catch(t){}l||n.autofocus&&!ui?setTimeout(En(vt,this),20):bt(this),_(this,(function(){for(var t in Ai)Ai.propertyIsEnumerable(t)&&Ai[t](this,n[t],Ii);for(var e=0;e<$i.length;++e)$i[e](this)}))()}function e(e){e.doc.mode=t.getMode(e.options,e.doc.modeOption),e.doc.iter((function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)})),e.doc.frontier=e.doc.first,T(e,100),e.state.modeGen++,e.curOp&&X(e)}function n(t){var e=j(t.display),n=t.options.lineWrapping,i=n&&Math.max(5,t.display.scroller.clientWidth/V(t.display)-3);return function(o){return ge(t.doc,o)?0:n?(Math.ceil(o.text.length/i)||1)*e:e}}function i(t){var e=t.doc,i=n(t);e.iter((function(t){var e=i(t);e!=t.height&&Ue(t,e)}))}function o(t){var e=Fi[t.options.keyMap],n=e.style;t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(n?" cm-keymap-"+n:""),t.state.disableInput=e.disableInput}function r(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),H(t)}function s(t){a(t),X(t),setTimeout((function(){f(t)}),20)}function a(t){var e=t.display.gutters,n=t.options.gutters;Dn(e);for(var i=0;i<n.length;++i){var o=n[i],r=e.appendChild(In("div",null,"CodeMirror-gutter "+o));"CodeMirror-linenumbers"==o&&(t.display.lineGutter=r,r.style.width=(t.display.lineNumWidth||1)+"px")}e.style.display=i?"":"none"}function l(t,e){if(0==e.height)return 0;for(var n,i=e.text.length,o=e;n=fe(o);){o=ze(t,(r=n.find()).from.line),i+=r.from.ch-r.to.ch}for(o=e;n=pe(o);){var r=n.find();i-=o.text.length-r.from.ch,i+=(o=ze(t,r.to.line)).text.length-r.to.ch}return i}function c(t){var e=t.display,n=t.doc;e.maxLine=ze(n,n.first),e.maxLineLength=l(n,e.maxLine),e.maxLineChanged=!0,n.iter((function(t){var i=l(n,t);i>e.maxLineLength&&(e.maxLineLength=i,e.maxLine=t)}))}function u(t){var e=Tn(t.gutters,"CodeMirror-linenumbers");-1==e&&t.lineNumbers?t.gutters=t.gutters.concat(["CodeMirror-linenumbers"]):e>-1&&!t.lineNumbers&&(t.gutters=t.gutters.slice(0),t.gutters.splice(e,1))}function d(t){var e=t.display,n=t.doc.height+E(e);e.sizer.style.minHeight=e.heightForcer.style.top=n+"px",e.gutters.style.height=Math.max(n,e.scroller.clientHeight-qi)+"px";var i=Math.max(n,e.scroller.scrollHeight),o=e.scroller.scrollWidth>e.scroller.clientWidth+1,r=i>e.scroller.clientHeight+1;r?(e.scrollbarV.style.display="block",e.scrollbarV.style.bottom=o?On(e.measure)+"px":"0",e.scrollbarV.firstChild.style.height=i-e.scroller.clientHeight+e.scrollbarV.clientHeight+"px"):(e.scrollbarV.style.display="",e.scrollbarV.firstChild.style.height="0"),o?(e.scrollbarH.style.display="block",e.scrollbarH.style.right=r?On(e.measure)+"px":"0",e.scrollbarH.firstChild.style.width=e.scroller.scrollWidth-e.scroller.clientWidth+e.scrollbarH.clientWidth+"px"):(e.scrollbarH.style.display="",e.scrollbarH.firstChild.style.width="0"),o&&r?(e.scrollbarFiller.style.display="block",e.scrollbarFiller.style.height=e.scrollbarFiller.style.width=On(e.measure)+"px"):e.scrollbarFiller.style.display="",o&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(e.gutterFiller.style.display="block",e.gutterFiller.style.height=On(e.measure)+"px",e.gutterFiller.style.width=e.gutters.offsetWidth+"px"):e.gutterFiller.style.display="",si&&0===On(e.measure)&&(e.scrollbarV.style.minWidth=e.scrollbarH.style.minHeight=ai?"18px":"12px",e.scrollbarV.style.pointerEvents=e.scrollbarH.style.pointerEvents="none")}function h(t,e,n){var i=t.scroller.scrollTop,o=t.wrapper.clientHeight;"number"==typeof n?i=n:n&&(i=n.top,o=n.bottom-n.top),i=Math.floor(i-N(t));var r=Math.ceil(i+o);return{from:Ve(e,i),to:Ve(e,r)}}function f(t){var e=t.display;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var n=g(e)-e.scroller.scrollLeft+t.doc.scrollLeft,i=e.gutters.offsetWidth,o=n+"px",r=e.lineDiv.firstChild;r;r=r.nextSibling)if(r.alignable)for(var s=0,a=r.alignable;s<a.length;++s)a[s].style.left=o;t.options.fixedGutter&&(e.gutters.style.left=n+i+"px")}}function p(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=m(t.options,e.first+e.size-1),i=t.display;if(n.length!=i.lineNumChars){var o=i.measure.appendChild(In("div",[In("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),r=o.firstChild.offsetWidth,s=o.offsetWidth-r;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(r,i.lineGutter.offsetWidth-s),i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",!0}return!1}function m(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function g(t){return $n(t.scroller).left-$n(t.sizer).left}function v(t,e,n,i){for(var o,r=t.display.showingFrom,s=t.display.showingTo,a=h(t.display,t.doc,n),l=!0;;l=!1){var c=t.display.scroller.clientWidth;if(!b(t,e,a,i))break;if(o=!0,e=[],k(t),d(t),l&&t.options.lineWrapping&&c!=t.display.scroller.clientWidth)i=!0;else if(i=!1,n&&(n=Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,"number"==typeof n?n:n.top)),(a=h(t.display,t.doc,n)).from>=t.display.showingFrom&&a.to<=t.display.showingTo)break}return o&&(pn(t,"update",t),(t.display.showingFrom!=r||t.display.showingTo!=s)&&pn(t,"viewportChange",t,t.display.showingFrom,t.display.showingTo)),o}function b(t,e,n,i){var o=t.display,r=t.doc;if(!o.wrapper.clientWidth)return o.showingFrom=o.showingTo=r.first,void(o.viewOffset=0);if(!(!i&&0==e.length&&n.from>o.showingFrom&&n.to<o.showingTo)){p(t)&&(e=[{from:r.first,to:r.first+r.size}]);var s=o.sizer.style.marginLeft=o.gutters.offsetWidth+"px";o.scrollbarH.style.left=t.options.fixedGutter?s:"0";var a=1/0;if(t.options.lineNumbers)for(var l=0;l<e.length;++l)e[l].diff&&e[l].from<a&&(a=e[l].from);var c=r.first+r.size,u=Math.max(n.from-t.options.viewportMargin,r.first),d=Math.min(c,n.to+t.options.viewportMargin);if(o.showingFrom<u&&u-o.showingFrom<20&&(u=Math.max(r.first,o.showingFrom)),o.showingTo>d&&o.showingTo-d<20&&(d=Math.min(c,o.showingTo)),Ci)for(u=je(me(r,ze(r,u)));c>d&&ge(r,ze(r,d));)++d;var h=[{from:Math.max(o.showingFrom,r.first),to:Math.min(o.showingTo,c)}];if(h=h[0].from>=h[0].to?[]:function(t,e){for(var n=0,i=e.length||0;i>n;++n){for(var o=e[n],r=[],s=o.diff||0,a=0,l=t.length;l>a;++a){var c=t[a];o.to<=c.from&&o.diff?r.push({from:c.from+s,to:c.to+s}):o.to<=c.from||o.from>=c.to?r.push(c):(o.from>c.from&&r.push({from:c.from,to:o.from}),o.to<c.to&&r.push({from:o.to+s,to:c.to+s}))}t=r}return t}(h,e),Ci)for(l=0;l<h.length;++l)for(var f,m=h[l];f=pe(ze(r,m.to-1));){var g=f.find().from.line;if(!(g>m.from)){h.splice(l--,1);break}m.to=g}var v=0;for(l=0;l<h.length;++l){(m=h[l]).from<u&&(m.from=u),m.to>d&&(m.to=d),m.from>=m.to?h.splice(l--,1):v+=m.to-m.from}if(!i&&v==d-u&&u==o.showingFrom&&d==o.showingTo)return void y(t);h.sort((function(t,e){return t.from-e.from}));try{var b=document.activeElement}catch(t){}return.7*(d-u)>v&&(o.lineDiv.style.display="none"),C(t,u,d,h,a),o.lineDiv.style.display="",b&&document.activeElement!=b&&b.offsetHeight&&b.focus(),(u!=o.showingFrom||d!=o.showingTo||o.lastSizeC!=o.wrapper.clientHeight)&&(o.lastSizeC=o.wrapper.clientHeight,T(t,400)),o.showingFrom=u,o.showingTo=d,function(t){for(var e,n=t.display,i=n.lineDiv.offsetTop,o=n.lineDiv.firstChild;o;o=o.nextSibling)if(o.lineObj){if(Qn){var r=o.offsetTop+o.offsetHeight;e=r-i,i=r}else{var s=$n(o);e=s.bottom-s.top}var a=o.lineObj.height-e;if(2>e&&(e=j(n)),a>.001||-.001>a){Ue(o.lineObj,e);var l=o.lineObj.widgets;if(l)for(var c=0;c<l.length;++c)l[c].height=l[c].node.offsetHeight}}}(t),y(t),!0}}function y(t){var e=t.display.viewOffset=Ke(t,ze(t.doc,t.display.showingFrom));t.display.mover.style.top=e+"px"}function C(t,e,n,i,o){function r(e){var n=e.nextSibling;return ti&&di&&t.display.currentWheelTarget==e?(e.style.display="none",e.lineObj=null):e.parentNode.removeChild(e),n}var s=function(t){for(var e=t.display,n={},i={},o=e.gutters.firstChild,r=0;o;o=o.nextSibling,++r)n[t.options.gutters[r]]=o.offsetLeft,i[t.options.gutters[r]]=o.offsetWidth;return{fixedPos:g(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:e.wrapper.clientWidth}}(t),a=t.display,l=t.options.lineNumbers;i.length||ti&&t.display.currentWheelTarget||Dn(a.lineDiv);var c=a.lineDiv,u=c.firstChild,d=i.shift(),h=e;for(t.doc.iter(e,n,(function(e){if(d&&d.to==h&&(d=i.shift()),ge(t.doc,e)){if(0!=e.height&&Ue(e,0),e.widgets&&u&&u.previousSibling)for(var n=0;n<e.widgets.length;++n){var a=e.widgets[n];if(a.showIfHidden){var f=u.previousSibling;if(/pre/i.test(f.nodeName)){var p=In("div",null,null,"position: relative");f.parentNode.replaceChild(p,f),p.appendChild(f),f=p}var g=f.appendChild(In("div",[a.node],"CodeMirror-linewidget"));a.handleMouseEvents||(g.ignoreEvents=!0),w(a,g,f,s)}}}else if(d&&d.from<=h&&d.to>h){for(;u.lineObj!=e;)u=r(u);l&&h>=o&&u.lineNumber&&Rn(u.lineNumber,m(t.options,h)),u=u.nextSibling}else{if(e.widgets)for(var v,b=0,y=u;y&&20>b;++b,y=y.nextSibling)if(y.lineObj==e&&/div/i.test(y.nodeName)){v=y;break}var C=function(t,e,n,i,o){var r,s=Ee(t,e),a=s.pre,l=e.gutterMarkers,c=t.display,u=s.bgClass?s.bgClass+" "+(e.bgClass||""):e.bgClass;if(!(t.options.lineNumbers||l||u||e.wrapClass||e.widgets))return a;if(o){o.alignable=null;for(var d,h=!0,f=0,p=null,g=o.firstChild;g;g=d)if(d=g.nextSibling,/\bCodeMirror-linewidget\b/.test(g.className)){for(var v=0;v<e.widgets.length;++v){if((T=e.widgets[v]).node==g.firstChild){T.above||p||(p=g),w(T,g,o,i),++f;break}}if(v==e.widgets.length){h=!1;break}}else o.removeChild(g);o.insertBefore(a,p),h&&f==e.widgets.length&&(r=o,o.className=e.wrapClass||"")}if(r||(r=In("div",null,e.wrapClass,"position: relative")).appendChild(a),u&&r.insertBefore(In("div",null,u+" CodeMirror-linebackground"),r.firstChild),t.options.lineNumbers||l){var b=r.insertBefore(In("div",null,null,"position: absolute; left: "+(t.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px"),r.firstChild);if(t.options.fixedGutter&&(r.alignable||(r.alignable=[])).push(b),!t.options.lineNumbers||l&&l["CodeMirror-linenumbers"]||(r.lineNumber=b.appendChild(In("div",m(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+c.lineNumInnerWidth+"px"))),l)for(var y=0;y<t.options.gutters.length;++y){var C=t.options.gutters[y],k=l.hasOwnProperty(C)&&l[C];k&&b.appendChild(In("div",[k],"CodeMirror-gutter-elt","left: "+i.gutterLeft[C]+"px; width: "+i.gutterWidth[C]+"px"))}}if(Qn&&(r.style.zIndex=2),e.widgets&&r!=o){v=0;for(var x=e.widgets;v<x.length;++v){var T,S=In("div",[(T=x[v]).node],"CodeMirror-linewidget");T.handleMouseEvents||(S.ignoreEvents=!0),w(T,S,r,i),T.above?r.insertBefore(S,t.options.lineNumbers&&0!=e.height?b:a):r.appendChild(S),pn(T,"redraw")}}return r}(t,e,h,s,v);if(C!=v)c.insertBefore(C,u);else{for(;u!=v;)u=r(u);u=u.nextSibling}C.lineObj=e}++h}));u;)u=r(u)}function w(t,e,n,i){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var o=i.wrapperWidth;e.style.left=i.fixedPos+"px",t.coverGutter||(o-=i.gutterTotalWidth,e.style.paddingLeft=i.gutterTotalWidth+"px"),e.style.width=o+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-i.gutterTotalWidth+"px"))}function k(t){var e=t.display,n=It(t.doc.sel.from,t.doc.sel.to);if(n||t.options.showCursorWhenSelecting?function(t){var e=t.display,n=z(t,t.doc.sel.head,"div");e.cursor.style.left=n.left+"px",e.cursor.style.top=n.top+"px",e.cursor.style.height=Math.max(0,n.bottom-n.top)*t.options.cursorHeight+"px",e.cursor.style.display="",n.other?(e.otherCursor.style.display="",e.otherCursor.style.left=n.other.left+"px",e.otherCursor.style.top=n.other.top+"px",e.otherCursor.style.height=.85*(n.other.bottom-n.other.top)+"px"):e.otherCursor.style.display="none"}(t):e.cursor.style.display=e.otherCursor.style.display="none",n?e.selectionDiv.style.display="none":function(t){function e(t,e,n,i){0>e&&(e=0),s.appendChild(In("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px; top: "+e+"px; width: "+(null==n?a-t:n)+"px; height: "+(i-e)+"px"))}function n(n,i,r){function s(e,i){return F(t,Mt(n,e),"div",d,i)}var c,u,d=ze(o,n),h=d.text.length;return function(t,e,n,i){if(!t)return i(e,n,"ltr");for(var o=!1,r=0;r<t.length;++r){var s=t[r];(s.from<n&&s.to>e||e==n&&s.to==e)&&(i(Math.max(s.from,e),Math.min(s.to,n),1==s.level?"rtl":"ltr"),o=!0)}o||i(e,n,"ltr")}(Ge(d),i||0,null==r?h:r,(function(t,n,o){var d,f,p,m=s(t,"left");if(t==n)d=m,f=p=m.left;else{if(d=s(n-1,"right"),"rtl"==o){var g=m;m=d,d=g}f=m.left,p=d.right}null==i&&0==t&&(f=l),d.top-m.top>3&&(e(f,m.top,null,m.bottom),f=l,m.bottom<d.top&&e(f,m.bottom,null,d.top)),null==r&&n==h&&(p=a),(!c||m.top<c.top||m.top==c.top&&m.left<c.left)&&(c=m),(!u||d.bottom>u.bottom||d.bottom==u.bottom&&d.right>u.right)&&(u=d),l+1>f&&(f=l),e(f,d.top,p-f,d.bottom)})),{start:c,end:u}}var i=t.display,o=t.doc,r=t.doc.sel,s=document.createDocumentFragment(),a=i.lineSpace.offsetWidth,l=function(t){return Hn(t.measure,In("pre",null,null,"text-align: left")).appendChild(In("span","x")).offsetLeft}(t.display);if(r.from.line==r.to.line)n(r.from.line,r.from.ch,r.to.ch);else{var c=ze(o,r.from.line),u=ze(o,r.to.line),d=me(o,c)==me(o,u),h=n(r.from.line,r.from.ch,d?c.text.length:null).end,f=n(r.to.line,d?0:null,r.to.ch).start;d&&(h.top<f.top-2?(e(h.right,h.top,null,h.bottom),e(l,f.top,f.left,f.bottom)):e(h.right,h.top,f.left-h.right,h.bottom)),h.bottom<f.top&&e(l,h.bottom,null,f.top)}Hn(i.selectionDiv,s),i.selectionDiv.style.display=""}(t),t.options.moveInputWithCursor){var i=z(t,t.doc.sel.head,"div"),o=$n(e.wrapper),r=$n(e.lineDiv);e.inputDiv.style.top=Math.max(0,Math.min(e.wrapper.clientHeight-10,i.top+r.top-o.top))+"px",e.inputDiv.style.left=Math.max(0,Math.min(e.wrapper.clientWidth-10,i.left+r.left-o.left))+"px"}}function x(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursor.style.visibility=e.otherCursor.style.visibility="",t.options.cursorBlinkRate>0&&(e.blinker=setInterval((function(){e.cursor.style.visibility=e.otherCursor.style.visibility=(n=!n)?"":"hidden"}),t.options.cursorBlinkRate))}}function T(t,e){t.doc.mode.startState&&t.doc.frontier<t.display.showingTo&&t.state.highlight.set(e,En(S,t))}function S(t){var e=t.doc;if(e.frontier<e.first&&(e.frontier=e.first),!(e.frontier>=t.display.showingTo)){var n,i=+new Date+t.options.workTime,o=Zt(e.mode,L(t,e.frontier)),r=[];e.iter(e.frontier,Math.min(e.first+e.size,t.display.showingTo+500),(function(s){if(e.frontier>=t.display.showingFrom){var a=s.styles;s.styles=Te(t,s,o,!0);for(var l=!a||a.length!=s.styles.length,c=0;!l&&c<a.length;++c)l=a[c]!=s.styles[c];l&&(n&&n.end==e.frontier?n.end++:r.push(n={start:e.frontier,end:e.frontier+1})),s.stateAfter=Zt(e.mode,o)}else Le(t,s.text,o),s.stateAfter=e.frontier%5==0?Zt(e.mode,o):null;return++e.frontier,+new Date>i?(T(t,t.options.workDelay),!0):void 0})),r.length&&_(t,(function(){for(var t=0;t<r.length;++t)X(this,r[t].start,r[t].end)}))()}}function L(t,e,n){var i=t.doc,o=t.display;if(!i.mode.startState)return!0;var r=function(t,e,n){for(var i,o,r=t.doc,s=n?-1:e-(t.doc.mode.innerMode?1e3:100),a=e;a>s;--a){if(a<=r.first)return r.first;var l=ze(r,a-1);if(l.stateAfter&&(!n||a<=r.frontier))return a;var c=Cn(l.text,null,t.options.tabSize);(null==o||i>c)&&(o=a-1,i=c)}return o}(t,e,n),s=r>i.first&&ze(i,r-1).stateAfter;return s=s?Zt(i.mode,s):Jt(i.mode),i.iter(r,e,(function(n){Le(t,n.text,s);var a=r==e-1||r%5==0||r>=o.showingFrom&&r<o.showingTo;n.stateAfter=a?Zt(i.mode,s):null,++r})),n&&(i.frontier=r),s}function N(t){return t.lineSpace.offsetTop}function E(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function A(t,e,n,i,o){var r=-1;if((i=i||I(t,e)).crude){var s=i.left+n*i.width;return{left:s,right:s+i.width,top:i.top,bottom:i.bottom}}for(var a=n;;a+=r){var l=i[a];if(l)break;0>r&&0==a&&(r=1)}return"left"==(o=a>n?"left":n>a?"right":o)&&l.leftSide?l=l.leftSide:"right"==o&&l.rightSide&&(l=l.rightSide),{left:n>a?l.right:l.left,right:a>n?l.left:l.right,top:l.top,bottom:l.bottom}}function M(t,e){for(var n=t.display.measureLineCache,i=0;i<n.length;++i){var o=n[i];if(o.text==e.text&&o.markedSpans==e.markedSpans&&t.display.scroller.clientWidth==o.width&&o.classes==e.textClass+"|"+e.wrapClass)return o}}function I(t,e){var n=M(t,e);if(n)return n.measure;var i=D(t,e),o=t.display.measureLineCache,r={text:e.text,width:t.display.scroller.clientWidth,markedSpans:e.markedSpans,measure:i,classes:e.textClass+"|"+e.wrapClass};return 16==o.length?o[++t.display.measureLineCachePos%16]=r:o.push(r),i}function D(t,e){function n(t){var e=t.top-f.top,n=t.bottom-f.top;n>g&&(n=g),0>e&&(e=0);for(var i=p.length-2;i>=0;i-=2){var o=p[i],r=p[i+1];if(!(o>n||e>r)&&(e>=o&&r>=n||o>=e&&n>=r||Math.min(n,r)-Math.max(e,o)>=n-e>>1)){p[i]=Math.min(e,o),p[i+1]=Math.max(n,r);break}}return 0>i&&(i=p.length,p.push(e,n)),{left:t.left-f.left,right:t.right-f.left,top:i,bottom:null}}function i(t){t.bottom=p[t.top+1],t.top=p[t.top]}if(!t.options.lineWrapping&&e.text.length>=t.options.crudeMeasuringFrom)return function(t,e){var n=new Bi(e.text.slice(0,100),null);e.textClass&&(n.textClass=e.textClass);var i=D(t,n),o=A(t,n,0,i,"left"),r=A(t,n,99,i,"right");return{crude:!0,top:o.top,left:o.left,bottom:o.bottom,width:(r.right-o.left)/100}}(t,e);var o=t.display,r=Nn(e.text.length),s=Ee(t,e,r,!0).pre;if(Xn&&!Qn&&!t.options.lineWrapping&&s.childNodes.length>100){for(var a=document.createDocumentFragment(),l=s.childNodes.length,c=0,u=Math.ceil(l/10);u>c;++c){for(var d=In("div",null,null,"display: inline-block"),h=0;10>h&&l;++h)d.appendChild(s.firstChild),--l;a.appendChild(d)}s.appendChild(a)}Hn(o.measure,s);var f=$n(o.lineDiv),p=[],m=Nn(e.text.length),g=s.offsetHeight;Zn&&o.measure.first!=s&&Hn(o.measure,s);for(c=0;c<r.length;++c)if(C=r[c]){var v=C,b=null;if(/\bCodeMirror-widget\b/.test(C.className)&&C.getClientRects){1==C.firstChild.nodeType&&(v=C.firstChild);var y=v.getClientRects();y.length>1&&((b=m[c]=n(y[0])).rightSide=n(y[y.length-1]))}b||(b=m[c]=n($n(v))),C.measureRight&&(b.right=$n(C.measureRight).left),C.leftSide&&(b.leftSide=n($n(C.leftSide)))}Dn(t.display.measure);var C;for(c=0;c<m.length;++c)(C=m[c])&&(i(C),C.leftSide&&i(C.leftSide),C.rightSide&&i(C.rightSide));return m}function H(t){t.display.measureLineCache.length=t.display.measureLineCachePos=0,t.display.cachedCharWidth=t.display.cachedTextHeight=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function R(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function $(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function P(t,e,n,i){if(e.widgets)for(var o=0;o<e.widgets.length;++o)if(e.widgets[o].above){var r=we(e.widgets[o]);n.top+=r,n.bottom+=r}if("line"==i)return n;i||(i="local");var s=Ke(t,e);if("local"==i?s+=N(t.display):s-=t.display.viewOffset,"page"==i||"window"==i){var a=$n(t.display.lineSpace);s+=a.top+("window"==i?0:$());var l=a.left+("window"==i?0:R());n.left+=l,n.right+=l}return n.top+=s,n.bottom+=s,n}function O(t,e,n){if("div"==n)return e;var i=e.left,o=e.top;if("page"==n)i-=R(),o-=$();else if("local"==n||!n){var r=$n(t.display.sizer);i+=r.left,o+=r.top}var s=$n(t.display.lineSpace);return{left:i-s.left,top:o-s.top}}function F(t,e,n,i,o){return i||(i=ze(t.doc,e.line)),P(t,i,A(t,i,e.ch,null,o),n)}function z(t,e,n,i,o){function r(e,r){var s=A(t,i,e,o,r?"right":"left");return r?s.left=s.right:s.right=s.left,P(t,i,s,n)}function s(t,e){var n=a[e],i=n.level%2;return t==zn(n)&&e&&n.level<a[e-1].level?(t=Bn(n=a[--e])-(n.level%2?0:1),i=!0):t==Bn(n)&&e<a.length-1&&n.level<a[e+1].level&&(t=zn(n=a[++e])-n.level%2,i=!1),i&&t==n.to&&t>n.from?r(t-1):r(t,i)}i=i||ze(t.doc,e.line),o||(o=I(t,i));var a=Ge(i),l=e.ch;if(!a)return r(l);var c=s(l,Kn(a,l));return null!=so&&(c.other=s(l,so)),c}function B(t,e,n,i){var o=new Mt(t,e);return o.xRel=i,n&&(o.outside=!0),o}function W(t,e,n){var i=t.doc;if(0>(n+=t.display.viewOffset))return B(i.first,0,!0,-1);var o=Ve(i,n),r=i.first+i.size-1;if(o>r)return B(i.first+i.size-1,ze(i,r).text.length,!0,1);for(0>e&&(e=0);;){var s=ze(i,o),a=U(t,s,o,e,n),l=pe(s),c=l&&l.find();if(!l||!(a.ch>c.from.ch||a.ch==c.from.ch&&a.xRel>0))return a;o=c.to.line}}function U(t,e,n,i,o){function r(i){var o=z(t,Mt(n,i),"line",e,c);return a=!0,s>o.bottom?o.left-l:s<o.top?o.left+l:(a=!1,o.left)}var s=o-Ke(t,e),a=!1,l=2*t.display.wrapper.clientWidth,c=I(t,e),u=Ge(e),d=e.text.length,h=Wn(e),f=Un(e),p=r(h),m=a,g=r(f),v=a;if(i>g)return B(n,f,v,1);for(;;){if(u?f==h||f==_n(e,h,1):1>=f-h){for(var b=p>i||g-i>=i-p?h:f,y=i-(b==h?p:g);Zi.test(e.text.charAt(b));)++b;return B(n,b,b==h?m:v,0>y?-1:y?1:0)}var C=Math.ceil(d/2),w=h+C;if(u){w=h;for(var k=0;C>k;++k)w=_n(e,w,1)}var x=r(w);x>i?(f=w,g=x,(v=a)&&(g+=1e3),d=C):(h=w,p=x,m=a,d-=C)}}function j(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==pi){pi=In("pre");for(var e=0;49>e;++e)pi.appendChild(document.createTextNode("x")),pi.appendChild(In("br"));pi.appendChild(document.createTextNode("x"))}Hn(t.measure,pi);var n=pi.offsetHeight/50;return n>3&&(t.cachedTextHeight=n),Dn(t.measure),n||1}function V(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=In("span","x"),n=In("pre",[e]);Hn(t.measure,n);var i=e.offsetWidth;return i>2&&(t.cachedCharWidth=i),i||10}
function K(t){t.curOp={changes:[],forceUpdate:!1,updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++wi},_i++||(Gi=[])}function G(t){var e,n,i=t.curOp,o=t.doc,r=t.display;if(t.curOp=null,i.updateMaxLine&&c(t),r.maxLineChanged&&!t.options.lineWrapping&&r.maxLine){var s=function(t,e){var n=!1;if(e.markedSpans)for(var i=0;i<e.markedSpans;++i){var o=e.markedSpans[i];!o.collapsed||null!=o.to&&o.to!=e.text.length||(n=!0)}var r=!n&&M(t,e);if(r||e.text.length>=t.options.crudeMeasuringFrom)return A(t,e,e.text.length,r&&r.measure,"right").right;var s=Ee(t,e,null,!0).pre,a=s.appendChild(Fn(t.display.measure));return Hn(t.display.measure,s),$n(a).right-$n(t.display.lineDiv).left}(t,r.maxLine);r.sizer.style.minWidth=Math.max(0,s+3+qi)+"px",r.maxLineChanged=!1;var a=Math.max(0,r.sizer.offsetLeft+r.sizer.offsetWidth-r.scroller.clientWidth);a<o.scrollLeft&&!i.updateScrollPos&&ut(t,Math.min(r.scroller.scrollLeft,a),!0)}if(i.updateScrollPos)e=i.updateScrollPos;else if(i.selectionChanged&&r.scroller.clientHeight){var l=z(t,o.sel.head);e=jt(t,l.left,l.top,l.left,l.bottom)}if((i.changes.length||i.forceUpdate||e&&null!=e.scrollTop)&&(n=v(t,i.changes,e&&e.scrollTop,i.forceUpdate),t.display.scroller.offsetHeight&&(t.doc.scrollTop=t.display.scroller.scrollTop)),!n&&i.selectionChanged&&k(t),i.updateScrollPos){var u=Math.max(0,Math.min(r.scroller.scrollHeight-r.scroller.clientHeight,e.scrollTop)),d=Math.max(0,Math.min(r.scroller.scrollWidth-r.scroller.clientWidth,e.scrollLeft));r.scroller.scrollTop=r.scrollbarV.scrollTop=o.scrollTop=u,r.scroller.scrollLeft=r.scrollbarH.scrollLeft=o.scrollLeft=d,f(t),i.scrollToPos&&Ut(t,$t(t.doc,i.scrollToPos.from),$t(t.doc,i.scrollToPos.to),i.scrollToPos.margin)}else e&&function(t){var e=Ut(t,t.doc.sel.head,null,t.options.cursorScrollMargin);if(t.state.focused){var n=t.display,i=$n(n.sizer),o=null;if(e.top+i.top<0?o=!0:e.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(o=!1),null!=o&&!li){var r="none"==n.cursor.style.display;r&&(n.cursor.style.display="",n.cursor.style.left=e.left+"px",n.cursor.style.top=e.top-n.viewOffset+"px"),n.cursor.scrollIntoView(o),r&&(n.cursor.style.display="none")}}}(t);i.selectionChanged&&x(t),t.state.focused&&i.updateInput&&tt(t,i.userSelChange);var h,p=i.maybeHiddenMarkers,m=i.maybeUnhiddenMarkers;if(p)for(var g=0;g<p.length;++g)p[g].lines.length||fn(p[g],"hide");if(m)for(g=0;g<m.length;++g)m[g].lines.length&&fn(m[g],"unhide");if(--_i||(h=Gi,Gi=null),i.textChanged&&fn(t,"change",t,i.textChanged),i.cursorActivity&&fn(t,"cursorActivity",t),h)for(g=0;g<h.length;++g)h[g]()}function _(t,e){return function(){var n=t||this,i=!n.curOp;i&&K(n);try{var o=e.apply(n,arguments)}finally{i&&G(n)}return o}}function q(t){return function(){var e,n=this.cm&&!this.cm.curOp;n&&K(this.cm);try{e=t.apply(this,arguments)}finally{n&&G(this.cm)}return e}}function Y(t,e){var n,i=!t.curOp;i&&K(t);try{n=e()}finally{i&&G(t)}return n}function X(t,e,n,i){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),t.curOp.changes.push({from:e,to:n,diff:i})}function Q(t){t.display.pollingFast||t.display.poll.set(t.options.pollInterval,(function(){J(t),t.state.focused&&Q(t)}))}function Z(t){var e=!1;t.display.pollingFast=!0,t.display.poll.set(20,(function n(){J(t)||e?(t.display.pollingFast=!1,Q(t)):(e=!0,t.display.poll.set(60,n))}))}function J(t){var e=t.display.input,n=t.display.prevInput,i=t.doc,o=i.sel;if(!t.state.focused||io(e)||nt(t)||t.state.disableInput)return!1;t.state.pasteIncoming&&t.state.fakedLastChar&&(e.value=e.value.substring(0,e.value.length-1),t.state.fakedLastChar=!1);var r=e.value;if(r==n&&It(o.from,o.to))return!1;if(Xn&&!Zn&&t.display.inputHasSelection===r)return tt(t,!0),!1;var s=!t.curOp;s&&K(t),o.shift=!1;for(var a=0,l=Math.min(n.length,r.length);l>a&&n.charCodeAt(a)==r.charCodeAt(a);)++a;var c=o.from,u=o.to;a<n.length?c=Mt(c.line,c.ch-(n.length-a)):t.state.overwrite&&It(c,u)&&!t.state.pasteIncoming&&(u=Mt(u.line,Math.min(ze(i,u.line).text.length,u.ch+(r.length-a))));var d=t.curOp.updateInput,h={from:c,to:u,text:no(r.slice(a)),origin:t.state.pasteIncoming?"paste":"+input"};return xt(t.doc,h,"end"),t.curOp.updateInput=d,pn(t,"inputRead",t,h),r.length>1e3||r.indexOf("\n")>-1?e.value=t.display.prevInput="":t.display.prevInput=r,s&&G(t),t.state.pasteIncoming=!1,!0}function tt(t,e){var n,i,o=t.doc;if(It(o.sel.from,o.sel.to))e&&(t.display.prevInput=t.display.input.value="",Xn&&!Zn&&(t.display.inputHasSelection=null));else{t.display.prevInput="";var r=(n=oo&&(o.sel.to.line-o.sel.from.line>100||(i=t.getSelection()).length>1e3))?"-":i||t.getSelection();t.display.input.value=r,t.state.focused&&xn(t.display.input),Xn&&!Zn&&(t.display.inputHasSelection=r)}t.display.inaccurateSelection=n}function et(t){"nocursor"==t.options.readOnly||ui&&document.activeElement==t.display.input||t.display.input.focus()}function nt(t){return t.options.readOnly||t.doc.cantEdit}function it(t,e){for(var n=cn(e);n!=t.wrapper;n=n.parentNode)if(!n||n.ignoreEvents||n.parentNode==t.sizer&&n!=t.mover)return!0}function ot(t,e,n){var i=t.display;if(!n){var o=cn(e);if(o==i.scrollbarH||o==i.scrollbarH.firstChild||o==i.scrollbarV||o==i.scrollbarV.firstChild||o==i.scrollbarFiller||o==i.gutterFiller)return null}var r,s,a=$n(i.lineSpace);try{r=e.clientX,s=e.clientY}catch(e){return null}return W(t,r-a.left,s-a.top)}function rt(t){function e(t){if(!It(g,t)){if(g=t,"single"==c)return void Ft(i.doc,$t(r,a),t);if(p=$t(r,p),m=$t(r,m),"double"==c){var e=Xt(ze(r,t.line).text,t);Dt(t,p)?Ft(i.doc,e.from,m):Ft(i.doc,p,e.to)}else"triple"==c&&(Dt(t,p)?Ft(i.doc,m,$t(r,Mt(t.line,0))):Ft(i.doc,p,$t(r,Mt(t.line+1,0))))}}function n(t){b=1/0,rn(t),et(i),hn(document,"mousemove",y),hn(document,"mouseup",C)}if(!mn(this,t)){var i=this,o=i.display,r=i.doc,s=r.sel;if(s.shift=t.shiftKey,it(o,t))return void(ti||(o.scroller.draggable=!1,setTimeout((function(){o.scroller.draggable=!0}),100)));if(!at(i,t)){var a=ot(i,t);switch(un(t)){case 3:return void(bi&&yt.call(i,i,t));case 2:return ti&&(i.state.lastMiddleDown=+new Date),a&&Ft(i.doc,a),setTimeout(En(et,i),20),void rn(t)}if(!a)return void(cn(t)==o.scroller&&rn(t));i.state.focused||vt(i);var l=+new Date,c="single";if(gi&&gi.time>l-400&&It(gi.pos,a))c="triple",rn(t),setTimeout(En(et,i),20),function(t,e){Ft(t.doc,Mt(e,0),$t(t.doc,Mt(e+1,0)))}(i,a.line);else if(mi&&mi.time>l-400&&It(mi.pos,a)){c="double",gi={time:l,pos:a},rn(t);var u=Xt(ze(r,a.line).text,a);Ft(i.doc,u.from,u.to)}else mi={time:l,pos:a};var d=a;if(i.options.dragDrop&&Ji&&!nt(i)&&!It(s.from,s.to)&&!Dt(a,s.from)&&!Dt(s.to,a)&&"single"==c){var f=_(i,(function(e){ti&&(o.scroller.draggable=!1),i.state.draggingText=!1,hn(document,"mouseup",f),hn(o.scroller,"drop",f),Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)<10&&(rn(e),Ft(i.doc,a),et(i))}));return ti&&(o.scroller.draggable=!0),i.state.draggingText=f,o.scroller.dragDrop&&o.scroller.dragDrop(),dn(document,"mouseup",f),void dn(o.scroller,"drop",f)}rn(t),"single"==c&&Ft(i.doc,$t(r,a));var p=s.from,m=s.to,g=a,v=$n(o.wrapper),b=0,y=_(i,(function(t){Xn||un(t)?function t(n){var s=++b,a=ot(i,n,!0);if(a)if(It(a,d)){var l=n.clientY<v.top?-20:n.clientY>v.bottom?20:0;l&&setTimeout(_(i,(function(){b==s&&(o.scroller.scrollTop+=l,t(n))})),50)}else{i.state.focused||vt(i),d=a,e(a);var c=h(o,r);(a.line>=c.to||a.line<c.from)&&setTimeout(_(i,(function(){b==s&&t(n)})),150)}}(t):n(t)})),C=_(i,n);dn(document,"mousemove",y),dn(document,"mouseup",C)}}}function st(t,e,n,i,o){try{var r=e.clientX,s=e.clientY}catch(e){return!1}if(r>=Math.floor($n(t.display.gutters).right))return!1;i&&rn(e);var a=t.display,l=$n(a.lineDiv);if(s>l.bottom||!vn(t,n))return an(e);s-=l.top-a.viewOffset;for(var c=0;c<t.options.gutters.length;++c){var u=a.gutters.childNodes[c];if(u&&$n(u).right>=r)return o(t,n,t,Ve(t.doc,s),t.options.gutters[c],e),an(e)}}function at(t,e){return st(t,e,"gutterClick",!0,pn)}function lt(t){var e=this;if(!(mn(e,t)||it(e.display,t)||e.options.onDragEvent&&e.options.onDragEvent(e,on(t)))){rn(t),Xn&&(ki=+new Date);var n=ot(e,t,!0),i=t.dataTransfer.files;if(n&&!nt(e))if(i&&i.length&&window.FileReader&&window.File)for(var o=i.length,r=Array(o),s=0,a=function(t,i){var a=new FileReader;a.onload=function(){r[i]=a.result,++s==o&&(n=$t(e.doc,n),xt(e.doc,{from:n,to:n,text:no(r.join("\n")),origin:"paste"},"around"))},a.readAsText(t)},l=0;o>l;++l)a(i[l],l);else{if(e.state.draggingText&&!Dt(n,e.doc.sel.from)&&!Dt(e.doc.sel.to,n))return e.state.draggingText(t),void setTimeout(En(et,e),20);try{if(r=t.dataTransfer.getData("Text")){var c=e.doc.sel.from,u=e.doc.sel.to;zt(e.doc,n,n),e.state.draggingText&&At(e.doc,"",c,u,"paste"),e.replaceSelection(r,null,"paste"),et(e)}}catch(t){}}}}function ct(t,e){Math.abs(t.doc.scrollTop-e)<2||(t.doc.scrollTop=e,Yn||v(t,[],e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e),t.display.scrollbarV.scrollTop!=e&&(t.display.scrollbarV.scrollTop=e),Yn&&v(t,[]),T(t,100))}function ut(t,e,n){(n?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)||(e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),t.doc.scrollLeft=e,f(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbarH.scrollLeft!=e&&(t.display.scrollbarH.scrollLeft=e))}function dt(t,e){var n=e.wheelDeltaX,i=e.wheelDeltaY;null==n&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(n=e.detail),null==i&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:null==i&&(i=e.wheelDelta);var o=t.display,r=o.scroller;if(n&&r.scrollWidth>r.clientWidth||i&&r.scrollHeight>r.clientHeight){if(i&&di&&ti)for(var s=e.target;s!=r;s=s.parentNode)if(s.lineObj){t.display.currentWheelTarget=s;break}if(n&&!Yn&&!ii&&null!=Ti)return i&&ct(t,Math.max(0,Math.min(r.scrollTop+i*Ti,r.scrollHeight-r.clientHeight))),ut(t,Math.max(0,Math.min(r.scrollLeft+n*Ti,r.scrollWidth-r.clientWidth))),rn(e),void(o.wheelStartX=null);if(i&&null!=Ti){var a=i*Ti,l=t.doc.scrollTop,c=l+o.wrapper.clientHeight;0>a?l=Math.max(0,l+a-50):c=Math.min(t.doc.height,c+a+50),v(t,[],{top:l,bottom:c})}20>xi&&(null==o.wheelStartX?(o.wheelStartX=r.scrollLeft,o.wheelStartY=r.scrollTop,o.wheelDX=n,o.wheelDY=i,setTimeout((function(){if(null!=o.wheelStartX){var t=r.scrollLeft-o.wheelStartX,e=r.scrollTop-o.wheelStartY,n=e&&o.wheelDY&&e/o.wheelDY||t&&o.wheelDX&&t/o.wheelDX;o.wheelStartX=o.wheelStartY=null,n&&(Ti=(Ti*xi+n)/(xi+1),++xi)}}),200)):(o.wheelDX+=n,o.wheelDY+=i))}}function ht(t,e,n){if("string"==typeof e&&!(e=Oi[e]))return!1;t.display.pollingFast&&J(t)&&(t.display.pollingFast=!1);var i=t.doc,o=i.sel.shift,r=!1;try{nt(t)&&(t.state.suppressEdits=!0),n&&(i.sel.shift=!1),r=e(t)!=Yi}finally{i.sel.shift=o,t.state.suppressEdits=!1}return r}function ft(t){var e=t.state.keyMaps.slice(0);return t.options.extraKeys&&e.push(t.options.extraKeys),e.push(t.options.keyMap),e}function pt(t,e){var n=te(t.options.keyMap),i=n.auto;clearTimeout(Si),i&&!ne(e)&&(Si=setTimeout((function(){te(t.options.keyMap)==n&&(t.options.keyMap=i.call?i.call(null,t):i,o(t))}),50));var r,s=ie(e,!0);if(!s)return!1;var a=ft(t);return(r=e.shiftKey?ee("Shift-"+s,a,(function(e){return ht(t,e,!0)}))||ee(s,a,(function(e){return("string"==typeof e?/^go[A-Z]/.test(e):e.motion)?ht(t,e):void 0})):ee(s,a,(function(e){return ht(t,e)})))&&(rn(e),x(t),Zn&&(e.oldKeyCode=e.keyCode,e.keyCode=0),pn(t,"keyHandled",t,s,e)),r}function mt(t){var e=this;if(e.state.focused||vt(e),!(mn(e,t)||e.options.onKeyEvent&&e.options.onKeyEvent(e,on(t)))){Xn&&27==t.keyCode&&(t.returnValue=!1);var n=t.keyCode;e.doc.sel.shift=16==n||t.shiftKey;var i=pt(e,t);ii&&(Ni=i?n:null,!i&&88==n&&!oo&&(di?t.metaKey:t.ctrlKey)&&e.replaceSelection(""))}}function gt(t){var e=this;if(!(mn(e,t)||e.options.onKeyEvent&&e.options.onKeyEvent(e,on(t)))){var n=t.keyCode,i=t.charCode;if(ii&&n==Ni)return Ni=null,void rn(t);if(!(ii&&(!t.which||t.which<10)||ri)||!pt(e,t)){var o=String.fromCharCode(null==i?n:i);this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!nt(this)&&this.doc.mode.electricChars.indexOf(o)>-1&&setTimeout(_(e,(function(){Gt(e,e.doc.sel.to.line,"smart")})),75),function(t,e,n){var i=ee("'"+n+"'",ft(t),(function(e){return ht(t,e,!0)}));return i&&(rn(e),x(t),pn(t,"keyHandled",t,"'"+n+"'",e)),i}(e,t,o)||(Xn&&!Zn&&(e.display.inputHasSelection=null),Z(e))}}}function vt(t){"nocursor"!=t.options.readOnly&&(t.state.focused||(fn(t,"focus",t),t.state.focused=!0,-1==t.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(t.display.wrapper.className+=" CodeMirror-focused"),t.curOp||(tt(t,!0),ti&&setTimeout(En(tt,t,!0),0))),Q(t),x(t))}function bt(t){t.state.focused&&(fn(t,"blur",t),t.state.focused=!1,t.display.wrapper.className=t.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(t.display.blinker),setTimeout((function(){t.state.focused||(t.doc.sel.shift=!1)}),150)}function yt(t,e){function n(){if(null!=o.input.selectionStart){var t=o.input.value="​"+(It(r.from,r.to)?"":o.input.value);o.prevInput="​",o.input.selectionStart=1,o.input.selectionEnd=t.length}}function i(){if(o.inputDiv.style.position="relative",o.input.style.cssText=l,Zn&&(o.scrollbarV.scrollTop=o.scroller.scrollTop=a),Q(t),null!=o.input.selectionStart){(!Xn||Zn)&&n(),clearTimeout(Li);var e=0,i=function(){" "==o.prevInput&&0==o.input.selectionStart?_(t,Oi.selectAll)(t):e++<10?Li=setTimeout(i,500):tt(t)};Li=setTimeout(i,200)}}if(!mn(t,e,"contextmenu")){var o=t.display,r=t.doc.sel;if(!it(o,e)&&!function(t,e){return!!vn(t,"gutterContextMenu")&&st(t,e,"gutterContextMenu",!1,fn)}(t,e)){var s=ot(t,e),a=o.scroller.scrollTop;if(s&&!ii){t.options.resetSelectionOnContextMenu&&(It(r.from,r.to)||Dt(s,r.from)||!Dt(s,r.to))&&_(t,zt)(t.doc,s,s);var l=o.input.style.cssText;if(o.inputDiv.style.position="absolute",o.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",et(t),tt(t,!0),It(r.from,r.to)&&(o.input.value=o.prevInput=" "),Xn&&!Zn&&n(),bi){ln(e);var c=function(){hn(window,"mouseup",c),setTimeout(i,20)};dn(window,"mouseup",c)}else setTimeout(i,50)}}}}function Ct(t,e,n){if(!Dt(e.from,n))return $t(t,n);var i=e.text.length-1-(e.to.line-e.from.line);if(n.line>e.to.line+i){var o=n.line-i,r=t.first+t.size-1;return o>r?Mt(r,ze(t,r).text.length):Pt(n,ze(t,o).text.length)}if(n.line==e.to.line+i)return Pt(n,kn(e.text).length+(1==e.text.length?e.from.ch:0)+ze(t,e.to.line).text.length-e.to.ch);var s=n.line-e.from.line;return Pt(n,e.text[s].length+(s?0:e.from.ch))}function wt(t,e,n){if(n&&"object"==typeof n)return{anchor:Ct(t,e,n.anchor),head:Ct(t,e,n.head)};if("start"==n)return{anchor:e.from,head:e.from};var i=Ei(e);if("around"==n)return{anchor:e.from,head:i};if("end"==n)return{anchor:i,head:i};var o=function(t){if(Dt(t,e.from))return t;if(!Dt(e.to,t))return i;var n=t.line+e.text.length-(e.to.line-e.from.line)-1,o=t.ch;return t.line==e.to.line&&(o+=i.ch-e.to.ch),Mt(n,o)};return{anchor:o(t.sel.anchor),head:o(t.sel.head)}}function kt(t,e,n){var i={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){this.canceled=!0}};return n&&(i.update=function(e,n,i,o){e&&(this.from=$t(t,e)),n&&(this.to=$t(t,n)),i&&(this.text=i),void 0!==o&&(this.origin=o)}),fn(t,"beforeChange",t,i),t.cm&&fn(t.cm,"beforeChange",t.cm,i),i.canceled?null:{from:i.from,to:i.to,text:i.text,origin:i.origin}}function xt(t,e,n,i){if(t.cm){if(!t.cm.curOp)return _(t.cm,xt)(t,e,n,i);if(t.cm.state.suppressEdits)return}if(!(vn(t,"beforeChange")||t.cm&&vn(t.cm,"beforeChange"))||(e=kt(t,e,!0))){var o=yi&&!i&&function(t,e,n){var i=null;if(t.iter(e.line,n.line+1,(function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var n=t.markedSpans[e].marker;!n.readOnly||i&&-1!=Tn(i,n)||(i||(i=[])).push(n)}})),!i)return null;for(var o=[{from:e,to:n}],r=0;r<i.length;++r)for(var s=i[r],a=s.find(),l=0;l<o.length;++l){var c=o[l];if(!Dt(c.to,a.from)&&!Dt(a.to,c.from)){var u=[l,1];(Dt(c.from,a.from)||!s.inclusiveLeft&&It(c.from,a.from))&&u.push({from:c.from,to:a.from}),(Dt(a.to,c.to)||!s.inclusiveRight&&It(c.to,a.to))&&u.push({from:a.to,to:c.to}),o.splice.apply(o,u),l+=u.length-1}}return o}(t,e.from,e.to);if(o){for(var r=o.length-1;r>=1;--r)Tt(t,{from:o[r].from,to:o[r].to,text:[""]});o.length&&Tt(t,{from:o[0].from,to:o[0].to,text:e.text},n)}else Tt(t,e,n)}}function Tt(t,e,n){if(1!=e.text.length||""!=e.text[0]||!It(e.from,e.to)){var i=wt(t,e,n);Xe(t,e,i,t.cm?t.cm.curOp.id:NaN),Nt(t,e,i,ue(t,e));var o=[];Oe(t,(function(t,n){n||-1!=Tn(o,t.history)||(en(t.history,e),o.push(t.history)),Nt(t,e,null,ue(t,e))}))}}function St(t,e){if(!t.cm||!t.cm.state.suppressEdits){var n=t.history,i=("undo"==e?n.done:n.undone).pop();if(i){var o={changes:[],anchorBefore:i.anchorAfter,headBefore:i.headAfter,anchorAfter:i.anchorBefore,headAfter:i.headBefore,generation:n.generation};("undo"==e?n.undone:n.done).push(o),n.generation=i.generation||++n.maxGeneration;for(var r=vn(t,"beforeChange")||t.cm&&vn(t.cm,"beforeChange"),s=i.changes.length-1;s>=0;--s){var a=i.changes[s];if(a.origin=e,r&&!kt(t,a,!1))return void(("undo"==e?n.done:n.undone).length=0);o.changes.push(Ye(t,a));var l=s?wt(t,a,null):{anchor:i.anchorBefore,head:i.headBefore};Nt(t,a,l,de(t,a));var c=[];Oe(t,(function(t,e){e||-1!=Tn(c,t.history)||(en(t.history,a),c.push(t.history)),Nt(t,a,null,de(t,a))}))}}}}function Lt(t,e){function n(t){return Mt(t.line+e,t.ch)}t.first+=e,t.cm&&X(t.cm,t.first,t.first,e),t.sel.head=n(t.sel.head),t.sel.anchor=n(t.sel.anchor),t.sel.from=n(t.sel.from),t.sel.to=n(t.sel.to)}function Nt(t,e,n,i){if(t.cm&&!t.cm.curOp)return _(t.cm,Nt)(t,e,n,i);if(e.to.line<t.first)Lt(t,e.text.length-1-(e.to.line-e.from.line));else if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var o=e.text.length-1-(t.first-e.from.line);Lt(t,o),e={from:Mt(t.first,0),to:Mt(e.to.line+o,e.to.ch),text:[kn(e.text)],origin:e.origin}}var r=t.lastLine();e.to.line>r&&(e={from:e.from,to:Mt(r,ze(t,r).text.length),text:[e.text[0]],origin:e.origin}),e.removed=Be(t,e.from,e.to),n||(n=wt(t,e,null)),t.cm?Et(t.cm,e,i,n):Re(t,e,i,n)}}function Et(t,e,i,o){var r=t.doc,s=t.display,a=e.from,c=e.to,u=!1,d=a.line;t.options.lineWrapping||(d=je(me(r,ze(r,a.line))),r.iter(d,c.line+1,(function(t){return t==s.maxLine?(u=!0,!0):void 0}))),Dt(r.sel.head,e.from)||Dt(e.to,r.sel.head)||(t.curOp.cursorActivity=!0),Re(r,e,i,o,n(t)),t.options.lineWrapping||(r.iter(d,a.line+e.text.length,(function(t){var e=l(r,t);e>s.maxLineLength&&(s.maxLine=t,s.maxLineLength=e,s.maxLineChanged=!0,u=!1)})),u&&(t.curOp.updateMaxLine=!0)),r.frontier=Math.min(r.frontier,a.line),T(t,400);var h=e.text.length-(c.line-a.line)-1;if(X(t,a.line,c.line+1,h),vn(t,"change")){var f={from:a,to:c,text:e.text,removed:e.removed,origin:e.origin};if(t.curOp.textChanged){for(var p=t.curOp.textChanged;p.next;p=p.next);p.next=f}else t.curOp.textChanged=f}}function At(t,e,n,i,o){if(i||(i=n),Dt(i,n)){var r=i;i=n,n=r}"string"==typeof e&&(e=no(e)),xt(t,{from:n,to:i,text:e,origin:o},null)}function Mt(t,e){return this instanceof Mt?(this.line=t,void(this.ch=e)):new Mt(t,e)}function It(t,e){return t.line==e.line&&t.ch==e.ch}function Dt(t,e){return t.line<e.line||t.line==e.line&&t.ch<e.ch}function Ht(t){return Mt(t.line,t.ch)}function Rt(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function $t(t,e){if(e.line<t.first)return Mt(t.first,0);var n=t.first+t.size-1;return e.line>n?Mt(n,ze(t,n).text.length):Pt(e,ze(t,e.line).text.length)}function Pt(t,e){var n=t.ch;return null==n||n>e?Mt(t.line,e):0>n?Mt(t.line,0):t}function Ot(t,e){return e>=t.first&&e<t.first+t.size}function Ft(t,e,n,i){if(t.sel.shift||t.sel.extend){var o=t.sel.anchor;if(n){var r=Dt(e,o);r!=Dt(n,o)?(o=e,e=n):r!=Dt(e,n)&&(e=n)}zt(t,o,e,i)}else zt(t,e,n||e,i);t.cm&&(t.cm.curOp.userSelChange=!0)}function zt(t,e,n,i,o){if(!o&&vn(t,"beforeSelectionChange")||t.cm&&vn(t.cm,"beforeSelectionChange")){var r=function(t,e,n){var i={anchor:e,head:n};return fn(t,"beforeSelectionChange",t,i),t.cm&&fn(t.cm,"beforeSelectionChange",t.cm,i),i.anchor=$t(t,i.anchor),i.head=$t(t,i.head),i}(t,e,n);n=r.head,e=r.anchor}var s=t.sel;if(s.goalColumn=null,null==i&&(i=Dt(n,s.head)?-1:1),(o||!It(e,s.anchor))&&(e=Wt(t,e,i,"push"!=o)),(o||!It(n,s.head))&&(n=Wt(t,n,i,"push"!=o)),!It(s.anchor,e)||!It(s.head,n)){s.anchor=e,s.head=n;var a=Dt(n,e);s.from=a?n:e,s.to=a?e:n,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=t.cm.curOp.cursorActivity=!0),pn(t,"cursorActivity",t)}}function Bt(t){zt(t.doc,t.doc.sel.from,t.doc.sel.to,null,"push")}function Wt(t,e,n,i){var o=!1,r=e,s=n||1;t.cantEdit=!1;t:for(;;){var a=ze(t,r.line);if(a.markedSpans)for(var l=0;l<a.markedSpans.length;++l){var c=a.markedSpans[l],u=c.marker;if((null==c.from||(u.inclusiveLeft?c.from<=r.ch:c.from<r.ch))&&(null==c.to||(u.inclusiveRight?c.to>=r.ch:c.to>r.ch))){if(i&&(fn(u,"beforeCursorEnter"),u.explicitlyCleared)){if(a.markedSpans){--l;continue}break}if(!u.atomic)continue;var d=u.find()[0>s?"from":"to"];if(It(d,r)&&(d.ch+=s,d.ch<0?d=d.line>t.first?$t(t,Mt(d.line-1)):null:d.ch>a.text.length&&(d=d.line<t.first+t.size-1?Mt(d.line+1,0):null),!d)){if(o)return i?(t.cantEdit=!0,Mt(t.first,0)):Wt(t,e,n,!0);o=!0,d=e,s=-s}r=d;continue t}}return r}}function Ut(t,e,n,i){for(null==i&&(i=0);;){var o=!1,r=z(t,e),s=n&&n!=e?z(t,n):r,a=jt(t,Math.min(r.left,s.left),Math.min(r.top,s.top)-i,Math.max(r.left,s.left),Math.max(r.bottom,s.bottom)+i),l=t.doc.scrollTop,c=t.doc.scrollLeft;if(null!=a.scrollTop&&(ct(t,a.scrollTop),Math.abs(t.doc.scrollTop-l)>1&&(o=!0)),null!=a.scrollLeft&&(ut(t,a.scrollLeft),Math.abs(t.doc.scrollLeft-c)>1&&(o=!0)),!o)return r}}function jt(t,e,n,i,o){var r=t.display,s=j(t.display);0>n&&(n=0);var a=r.scroller.clientHeight-qi,l=r.scroller.scrollTop,c={},u=t.doc.height+E(r),d=s>n,h=o>u-s;if(l>n)c.scrollTop=d?0:n;else if(o>l+a){var f=Math.min(n,(h?u:o)-a);f!=l&&(c.scrollTop=f)}var p=r.scroller.clientWidth-qi,m=r.scroller.scrollLeft;e+=r.gutters.offsetWidth,i+=r.gutters.offsetWidth;var g=r.gutters.offsetWidth,v=g+10>e;return m+g>e||v?(v&&(e=0),c.scrollLeft=Math.max(0,e-10-g)):i>p+m-3&&(c.scrollLeft=i+10-p),c}function Vt(t,e,n){t.curOp.updateScrollPos={scrollLeft:null==e?t.doc.scrollLeft:e,scrollTop:null==n?t.doc.scrollTop:n}}function Kt(t,e,n){var i=t.curOp.updateScrollPos||(t.curOp.updateScrollPos={scrollLeft:t.doc.scrollLeft,scrollTop:t.doc.scrollTop}),o=t.display.scroller;i.scrollTop=Math.max(0,Math.min(o.scrollHeight-o.clientHeight,i.scrollTop+n)),i.scrollLeft=Math.max(0,Math.min(o.scrollWidth-o.clientWidth,i.scrollLeft+e))}function Gt(t,e,n,i){var o=t.doc;if(null==n&&(n="add"),"smart"==n)if(t.doc.mode.indent)var r=L(t,e);else n="prev";var s,a=t.options.tabSize,l=ze(o,e),c=Cn(l.text,null,a),u=l.text.match(/^\s*/)[0];if("smart"==n&&(s=t.doc.mode.indent(r,l.text.slice(u.length),l.text))==Yi){if(!i)return;n="prev"}"prev"==n?s=e>o.first?Cn(ze(o,e-1).text,null,a):0:"add"==n?s=c+t.options.indentUnit:"subtract"==n?s=c-t.options.indentUnit:"number"==typeof n&&(s=c+n),s=Math.max(0,s);var d="",h=0;if(t.options.indentWithTabs)for(var f=Math.floor(s/a);f;--f)h+=a,d+="\t";s>h&&(d+=wn(s-h)),d!=u?At(t.doc,d,Mt(e,0),Mt(e,u.length),"+input"):o.sel.head.line==e&&o.sel.head.ch<u.length&&zt(o,Mt(e,u.length),Mt(e,u.length),1),l.stateAfter=null}function _t(t,e,n){var i=e,o=e,r=t.doc;return"number"==typeof e?o=ze(r,Rt(r,e)):i=je(e),null==i?null:n(o,i)?(X(t,i,i+1),o):null}function qt(t,e,n,i,o){function r(){var e=a+n;return e<t.first||e>=t.first+t.size?d=!1:(a=e,u=ze(t,e))}function s(t){var e=(o?_n:qn)(u,l,n,!0);if(null==e){if(t||!r())return d=!1;l=o?(0>n?Un:Wn)(u):0>n?u.text.length:0}else l=e;return!0}var a=e.line,l=e.ch,c=n,u=ze(t,a),d=!0;if("char"==i)s();else if("column"==i)s(!0);else if("word"==i||"group"==i)for(var h=null,f="group"==i,p=!0;!(0>n)||s(!p);p=!1){var m=u.text.charAt(l)||"\n",g=An(m)?"w":f?/\s/.test(m)?null:"p":null;if(h&&h!=g){0>n&&(n=1,s());break}if(g&&(h=g),n>0&&!s(!p))break}var v=Wt(t,Mt(a,l),c,!0);return d||(v.hitSide=!0),v}function Yt(t,e,n,i){var o,r=t.doc,s=e.left;if("page"==i){var a=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);o=e.top+n*(a-(0>n?1.5:.5)*j(t.display))}else"line"==i&&(o=n>0?e.bottom+3:e.top-3);for(;;){var l=W(t,s,o);if(!l.outside)break;if(0>n?0>=o:o>=r.height){l.hitSide=!0;break}o+=5*n}return l}function Xt(t,e){var n=e.ch,i=e.ch;if(t){(e.xRel<0||i==t.length)&&n?--n:++i;for(var o=t.charAt(n),r=An(o)?An:/\s/.test(o)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!An(t)};n>0&&r(t.charAt(n-1));)--n;for(;i<t.length&&r(t.charAt(i));)++i}return{from:Mt(e.line,n),to:Mt(e.line,i)}}function Qt(e,n,i,o){t.defaults[e]=n,i&&(Ai[e]=o?function(t,e,n){n!=Ii&&i(t,e,n)}:i)}function Zt(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var n={};for(var i in e){var o=e[i];o instanceof Array&&(o=o.concat([])),n[i]=o}return n}function Jt(t,e,n){return!t.startState||t.startState(e,n)}function te(t){return"string"==typeof t?Fi[t]:t}function ee(t,e,n){function i(e){var o=(e=te(e))[t];if(!1===o)return"stop";if(null!=o&&n(o))return!0;if(e.nofallthrough)return"stop";var r=e.fallthrough;if(null==r)return!1;if("[object Array]"!=Object.prototype.toString.call(r))return i(r);for(var s=0,a=r.length;a>s;++s){var l=i(r[s]);if(l)return l}return!1}for(var o=0;o<e.length;++o){var r=i(e[o]);if(r)return"stop"!=r}}function ne(t){var e=ro[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function ie(t,e){if(ii&&34==t.keyCode&&t.char)return!1;var n=ro[t.keyCode];return null!=n&&!t.altGraphKey&&(t.altKey&&(n="Alt-"+n),(vi?t.metaKey:t.ctrlKey)&&(n="Ctrl-"+n),(vi?t.ctrlKey:t.metaKey)&&(n="Cmd-"+n),!e&&t.shiftKey&&(n="Shift-"+n),n)}function oe(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0}function re(t,e){this.lines=[],this.type=e,this.doc=t}function se(t,e,n,i,o){if(i&&i.shared)return function(t,e,n,i,o){(i=Ln(i)).shared=!1;var r=[se(t,e,n,i,o)],s=r[0],a=i.replacedWith;return Oe(t,(function(t){a&&(i.replacedWith=a.cloneNode(!0)),r.push(se(t,$t(t,e),$t(t,n),i,o));for(var l=0;l<t.linked.length;++l)if(t.linked[l].isParent)return;s=kn(r)})),new ae(r,s)}(t,e,n,i,o);if(t.cm&&!t.cm.curOp)return _(t.cm,se)(t,e,n,i,o);var r=new re(t,o);if(Dt(n,e)||It(e,n)&&"range"==o&&(!i.inclusiveLeft||!i.inclusiveRight))return r;i&&Ln(i,r),r.replacedWith&&(r.collapsed=!0,r.replacedWith=In("span",[r.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||(r.replacedWith.ignoreEvents=!0)),r.collapsed&&(Ci=!0),r.addToHistory&&Xe(t,{from:e,to:n,origin:"markText"},{head:t.sel.head,anchor:t.sel.anchor},NaN);var s,a,l,c=e.line,u=0,d=t.cm;if(t.iter(c,n.line+1,(function(i){d&&r.collapsed&&!d.options.lineWrapping&&me(t,i)==d.display.maxLine&&(l=!0);var o={from:null,to:null,marker:r};u+=i.text.length,c==e.line&&(o.from=e.ch,u-=e.ch),c==n.line&&(o.to=n.ch,u-=i.text.length-n.ch),r.collapsed&&(c==n.line&&(a=he(i,n.ch)),c==e.line?s=he(i,e.ch):Ue(i,0)),function(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}(i,o),++c})),r.collapsed&&t.iter(e.line,n.line+1,(function(e){ge(t,e)&&Ue(e,0)})),r.clearOnEnter&&dn(r,"beforeCursorEnter",(function(){r.clear()})),r.readOnly&&(yi=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),r.collapsed){if(s!=a)throw new Error("Inserting collapsed marker overlapping an existing one");r.size=u,r.atomic=!0}return d&&(l&&(d.curOp.updateMaxLine=!0),(r.className||r.title||r.startStyle||r.endStyle||r.collapsed)&&X(d,e.line,n.line+1),r.atomic&&Bt(d)),r}function ae(t,e){this.markers=t,this.primary=e;for(var n=0,i=this;n<t.length;++n)t[n].parent=this,dn(t[n],"clear",(function(){i.clear()}))}function le(t,e){if(t)for(var n=0;n<t.length;++n){var i=t[n];if(i.marker==e)return i}}function ce(t,e){for(var n,i=0;i<t.length;++i)t[i]!=e&&(n||(n=[])).push(t[i]);return n}function ue(t,e){var n=Ot(t,e.from.line)&&ze(t,e.from.line).markedSpans,i=Ot(t,e.to.line)&&ze(t,e.to.line).markedSpans;if(!n&&!i)return null;var o=e.from.ch,r=e.to.ch,s=It(e.from,e.to),a=function(t,e,n){if(t)for(var i,o=0;o<t.length;++o){var r=t[o],s=r.marker;if(null==r.from||(s.inclusiveLeft?r.from<=e:r.from<e)||(s.inclusiveLeft&&s.inclusiveRight||"bookmark"==s.type)&&r.from==e&&(!n||!r.marker.insertLeft)){var a=null==r.to||(s.inclusiveRight?r.to>=e:r.to>e);(i||(i=[])).push({from:r.from,to:a?null:r.to,marker:s})}}return i}(n,o,s),l=function(t,e,n){if(t)for(var i,o=0;o<t.length;++o){var r=t[o],s=r.marker;if(null==r.to||(s.inclusiveRight?r.to>=e:r.to>e)||"bookmark"==s.type&&r.from==e&&(!n||r.marker.insertLeft)){var a=null==r.from||(s.inclusiveLeft?r.from<=e:r.from<e);(i||(i=[])).push({from:a?null:r.from-e,to:null==r.to?null:r.to-e,marker:s})}}return i}(i,r,s),c=1==e.text.length,u=kn(e.text).length+(c?o:0);if(a)for(var d=0;d<a.length;++d){if(null==(h=a[d]).to)(f=le(l,h.marker))?c&&(h.to=null==f.to?null:f.to+u):h.to=o}if(l)for(d=0;d<l.length;++d){var h,f;if(null!=(h=l[d]).to&&(h.to+=u),null==h.from)(f=le(a,h.marker))||(h.from=u,c&&(a||(a=[])).push(h));else h.from+=u,c&&(a||(a=[])).push(h)}if(c&&a){for(d=0;d<a.length;++d)null!=a[d].from&&a[d].from==a[d].to&&"bookmark"!=a[d].marker.type&&a.splice(d--,1);a.length||(a=null)}var p=[a];if(!c){var m,g=e.text.length-2;if(g>0&&a)for(d=0;d<a.length;++d)null==a[d].to&&(m||(m=[])).push({from:null,to:null,marker:a[d].marker});for(d=0;g>d;++d)p.push(m);p.push(l)}return p}function de(t,e){var n=function(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var i=0,o=[];i<e.text.length;++i)o.push(Qe(n[i]));return o}(t,e),i=ue(t,e);if(!n)return i;if(!i)return n;for(var o=0;o<n.length;++o){var r=n[o],s=i[o];if(r&&s)t:for(var a=0;a<s.length;++a){for(var l=s[a],c=0;c<r.length;++c)if(r[c].marker==l.marker)continue t;r.push(l)}else s&&(n[o]=s)}return n}function he(t,e){var n,i=Ci&&t.markedSpans;if(i)for(var o,r=0;r<i.length;++r)(o=i[r]).marker.collapsed&&(null==o.from||o.from<e)&&(null==o.to||o.to>e)&&(!n||n.width<o.marker.width)&&(n=o.marker);return n}function fe(t){return he(t,-1)}function pe(t){return he(t,t.text.length+1)}function me(t,e){for(var n;n=fe(e);)e=ze(t,n.find().from.line);return e}function ge(t,e){var n=Ci&&e.markedSpans;if(n)for(var i,o=0;o<n.length;++o)if((i=n[o]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.replacedWith&&0==i.from&&i.marker.inclusiveLeft&&ve(t,e,i))return!0}}function ve(t,e,n){if(null==n.to){var i=ze(t,n.marker.find().to.line);return ve(t,i,le(i.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var o,r=0;r<e.markedSpans.length;++r)if((o=e.markedSpans[r]).marker.collapsed&&!o.marker.replacedWith&&o.from==n.to&&(o.marker.inclusiveLeft||n.marker.inclusiveRight)&&ve(t,e,o))return!0}function be(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function ye(t,e){if(e){for(var n=0;n<e.length;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function Ce(t){return function(){var e=!this.cm.curOp;e&&K(this.cm);try{var n=t.apply(this,arguments)}finally{e&&G(this.cm)}return n}}function we(t){return null!=t.height?t.height:(t.node.parentNode&&1==t.node.parentNode.nodeType||Hn(t.cm.display.measure,In("div",[t.node],null,"position: relative")),t.height=t.node.offsetHeight)}function ke(t){t.parent=null,be(t)}function xe(t,e,n,i,o,r){var s=n.flattenSpans;null==s&&(s=t.options.flattenSpans);var a,l=0,c=null,u=new oe(e,t.options.tabSize);for(""==e&&n.blankLine&&n.blankLine(i);!u.eol();)u.pos>t.options.maxHighlightLength?(s=!1,r&&Le(t,e,i,u.pos),u.pos=e.length,a=null):a=n.token(u,i),s&&c==a||(l<u.start&&o(u.start,c),l=u.start,c=a),u.start=u.pos;for(;l<u.pos;){var d=Math.min(u.pos,l+5e4);o(d,c),l=d}}function Te(t,e,n,i){var o=[t.state.modeGen];xe(t,e.text,t.doc.mode,n,(function(t,e){o.push(t,e)}),i);for(var r=0;r<t.state.overlays.length;++r){var s=t.state.overlays[r],a=1,l=0;xe(t,e.text,s.mode,!0,(function(t,e){for(var n=a;t>l;){var i=o[a];i>t&&o.splice(a,1,t,o[a+1],i),a+=2,l=Math.min(t,i)}if(e)if(s.opaque)o.splice(n,a-n,t,e),
a=n+2;else for(;a>n;n+=2){var r=o[n+1];o[n+1]=r?r+" "+e:e}}))}return o}function Se(t,e){return e.styles&&e.styles[0]==t.state.modeGen||(e.styles=Te(t,e,e.stateAfter=L(t,je(e)))),e.styles}function Le(t,e,n,i){var o=t.doc.mode,r=new oe(e,t.options.tabSize);for(r.start=r.pos=i||0,""==e&&o.blankLine&&o.blankLine(n);!r.eol()&&r.pos<=t.options.maxHighlightLength;)o.token(r,n),r.start=r.pos}function Ne(t,e){if(!t)return null;for(;;){var n=t.match(/(?:^|\s)line-(background-)?(\S+)/);if(!n)break;t=t.slice(0,n.index)+t.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==e[i]?e[i]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(e[i])||(e[i]+=" "+n[2])}return Wi[t]||(Wi[t]="cm-"+t.replace(/ +/g," cm-"))}function Ee(t,e,n,i){for(var o,r=e,s=!0;o=fe(r);)r=ze(t.doc,o.find().from.line);var a,l={pre:In("pre"),col:0,pos:0,measure:null,measuredSomething:!1,cm:t,copyWidgets:i};do{r.text&&(s=!1),l.measure=r==e&&n,l.pos=0,l.addToken=l.measure?Me:Ae,(Xn||ti)&&t.getOption("lineWrapping")&&(l.addToken=Ie(l.addToken));var c=He(r,l,Se(t,r));n&&r==e&&!l.measuredSomething&&(n[0]=l.pre.appendChild(Fn(t.display.measure)),l.measuredSomething=!0),c&&(r=ze(t.doc,c.to.line))}while(c);if(!n||l.measuredSomething||n[0]||(n[0]=l.pre.appendChild(s?In("span"," "):Fn(t.display.measure))),l.pre.firstChild||ge(t.doc,e)||l.pre.appendChild(document.createTextNode(" ")),n&&(Xn||Jn)&&(a=Ge(r))){var u=a.length-1;a[u].from==a[u].to&&--u;var d=a[u],h=a[u-1];if(d.from+1==d.to&&h&&d.level<h.level){var f=n[l.pos-1];f&&f.parentNode.insertBefore(f.measureRight=Fn(t.display.measure),f.nextSibling)}}var p=l.textClass?l.textClass+" "+(e.textClass||""):e.textClass;return p&&(l.pre.className=p),fn(t,"renderLine",t,e,l.pre),l}function Ae(t,e,n,i,o,r){if(e){var s=t.cm.options.specialChars;if(s.test(e))for(var a=document.createDocumentFragment(),l=0;;){s.lastIndex=l;var c=s.exec(e),u=c?c.index-l:e.length-l;if(u&&(a.appendChild(document.createTextNode(e.slice(l,l+u))),t.col+=u),!c)break;if(l+=u+1,"\t"==c[0]){var d=t.cm.options.tabSize,h=d-t.col%d;a.appendChild(In("span",wn(h),"cm-tab")),t.col+=h}else{var f=t.cm.options.specialCharPlaceholder(c[0]);a.appendChild(f),t.col+=1}}else{t.col+=e.length;a=document.createTextNode(e)}if(n||i||o||t.measure){var p=n||"";i&&(p+=i),o&&(p+=o);f=In("span",[a],p);return r&&(f.title=r),t.pre.appendChild(f)}t.pre.appendChild(a)}}function Me(t,e,n,i,o){for(var r=t.cm.options.lineWrapping,s=0;s<e.length;++s){var a=e.charAt(s),l=0==s;a>="�"&&"�">a&&s<e.length-1?(a=e.slice(s,s+2),++s):s&&r&&Pn(e,s)&&t.pre.appendChild(In("wbr"));var c=t.measure[t.pos],u=t.measure[t.pos]=Ae(t,a,n,l&&i,s==e.length-1&&o);c&&(u.leftSide=c.leftSide||c),Xn&&r&&" "==a&&s&&!/\s/.test(e.charAt(s-1))&&s<e.length-1&&!/\s/.test(e.charAt(s+1))&&(u.style.whiteSpace="normal"),t.pos+=a.length}e.length&&(t.measuredSomething=!0)}function Ie(t){function e(t){for(var e=" ",n=0;n<t.length-2;++n)e+=n%2?" ":" ";return e+" "}return function(n,i,o,r,s,a){return t(n,i.replace(/ {3,}/g,e),o,r,s,a)}}function De(t,e,n,i){var o=!i&&n.replacedWith;if(o&&(t.copyWidgets&&(o=o.cloneNode(!0)),t.pre.appendChild(o),t.measure)){if(e)t.measure[t.pos]=o;else{var r=Fn(t.cm.display.measure);if("bookmark"!=n.type||n.insertLeft){if(t.measure[t.pos])return;t.measure[t.pos]=t.pre.insertBefore(r,o)}else t.measure[t.pos]=t.pre.appendChild(r)}t.measuredSomething=!0}t.pos+=e}function He(t,e,n){var i=t.markedSpans,o=t.text,r=0;if(i)for(var s,a,l,c,u,d,h=o.length,f=0,p=1,m="",g=0;;){if(g==f){a=l=c=u="",d=null,g=1/0;for(var v=[],b=0;b<i.length;++b){var y=i[b],C=y.marker;y.from<=f&&(null==y.to||y.to>f)?(null!=y.to&&g>y.to&&(g=y.to,l=""),C.className&&(a+=" "+C.className),C.startStyle&&y.from==f&&(c+=" "+C.startStyle),C.endStyle&&y.to==g&&(l+=" "+C.endStyle),C.title&&!u&&(u=C.title),C.collapsed&&(!d||d.marker.size<C.size)&&(d=y)):y.from>f&&g>y.from&&(g=y.from),"bookmark"==C.type&&y.from==f&&C.replacedWith&&v.push(C)}if(d&&(d.from||0)==f&&(De(e,(null==d.to?h:d.to)-f,d.marker,null==d.from),null==d.to))return d.marker.find();if(!d&&v.length)for(b=0;b<v.length;++b)De(e,0,v[b])}if(f>=h)break;for(var w=Math.min(h,g);;){if(m){var k=f+m.length;if(!d){var x=k>w?m.slice(0,w-f):m;e.addToken(e,x,s?s+a:a,c,f+x.length==g?l:"",u)}if(k>=w){m=m.slice(w-f),f=w;break}f=k,c=""}m=o.slice(r,r=n[p++]),s=Ne(n[p++],e)}}else for(p=1;p<n.length;p+=2)e.addToken(e,o.slice(r,r=n[p]),Ne(n[p+1],e))}function Re(t,e,n,i,o){function r(t){return n?n[t]:null}function s(t,n,i){(function(t,e,n,i){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),be(t),ye(t,n);var o=i?i(t):1;o!=t.height&&Ue(t,o)})(t,n,i,o),pn(t,"change",t,e)}var a=e.from,l=e.to,c=e.text,u=ze(t,a.line),d=ze(t,l.line),h=kn(c),f=r(c.length-1),p=l.line-a.line;if(0!=a.ch||0!=l.ch||""!=h||t.cm&&!t.cm.options.wholeLineUpdateBefore)if(u==d)if(1==c.length)s(u,u.text.slice(0,a.ch)+h+u.text.slice(l.ch),f);else{for(var m=[],g=1,v=c.length-1;v>g;++g)m.push(new Bi(c[g],r(g),o));m.push(new Bi(h+u.text.slice(l.ch),f,o)),s(u,u.text.slice(0,a.ch)+c[0],r(0)),t.insert(a.line+1,m)}else if(1==c.length)s(u,u.text.slice(0,a.ch)+c[0]+d.text.slice(l.ch),r(0)),t.remove(a.line+1,p);else{s(u,u.text.slice(0,a.ch)+c[0],r(0)),s(d,h+d.text.slice(l.ch),f);for(g=1,v=c.length-1,m=[];v>g;++g)m.push(new Bi(c[g],r(g),o));p>1&&t.remove(a.line+1,p-1),t.insert(a.line+1,m)}else{for(g=0,v=c.length-1,m=[];v>g;++g)m.push(new Bi(c[g],r(g),o));s(d,d.text,f),p&&t.remove(a.line,p),m.length&&t.insert(a.line,m)}pn(t,"change",t,e),zt(t,i.anchor,i.head,null,!0)}function $e(t){this.lines=t,this.parent=null;for(var e=0,n=t.length,i=0;n>e;++e)t[e].parent=this,i+=t[e].height;this.height=i}function Pe(t){this.children=t;for(var e=0,n=0,i=0,o=t.length;o>i;++i){var r=t[i];e+=r.chunkSize(),n+=r.height,r.parent=this}this.size=e,this.height=n,this.parent=null}function Oe(t,e,n){!function t(i,o,r){if(i.linked)for(var s=0;s<i.linked.length;++s){var a=i.linked[s];if(a.doc!=o){var l=r&&a.sharedHist;(!n||l)&&(e(a.doc,l),t(a.doc,i,l))}}}(t,null,!0)}function Fe(t,n){if(n.cm)throw new Error("This document is already in use.");t.doc=n,n.cm=t,i(t),e(t),t.options.lineWrapping||c(t),t.options.mode=n.modeOption,X(t)}function ze(t,e){for(e-=t.first;!t.lines;)for(var n=0;;++n){var i=t.children[n],o=i.chunkSize();if(o>e){t=i;break}e-=o}return t.lines[e]}function Be(t,e,n){var i=[],o=e.line;return t.iter(e.line,n.line+1,(function(t){var r=t.text;o==n.line&&(r=r.slice(0,n.ch)),o==e.line&&(r=r.slice(e.ch)),i.push(r),++o})),i}function We(t,e,n){var i=[];return t.iter(e,n,(function(t){i.push(t.text)})),i}function Ue(t,e){for(var n=e-t.height,i=t;i;i=i.parent)i.height+=n}function je(t){if(null==t.parent)return null;for(var e=t.parent,n=Tn(e.lines,t),i=e.parent;i;e=i,i=i.parent)for(var o=0;i.children[o]!=e;++o)n+=i.children[o].chunkSize();return n+e.first}function Ve(t,e){var n=t.first;t:do{for(var i=0,o=t.children.length;o>i;++i){var r=t.children[i],s=r.height;if(s>e){t=r;continue t}e-=s,n+=r.chunkSize()}return n}while(!t.lines);for(i=0,o=t.lines.length;o>i;++i){var a=t.lines[i].height;if(a>e)break;e-=a}return n+i}function Ke(t,e){for(var n=0,i=(e=me(t.doc,e)).parent,o=0;o<i.lines.length;++o){var r=i.lines[o];if(r==e)break;n+=r.height}for(var s=i.parent;s;s=(i=s).parent)for(o=0;o<s.children.length;++o){var a=s.children[o];if(a==i)break;n+=a.height}return n}function Ge(t){var e=t.order;return null==e&&(e=t.order=ao(t.text)),e}function _e(t){return{done:[],undone:[],undoDepth:1/0,lastTime:0,lastOp:null,lastOrigin:null,generation:t||1,maxGeneration:t||1}}function qe(t,e,n,i){var o=e["spans_"+t.id],r=0;t.iter(Math.max(t.first,n),Math.min(t.first+t.size,i),(function(n){n.markedSpans&&((o||(o=e["spans_"+t.id]={}))[r]=n.markedSpans),++r}))}function Ye(t,e){var n={from:{line:e.from.line,ch:e.from.ch},to:Ei(e),text:Be(t,e.from,e.to)};return qe(t,n,e.from.line,e.to.line+1),Oe(t,(function(t){qe(t,n,e.from.line,e.to.line+1)}),!0),n}function Xe(t,e,n,i){var o=t.history;o.undone.length=0;var r=+new Date,s=kn(o.done);if(s&&(o.lastOp==i||o.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&t.cm&&o.lastTime>r-t.cm.options.historyEventDelay||"*"==e.origin.charAt(0)))){var a=kn(s.changes);It(e.from,e.to)&&It(e.from,a.to)?a.to=Ei(e):s.changes.push(Ye(t,e)),s.anchorAfter=n.anchor,s.headAfter=n.head}else for(s={changes:[Ye(t,e)],generation:o.generation,anchorBefore:t.sel.anchor,headBefore:t.sel.head,anchorAfter:n.anchor,headAfter:n.head},o.done.push(s),o.generation=++o.maxGeneration;o.done.length>o.undoDepth;)o.done.shift();o.lastTime=r,o.lastOp=i,o.lastOrigin=e.origin}function Qe(t){if(!t)return null;for(var e,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?e||(e=t.slice(0,n)):e&&e.push(t[n]);return e?e.length?e:null:t}function Ze(t,e){for(var n=0,i=[];n<t.length;++n){var o=t[n],r=o.changes,s=[];i.push({changes:s,anchorBefore:o.anchorBefore,headBefore:o.headBefore,anchorAfter:o.anchorAfter,headAfter:o.headAfter});for(var a=0;a<r.length;++a){var l,c=r[a];if(s.push({from:c.from,to:c.to,text:c.text}),e)for(var u in c)(l=u.match(/^spans_(\d+)$/))&&Tn(e,Number(l[1]))>-1&&(kn(s)[u]=c[u],delete c[u])}}return i}function Je(t,e,n,i){n<t.line?t.line+=i:e<t.line&&(t.line=e,t.ch=0)}function tn(t,e,n,i){for(var o=0;o<t.length;++o){for(var r=t[o],s=!0,a=0;a<r.changes.length;++a){var l=r.changes[a];if(r.copied||(l.from=Ht(l.from),l.to=Ht(l.to)),n<l.from.line)l.from.line+=i,l.to.line+=i;else if(e<=l.to.line){s=!1;break}}r.copied||(r.anchorBefore=Ht(r.anchorBefore),r.headBefore=Ht(r.headBefore),r.anchorAfter=Ht(r.anchorAfter),r.readAfter=Ht(r.headAfter),r.copied=!0),s?(Je(r.anchorBefore),Je(r.headBefore),Je(r.anchorAfter),Je(r.headAfter)):(t.splice(0,o+1),o=0)}}function en(t,e){var n=e.from.line,i=e.to.line,o=e.text.length-(i-n)-1;tn(t.done,n,i,o),tn(t.undone,n,i,o)}function nn(){ln(this)}function on(t){return t.stop||(t.stop=nn),t}function rn(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function sn(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function an(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function ln(t){rn(t),sn(t)}function cn(t){return t.target||t.srcElement}function un(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),di&&t.ctrlKey&&1==e&&(e=3),e}function dn(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var i=t._handlers||(t._handlers={});(i[e]||(i[e]=[])).push(n)}}function hn(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var i=t._handlers&&t._handlers[e];if(!i)return;for(var o=0;o<i.length;++o)if(i[o]==n){i.splice(o,1);break}}}function fn(t,e){var n=t._handlers&&t._handlers[e];if(n)for(var i=Array.prototype.slice.call(arguments,2),o=0;o<n.length;++o)n[o].apply(null,i)}function pn(t,e){function n(t){return function(){t.apply(null,o)}}var i=t._handlers&&t._handlers[e];if(i){var o=Array.prototype.slice.call(arguments,2);Gi||(++_i,Gi=[],setTimeout(gn,0));for(var r=0;r<i.length;++r)Gi.push(n(i[r]))}}function mn(t,e,n){return fn(t,n||e.type,t,e),an(e)||e.codemirrorIgnore}function gn(){--_i;var t=Gi;Gi=null;for(var e=0;e<t.length;++e)t[e]()}function vn(t,e){var n=t._handlers&&t._handlers[e];return n&&n.length>0}function bn(t){t.prototype.on=function(t,e){dn(this,t,e)},t.prototype.off=function(t,e){hn(this,t,e)}}function yn(){this.id=null}function Cn(t,e,n,i,o){null==e&&(-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length));for(var r=i||0,s=o||0;e>r;++r)"\t"==t.charAt(r)?s+=n-s%n:++s;return s}function wn(t){for(;Xi.length<=t;)Xi.push(kn(Xi)+" ");return Xi[t]}function kn(t){return t[t.length-1]}function xn(t){if(ci)t.selectionStart=0,t.selectionEnd=t.value.length;else try{t.select()}catch(t){}}function Tn(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;i>n;++n)if(t[n]==e)return n;return-1}function Sn(t,e){function n(){}n.prototype=t;var i=new n;return e&&Ln(e,i),i}function Ln(t,e){for(var n in e||(e={}),t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Nn(t){for(var e=[],n=0;t>n;++n)e.push(void 0);return e}function En(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function An(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||Qi.test(t))}function Mn(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}function In(t,e,n,i){var o=document.createElement(t);if(n&&(o.className=n),i&&(o.style.cssText=i),"string"==typeof e)Rn(o,e);else if(e)for(var r=0;r<e.length;++r)o.appendChild(e[r]);return o}function Dn(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function Hn(t,e){return Dn(t).appendChild(e)}function Rn(t,e){Zn?(t.innerHTML="",t.appendChild(document.createTextNode(e))):t.textContent=e}function $n(t){return t.getBoundingClientRect()}function Pn(){return!1}function On(t){if(null!=to)return to;var e=In("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return Hn(t,e),e.offsetWidth&&(to=e.offsetHeight-e.clientHeight),to||0}function Fn(t){if(null==eo){var e=In("span","​");Hn(t,In("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(eo=e.offsetWidth<=1&&e.offsetHeight>2&&!Qn)}return eo?In("span","​"):In("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function zn(t){return t.level%2?t.to:t.from}function Bn(t){return t.level%2?t.from:t.to}function Wn(t){var e=Ge(t);return e?zn(e[0]):0}function Un(t){var e=Ge(t);return e?Bn(kn(e)):t.text.length}function jn(t,e){var n=ze(t.doc,e),i=me(t.doc,n);i!=n&&(e=je(i));var o=Ge(i);return Mt(e,o?o[0].level%2?Un(i):Wn(i):0)}function Vn(t,e,n){var i=t[0].level;return e==i||n!=i&&n>e}function Kn(t,e){for(var n,i=0;i<t.length;++i){var o=t[i];if(o.from<e&&o.to>e)return so=null,i;if(o.from==e||o.to==e){if(null!=n)return Vn(t,o.level,t[n].level)?(so=n,i):(so=i,n);n=i}}return so=null,n}function Gn(t,e,n,i){if(!i)return e+n;do{e+=n}while(e>0&&Zi.test(t.text.charAt(e)));return e}function _n(t,e,n,i){var o=Ge(t);if(!o)return qn(t,e,n,i);for(var r=Kn(o,e),s=o[r],a=Gn(t,e,s.level%2?-n:n,i);;){if(a>s.from&&a<s.to)return a;if(a==s.from||a==s.to)return Kn(o,a)==r?a:n>0==(s=o[r+=n]).level%2?s.to:s.from;if(!(s=o[r+=n]))return null;a=n>0==s.level%2?Gn(t,s.to,-1,i):Gn(t,s.from,1,i)}}function qn(t,e,n,i){var o=e+n;if(i)for(;o>0&&Zi.test(t.text.charAt(o));)o+=n;return 0>o||o>t.text.length?null:o}var Yn=/gecko\/\d/i.test(navigator.userAgent),Xn=/MSIE \d/.test(navigator.userAgent),Qn=Xn&&(null==document.documentMode||document.documentMode<8),Zn=Xn&&(null==document.documentMode||document.documentMode<9),Jn=/Trident\/([7-9]|\d{2,})\./.test(navigator.userAgent),ti=/WebKit\//.test(navigator.userAgent),ei=ti&&/Qt\/\d+\.\d+/.test(navigator.userAgent),ni=/Chrome\//.test(navigator.userAgent),ii=/Opera\//.test(navigator.userAgent),oi=/Apple Computer/.test(navigator.vendor),ri=/KHTML\//.test(navigator.userAgent),si=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),ai=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),li=/PhantomJS/.test(navigator.userAgent),ci=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),ui=ci||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),di=ci||/Mac/.test(navigator.platform),hi=/win/i.test(navigator.platform),fi=ii&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);fi&&(fi=Number(fi[1])),fi&&fi>=15&&(ii=!1,ti=!0);var pi,mi,gi,vi=di&&(ei||ii&&(null==fi||12.11>fi)),bi=Yn||Xn&&!Zn,yi=!1,Ci=!1,wi=0,ki=0,xi=0,Ti=null;Xn?Ti=-.53:Yn?Ti=15:ni?Ti=-.7:oi&&(Ti=-1/3);var Si,Li,Ni=null,Ei=t.changeEnd=function(t){return t.text?Mt(t.from.line+t.text.length-1,kn(t.text).length+(1==t.text.length?t.from.ch:0)):t.to};t.Pos=Mt,t.prototype={constructor:t,focus:function(){window.focus(),et(this),Z(this)},setOption:function(t,e){var n=this.options,i=n[t];(n[t]!=e||"mode"==t)&&(n[t]=e,Ai.hasOwnProperty(t)&&_(this,Ai[t])(this,e,i))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](t)},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;n<e.length;++n)if(e[n]==t||"string"!=typeof e[n]&&e[n].name==t)return e.splice(n,1),!0},addOverlay:_(null,(function(e,n){var i=e.token?e:t.getMode(this.options,e);if(i.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:i,modeSpec:e,opaque:n&&n.opaque}),this.state.modeGen++,X(this)})),removeOverlay:_(null,(function(t){for(var e=this.state.overlays,n=0;n<e.length;++n){var i=e[n].modeSpec;if(i==t||"string"==typeof t&&i.name==t)return e.splice(n,1),this.state.modeGen++,void X(this)}})),indentLine:_(null,(function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),Ot(this.doc,t)&&Gt(this,t,e,n)})),indentSelection:_(null,(function(t){var e=this.doc.sel;if(It(e.from,e.to))return Gt(this,e.from.line,t);for(var n=e.to.line-(e.to.ch?0:1),i=e.from.line;n>=i;++i)Gt(this,i,t)})),getTokenAt:function(t,e){for(var n=this.doc,i=L(this,(t=$t(n,t)).line,e),o=this.doc.mode,r=new oe(ze(n,t.line).text,this.options.tabSize);r.pos<t.ch&&!r.eol();){r.start=r.pos;var s=o.token(r,i)}return{start:r.start,end:r.pos,string:r.current(),className:s||null,type:s||null,state:i}},getTokenTypeAt:function(t){t=$t(this.doc,t);var e=Se(this,ze(this.doc,t.line)),n=0,i=(e.length-1)/2,o=t.ch;if(0==o)return e[2];for(;;){var r=n+i>>1;if((r?e[2*r-1]:0)>=o)i=r;else{if(!(e[2*r+1]<o))return e[2*r+2];n=r+1}}},getModeAt:function(e){var n=this.doc.mode;return n.innerMode?t.innerMode(n,this.getTokenAt(e).state).mode:n},getHelper:function(t,e){if(Pi.hasOwnProperty(e)){var n=Pi[e],i=this.getModeAt(t);return i[e]&&n[i[e]]||i.helperType&&n[i.helperType]||n[i.name]}},getStateAfter:function(t,e){var n=this.doc;return L(this,(t=Rt(n,null==t?n.first+n.size-1:t))+1,e)},cursorCoords:function(t,e){var n=this.doc.sel;return z(this,null==t?n.head:"object"==typeof t?$t(this.doc,t):t?n.from:n.to,e||"page")},charCoords:function(t,e){return F(this,$t(this.doc,t),e||"page")},coordsChar:function(t,e){return W(this,(t=O(this,t,e||"page")).left,t.top)},lineAtHeight:function(t,e){return t=O(this,{top:t,left:0},e||"page").top,Ve(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e){var n=!1,i=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>i&&(t=i,n=!0);var o=ze(this.doc,t);return P(this,ze(this.doc,t),{top:0,left:0},e||"page").top+(n?o.height:0)},defaultTextHeight:function(){return j(this.display)},defaultCharWidth:function(){return V(this.display)},setGutterMarker:_(null,(function(t,e,n){return _t(this,t,(function(t){var i=t.gutterMarkers||(t.gutterMarkers={});return i[e]=n,!n&&Mn(i)&&(t.gutterMarkers=null),!0}))})),clearGutter:_(null,(function(t){var e=this,n=e.doc,i=n.first;n.iter((function(n){n.gutterMarkers&&n.gutterMarkers[t]&&(n.gutterMarkers[t]=null,X(e,i,i+1),Mn(n.gutterMarkers)&&(n.gutterMarkers=null)),++i}))})),addLineClass:_(null,(function(t,e,n){return _t(this,t,(function(t){var i="text"==e?"textClass":"background"==e?"bgClass":"wrapClass";if(t[i]){if(new RegExp("(?:^|\\s)"+n+"(?:$|\\s)").test(t[i]))return!1;t[i]+=" "+n}else t[i]=n;return!0}))})),removeLineClass:_(null,(function(t,e,n){return _t(this,t,(function(t){var i="text"==e?"textClass":"background"==e?"bgClass":"wrapClass",o=t[i];if(!o)return!1;if(null==n)t[i]=null;else{var r=o.match(new RegExp("(?:^|\\s+)"+n+"(?:$|\\s+)"));if(!r)return!1;var s=r.index+r[0].length;t[i]=o.slice(0,r.index)+(r.index&&s!=o.length?" ":"")+o.slice(s)||null}return!0}))})),addLineWidget:_(null,(function(t,e,n){return function(t,e,n,i){var o=new zi(t,n,i);return o.noHScroll&&(t.display.alignWidgets=!0),_t(t,e,(function(e){var n=e.widgets||(e.widgets=[]);if(null==o.insertAt?n.push(o):n.splice(Math.min(n.length-1,Math.max(0,o.insertAt)),0,o),o.line=e,!ge(t.doc,e)||o.showIfHidden){var i=Ke(t,e)<t.doc.scrollTop;Ue(e,e.height+we(o)),i&&Kt(t,0,o.height)}return!0})),o}(this,t,e,n)})),removeLineWidget:function(t){t.clear()},lineInfo:function(t){if("number"==typeof t){if(!Ot(this.doc,t))return null;var e=t;if(!(t=ze(this.doc,t)))return null}else{if(null==(e=je(t)))return null}return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(t,e,n,i,o){var r=this.display,s=(t=z(this,$t(this.doc,t))).bottom,a=t.left;if(e.style.position="absolute",r.sizer.appendChild(e),"over"==i)s=t.top;else if("above"==i||"near"==i){var l=Math.max(r.wrapper.clientHeight,this.doc.height),c=Math.max(r.sizer.clientWidth,r.lineSpace.clientWidth);("above"==i||t.bottom+e.offsetHeight>l)&&t.top>e.offsetHeight?s=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=l&&(s=t.bottom),a+e.offsetWidth>c&&(a=c-e.offsetWidth)}e.style.top=s+"px",e.style.left=e.style.right="","right"==o?(a=r.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==o?a=0:"middle"==o&&(a=(r.sizer.clientWidth-e.offsetWidth)/2),e.style.left=a+"px"),n&&function(t,e,n,i,o){var r=jt(t,e,n,i,o);null!=r.scrollTop&&ct(t,r.scrollTop),null!=r.scrollLeft&&ut(t,r.scrollLeft)}(this,a,s,a+e.offsetWidth,s+e.offsetHeight)},triggerOnKeyDown:_(null,mt),execCommand:function(t){return Oi[t](this)},findPosH:function(t,e,n,i){var o=1;0>e&&(o=-1,e=-e);for(var r=0,s=$t(this.doc,t);e>r&&!(s=qt(this.doc,s,o,n,i)).hitSide;++r);return s},moveH:_(null,(function(t,e){var n,i=this.doc.sel;n=i.shift||i.extend||It(i.from,i.to)?qt(this.doc,i.head,t,e,this.options.rtlMoveVisually):0>t?i.from:i.to,Ft(this.doc,n,n,t)})),deleteH:_(null,(function(t,e){var n=this.doc.sel;It(n.from,n.to)?At(this.doc,"",n.from,qt(this.doc,n.head,t,e,!1),"+delete"):At(this.doc,"",n.from,n.to,"+delete"),this.curOp.userSelChange=!0})),findPosV:function(t,e,n,i){var o=1,r=i;0>e&&(o=-1,e=-e);for(var s=0,a=$t(this.doc,t);e>s;++s){var l=z(this,a,"div");if(null==r?r=l.left:l.left=r,(a=Yt(this,l,o,n)).hitSide)break}return a},moveV:_(null,(function(t,e){var n=this.doc.sel,i=z(this,n.head,"div");null!=n.goalColumn&&(i.left=n.goalColumn);var o=Yt(this,i,t,e);"page"==e&&Kt(this,0,F(this,o,"div").top-i.top),Ft(this.doc,o,o,t),n.goalColumn=i.left})),toggleOverwrite:function(t){(null==t||t!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite",""))},hasFocus:function(){return this.state.focused},scrollTo:_(null,(function(t,e){Vt(this,t,e)})),getScrollInfo:function(){var t=this.display.scroller,e=qi;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-e,width:t.scrollWidth-e,clientHeight:t.clientHeight-e,clientWidth:t.clientWidth-e}},scrollIntoView:_(null,(function(t,e){null==t?t={from:this.doc.sel.head,to:null}:"number"==typeof t?t={from:Mt(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),e||(e=0);var n=t;null!=t.from.line&&(this.curOp.scrollToPos={from:t.from,to:t.to,margin:e},n={from:z(this,t.from),to:z(this,t.to)});var i=jt(this,Math.min(n.from.left,n.to.left),Math.min(n.from.top,n.to.top)-e,Math.max(n.from.right,n.to.right),Math.max(n.from.bottom,n.to.bottom)+e);Vt(this,i.scrollLeft,i.scrollTop)})),setSize:_(null,(function(t,e){function n(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t}null!=t&&(this.display.wrapper.style.width=n(t)),null!=e&&(this.display.wrapper.style.height=n(e)),this.options.lineWrapping&&(this.display.measureLineCache.length=this.display.measureLineCachePos=0),this.curOp.forceUpdate=!0})),operation:function(t){return Y(this,t)},refresh:_(null,(function(){var t=null==this.display.cachedTextHeight;H(this),Vt(this,this.doc.scrollLeft,this.doc.scrollTop),X(this),t&&i(this)})),swapDoc:_(null,(function(t){var e=this.doc;return e.cm=null,Fe(this,t),H(this),tt(this,!0),Vt(this,t.scrollLeft,t.scrollTop),pn(this,"swapDoc",this,e),e})),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},bn(t);var Ai=t.optionHandlers={},Mi=t.defaults={},Ii=t.Init={toString:function(){return"CodeMirror.Init"}};Qt("value","",(function(t,e){t.setValue(e)}),!0),Qt("mode",null,(function(t,n){t.doc.modeOption=n,e(t)}),!0),Qt("indentUnit",2,e,!0),Qt("indentWithTabs",!1),Qt("smartIndent",!0),Qt("tabSize",4,(function(t){e(t),H(t),X(t)}),!0),Qt("specialChars",/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,(function(t,e){t.options.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),t.refresh()}),!0),Qt("specialCharPlaceholder",(function(t){var e=In("span","•","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e}),(function(t){t.refresh()}),!0),Qt("electricChars",!0),Qt("rtlMoveVisually",!hi),Qt("wholeLineUpdateBefore",!0),Qt("theme","default",(function(t){r(t),s(t)}),!0),Qt("keyMap","default",o),Qt("extraKeys",null),Qt("onKeyEvent",null),Qt("onDragEvent",null),Qt("lineWrapping",!1,(function(t){t.options.lineWrapping?(t.display.wrapper.className+=" CodeMirror-wrap",t.display.sizer.style.minWidth=""):(t.display.wrapper.className=t.display.wrapper.className.replace(" CodeMirror-wrap",""),c(t)),i(t),X(t),H(t),setTimeout((function(){d(t)}),100)}),!0),Qt("gutters",[],(function(t){u(t.options),s(t)}),!0),Qt("fixedGutter",!0,(function(t,e){t.display.gutters.style.left=e?g(t.display)+"px":"0",t.refresh()}),!0),Qt("coverGutterNextToScrollbar",!1,d,!0),Qt("lineNumbers",!1,(function(t){u(t.options),s(t)}),!0),Qt("firstLineNumber",1,s,!0),Qt("lineNumberFormatter",(function(t){return t}),s,!0),Qt("showCursorWhenSelecting",!1,k,!0),Qt("resetSelectionOnContextMenu",!0),Qt("readOnly",!1,(function(t,e){"nocursor"==e?(bt(t),t.display.input.blur(),t.display.disabled=!0):(t.display.disabled=!1,e||tt(t,!0))})),Qt("dragDrop",!0),Qt("cursorBlinkRate",530),Qt("cursorScrollMargin",0),Qt("cursorHeight",1),Qt("workTime",100),Qt("workDelay",100),Qt("flattenSpans",!0),Qt("pollInterval",100),Qt("undoDepth",40,(function(t,e){t.doc.history.undoDepth=e})),Qt("historyEventDelay",500),Qt("viewportMargin",10,(function(t){t.refresh()}),!0),Qt("maxHighlightLength",1e4,(function(t){e(t),t.refresh()}),!0),Qt("crudeMeasuringFrom",1e4),Qt("moveInputWithCursor",!0,(function(t,e){e||(t.display.inputDiv.style.top=t.display.inputDiv.style.left=0)})),Qt("tabindex",null,(function(t,e){t.display.input.tabIndex=e||""})),Qt("autofocus",null);var Di=t.modes={},Hi=t.mimeModes={};t.defineMode=function(e,n){if(t.defaults.mode||"null"==e||(t.defaults.mode=e),arguments.length>2){n.dependencies=[];for(var i=2;i<arguments.length;++i)n.dependencies.push(arguments[i])}Di[e]=n},t.defineMIME=function(t,e){Hi[t]=e},t.resolveMode=function(e){if("string"==typeof e&&Hi.hasOwnProperty(e))e=Hi[e];else if(e&&"string"==typeof e.name&&Hi.hasOwnProperty(e.name)){var n=Hi[e.name];(e=Sn(n,e)).name=n.name}else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return t.resolveMode("application/xml");return"string"==typeof e?{name:e}:e||{name:"null"}},t.getMode=function(e,n){n=t.resolveMode(n);var i=Di[n.name];if(!i)return t.getMode(e,"text/plain");var o=i(e,n);if(Ri.hasOwnProperty(n.name)){var r=Ri[n.name];for(var s in r)r.hasOwnProperty(s)&&(o.hasOwnProperty(s)&&(o["_"+s]=o[s]),o[s]=r[s])}return o.name=n.name,o},t.defineMode("null",(function(){return{token:function(t){t.skipToEnd()}}})),t.defineMIME("text/plain","null");var Ri=t.modeExtensions={};t.extendMode=function(t,e){Ln(e,Ri.hasOwnProperty(t)?Ri[t]:Ri[t]={})},t.defineExtension=function(e,n){t.prototype[e]=n},t.defineDocExtension=function(t,e){ji.prototype[t]=e},t.defineOption=Qt;var $i=[];t.defineInitHook=function(t){$i.push(t)};var Pi=t.helpers={};t.registerHelper=function(e,n,i){Pi.hasOwnProperty(e)||(Pi[e]=t[e]={}),Pi[e][n]=i},t.isWordChar=An,t.copyState=Zt,t.startState=Jt,t.innerMode=function(t,e){for(;t.innerMode;){var n=t.innerMode(e);if(!n||n.mode==t)break;e=n.state,t=n.mode}return n||{mode:t,state:e}};var Oi=t.commands={selectAll:function(t){t.setSelection(Mt(t.firstLine(),0),Mt(t.lastLine()))},killLine:function(t){var e=t.getCursor(!0),n=t.getCursor(!1),i=!It(e,n);i||t.getLine(e.line).length!=e.ch?t.replaceRange("",e,i?n:Mt(e.line),"+delete"):t.replaceRange("",e,Mt(e.line+1,0),"+delete")},deleteLine:function(t){var e=t.getCursor().line;t.replaceRange("",Mt(e,0),Mt(e),"+delete")},delLineLeft:function(t){var e=t.getCursor();t.replaceRange("",Mt(e.line,0),e,"+delete")},undo:function(t){t.undo()},redo:function(t){t.redo()},goDocStart:function(t){t.extendSelection(Mt(t.firstLine(),0))},goDocEnd:function(t){t.extendSelection(Mt(t.lastLine()))},goLineStart:function(t){t.extendSelection(jn(t,t.getCursor().line))},goLineStartSmart:function(t){var e=t.getCursor(),n=jn(t,e.line),i=t.getLineHandle(n.line),o=Ge(i);if(o&&0!=o[0].level)t.extendSelection(n);else{var r=Math.max(0,i.text.search(/\S/)),s=e.line==n.line&&e.ch<=r&&e.ch;t.extendSelection(Mt(n.line,s?0:r))}},goLineEnd:function(t){t.extendSelection(function(t,e){for(var n,i;n=pe(i=ze(t.doc,e));)e=n.find().to.line;var o=Ge(i);return Mt(e,o?o[0].level%2?Wn(i):Un(i):i.text.length)}(t,t.getCursor().line))},goLineRight:function(t){var e=t.charCoords(t.getCursor(),"div").top+5;t.extendSelection(t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:e},"div"))},goLineLeft:function(t){var e=t.charCoords(t.getCursor(),"div").top+5;t.extendSelection(t.coordsChar({left:0,top:e},"div"))},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goGroupRight:function(t){t.moveH(1,"group")},goGroupLeft:function(t){t.moveH(-1,"group")},goWordRight:function(t){t.moveH(1,"word")},delCharBefore:function(t){t.deleteH(-1,"char")},delCharAfter:function(t){t.deleteH(1,"char")},delWordBefore:function(t){t.deleteH(-1,"word")},delWordAfter:function(t){t.deleteH(1,"word")},delGroupBefore:function(t){t.deleteH(-1,"group")},delGroupAfter:function(t){t.deleteH(1,"group")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("\t","end","+input")},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.replaceSelection("\t","end","+input")},transposeChars:function(t){var e=t.getCursor(),n=t.getLine(e.line);e.ch>0&&e.ch<n.length-1&&t.replaceRange(n.charAt(e.ch)+n.charAt(e.ch-1),Mt(e.line,e.ch-1),Mt(e.line,e.ch+1))},newlineAndIndent:function(t){_(t,(function(){t.replaceSelection("\n","end","+input"),t.indentLine(t.getCursor().line,null,!0)}))()},toggleOverwrite:function(t){t.toggleOverwrite()}},Fi=t.keyMap={};Fi.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},Fi.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},Fi.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo",
"Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]},Fi.default=di?Fi.macDefault:Fi.pcDefault,Fi.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},t.lookupKey=ee,t.isModifierKey=ne,t.keyName=ie,t.fromTextArea=function(e,n){function i(){e.value=l.getValue()}if(n||(n={}),n.value=e.value,!n.tabindex&&e.tabindex&&(n.tabindex=e.tabindex),!n.placeholder&&e.placeholder&&(n.placeholder=e.placeholder),null==n.autofocus){var o=document.body;try{o=document.activeElement}catch(t){}n.autofocus=o==e||null!=e.getAttribute("autofocus")&&o==document.body}if(e.form&&(dn(e.form,"submit",i),!n.leaveSubmitMethodAlone)){var r=e.form,s=r.submit;try{var a=r.submit=function(){i(),r.submit=s,r.submit(),r.submit=a}}catch(t){}}e.style.display="none";var l=t((function(t){e.parentNode.insertBefore(t,e.nextSibling)}),n);return l.save=i,l.getTextArea=function(){return e},l.toTextArea=function(){i(),e.parentNode.removeChild(l.getWrapperElement()),e.style.display="",e.form&&(hn(e.form,"submit",i),"function"==typeof e.form.submit&&(e.form.submit=s))},l},oe.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var n=e==t;else n=e&&(t.test?t.test(e):t(e));return n?(++this.pos,e):void 0},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);return e>-1?(this.pos=e,!0):void 0},backUp:function(t){this.pos-=t},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Cn(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return Cn(this.string,null,this.tabSize)},match:function(t,e,n){if("string"!=typeof t){var i=this.string.slice(this.pos).match(t);return i&&i.index>0?null:(i&&!1!==e&&(this.pos+=i[0].length),i)}var o=function(t){return n?t.toLowerCase():t};return o(this.string.substr(this.pos,t.length))==o(t)?(!1!==e&&(this.pos+=t.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},t.StringStream=oe,t.TextMarker=re,bn(re),re.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&K(t),vn(this,"clear")){var n=this.find();n&&pn(this,"clear",n.from,n.to)}for(var i=null,o=null,r=0;r<this.lines.length;++r){var s=this.lines[r],a=le(s.markedSpans,this);null!=a.to&&(o=je(s)),s.markedSpans=ce(s.markedSpans,a),null!=a.from?i=je(s):this.collapsed&&!ge(this.doc,s)&&t&&Ue(s,j(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(r=0;r<this.lines.length;++r){var c=me(t.doc,this.lines[r]),u=l(t.doc,c);u>t.display.maxLineLength&&(t.display.maxLine=c,t.display.maxLineLength=u,t.display.maxLineChanged=!0)}null!=i&&t&&X(t,i,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Bt(t)),e&&G(t)}},re.prototype.find=function(){for(var t,e,n=0;n<this.lines.length;++n){var i=this.lines[n],o=le(i.markedSpans,this);if(null!=o.from||null!=o.to){var r=je(i);null!=o.from&&(t=Mt(r,o.from)),null!=o.to&&(e=Mt(r,o.to))}}return"bookmark"==this.type?t:t&&{from:t,to:e}},re.prototype.changed=function(){var t=this.find(),e=this.doc.cm;if(t&&e){"bookmark"!=this.type&&(t=t.from);var n=ze(this.doc,t.line);if(function(t,e){var n=M(t,e);n&&(n.text=n.measure=n.markedSpans=null)}(e,n),t.line>=e.display.showingFrom&&t.line<e.display.showingTo){for(var i=e.display.lineDiv.firstChild;i;i=i.nextSibling)if(i.lineObj==n){i.offsetHeight!=n.height&&Ue(n,i.offsetHeight);break}Y(e,(function(){e.curOp.selectionChanged=e.curOp.forceUpdate=e.curOp.updateMaxLine=!0}))}}},re.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=Tn(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},re.prototype.detachLine=function(t){if(this.lines.splice(Tn(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},t.SharedTextMarker=ae,bn(ae),ae.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();pn(this,"clear")}},ae.prototype.find=function(){return this.primary.find()};var zi=t.LineWidget=function(t,e,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.cm=t,this.node=e};bn(zi),zi.prototype.clear=Ce((function(){var t=this.line.widgets,e=je(this.line);if(null!=e&&t){for(var n=0;n<t.length;++n)t[n]==this&&t.splice(n--,1);t.length||(this.line.widgets=null);var i=Ke(this.cm,this.line)<this.cm.doc.scrollTop;Ue(this.line,Math.max(0,this.line.height-we(this))),i&&Kt(this.cm,0,-this.height),X(this.cm,e,e+1)}})),zi.prototype.changed=Ce((function(){var t=this.height;this.height=null;var e=we(this)-t;if(e){Ue(this.line,this.line.height+e);var n=je(this.line);X(this.cm,n,n+1)}}));var Bi=t.Line=function(t,e,n){this.text=t,ye(this,e),this.height=n?n(this):1};bn(Bi),Bi.prototype.lineNo=function(){return je(this)};var Wi={};$e.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var n=t,i=t+e;i>n;++n){var o=this.lines[n];this.height-=o.height,ke(o),pn(o,"delete")}this.lines.splice(t,e)},collapse:function(t){t.splice.apply(t,[t.length,0].concat(this.lines))},insertInner:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var i=0,o=e.length;o>i;++i)e[i].parent=this},iterN:function(t,e,n){for(var i=t+e;i>t;++t)if(n(this.lines[t]))return!0}},Pe.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(o>t){var r=Math.min(e,o-t),s=i.height;if(i.removeInner(t,r),this.height-=s-i.height,o==r&&(this.children.splice(n--,1),i.parent=null),0==(e-=r))break;t=0}else t-=o}if(this.size-e<25){var a=[];this.collapse(a),this.children=[new $e(a)],this.children[0].parent=this}},collapse:function(t){for(var e=0,n=this.children.length;n>e;++e)this.children[e].collapse(t)},insertInner:function(t,e,n){this.size+=e.length,this.height+=n;for(var i=0,o=this.children.length;o>i;++i){var r=this.children[i],s=r.chunkSize();if(s>=t){if(r.insertInner(t,e,n),r.lines&&r.lines.length>50){for(;r.lines.length>50;){var a=new $e(r.lines.splice(r.lines.length-25,25));r.height-=a.height,this.children.splice(i+1,0,a),a.parent=this}this.maybeSpill()}break}t-=s}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=new Pe(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=e.size,t.height-=e.height;var n=Tn(t.parent.children,t);t.parent.children.splice(n+1,0,e)}else{var i=new Pe(t.children);i.parent=t,t.children=[i,e],t=i}e.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,n){for(var i=0,o=this.children.length;o>i;++i){var r=this.children[i],s=r.chunkSize();if(s>t){var a=Math.min(e,s-t);if(r.iterN(t,a,n))return!0;if(0==(e-=a))break;t=0}else t-=s}}};var Ui=0,ji=t.Doc=function(t,e,n){if(!(this instanceof ji))return new ji(t,e,n);null==n&&(n=0),Pe.call(this,[new $e([new Bi("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=_e(),this.cleanGeneration=1,this.frontier=n;var i=Mt(n,0);this.sel={from:i,to:i,head:i,anchor:i,shift:!1,extend:!1,goalColumn:null},this.id=++Ui,this.modeOption=e,"string"==typeof t&&(t=no(t)),Re(this,{from:i,to:i,text:t},null,{head:i,anchor:i})};ji.prototype=Sn(Pe.prototype,{constructor:ji,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,i=0,o=e.length;o>i;++i)n+=e[i].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=We(this,this.first,this.first+this.size);return!1===t?e:e.join(t||"\n")},setValue:function(t){var e=Mt(this.first,0),n=this.first+this.size-1;xt(this,{from:e,to:Mt(n,ze(this,n).text.length),text:no(t),origin:"setValue"},{head:e,anchor:e},!0)},replaceRange:function(t,e,n,i){At(this,t,e=$t(this,e),n=n?$t(this,n):e,i)},getRange:function(t,e,n){var i=Be(this,$t(this,t),$t(this,e));return!1===n?i:i.join(n||"\n")},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},setLine:function(t,e){Ot(this,t)&&At(this,e,Mt(t,0),$t(this,Mt(t)))},removeLine:function(t){t?At(this,"",$t(this,Mt(t-1)),$t(this,Mt(t))):At(this,"",Mt(0,0),$t(this,Mt(1,0)))},getLineHandle:function(t){return Ot(this,t)?ze(this,t):void 0},getLineNumber:function(t){return je(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=ze(this,t)),me(this,t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return $t(this,t)},getCursor:function(t){var e=this.sel;return Ht(null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||!1===t?e.to:e.from)},somethingSelected:function(){return!It(this.sel.head,this.sel.anchor)},setCursor:q((function(t,e,n){var i=$t(this,"number"==typeof t?Mt(t,e||0):t);n?Ft(this,i):zt(this,i,i)})),setSelection:q((function(t,e,n){zt(this,$t(this,t),$t(this,e||t),n)})),extendSelection:q((function(t,e,n){Ft(this,$t(this,t),e&&$t(this,e),n)})),getSelection:function(t){return this.getRange(this.sel.from,this.sel.to,t)},replaceSelection:function(t,e,n){xt(this,{from:this.sel.from,to:this.sel.to,text:no(t),origin:n},e||"around")},undo:q((function(){St(this,"undo")})),redo:q((function(){St(this,"redo")})),setExtending:function(t){this.sel.extend=t},historySize:function(){var t=this.history;return{undo:t.done.length,redo:t.undone.length}},clearHistory:function(){this.history=_e(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration()},changeGeneration:function(){return this.history.lastOp=this.history.lastOrigin=null,this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Ze(this.history.done),undone:Ze(this.history.undone)}},setHistory:function(t){var e=this.history=_e(this.history.maxGeneration);e.done=t.done.slice(0),e.undone=t.undone.slice(0)},markText:function(t,e,n){return se(this,$t(this,t),$t(this,e),n,"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft};return se(this,t=$t(this,t),t,n,"bookmark")},findMarksAt:function(t){var e=[],n=ze(this,(t=$t(this,t)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var o=n[i];(null==o.from||o.from<=t.ch)&&(null==o.to||o.to>=t.ch)&&e.push(o.marker.parent||o.marker)}return e},getAllMarks:function(){var t=[];return this.iter((function(e){var n=e.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&t.push(n[i].marker)})),t},posFromIndex:function(t){var e,n=this.first;return this.iter((function(i){var o=i.text.length+1;return o>t?(e=t,!0):(t-=o,void++n)})),$t(this,Mt(n,e))},indexFromPos:function(t){var e=(t=$t(this,t)).ch;return t.line<this.first||t.ch<0?0:(this.iter(this.first,t.line,(function(t){e+=t.text.length+1})),e)},copy:function(t){var e=new ji(We(this,this.first,this.first+this.size),this.modeOption,this.first);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<n&&(n=t.to);var i=new ji(We(this,e,n),t.mode||this.modeOption,e);return t.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:t.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],i},unlinkDoc:function(e){if(e instanceof t&&(e=e.doc),this.linked)for(var n=0;n<this.linked.length;++n){if(this.linked[n].doc==e){this.linked.splice(n,1),e.unlinkDoc(this);break}}if(e.history==this.history){var i=[e.id];Oe(e,(function(t){i.push(t.id)}),!0),e.history=_e(),e.history.done=Ze(this.history.done,i),e.history.undone=Ze(this.history.undone,i)}},iterLinkedDocs:function(t){Oe(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),ji.prototype.eachLine=ji.prototype.iter;var Vi="iter insert remove copy getEditor".split(" ");for(var Ki in ji.prototype)ji.prototype.hasOwnProperty(Ki)&&Tn(Vi,Ki)<0&&(t.prototype[Ki]=function(t){return function(){return t.apply(this.doc,arguments)}}(ji.prototype[Ki]));bn(ji),t.e_stop=ln,t.e_preventDefault=rn,t.e_stopPropagation=sn;var Gi,_i=0;t.on=dn,t.off=hn,t.signal=fn;var qi=30,Yi=t.Pass={toString:function(){return"CodeMirror.Pass"}};yn.prototype={set:function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)}},t.countColumn=Cn;var Xi=[""],Qi=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Zi=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\u1DC0–\u1DFF\u20D0–\u20FF\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff\uFE20–\uFE2F]/;t.replaceGetRect=function(t){$n=t};var Ji=function(){if(Zn)return!1;var t=In("div");return"draggable"in t||"dragDrop"in t}();Yn?Pn=function(t,e){return 36==t.charCodeAt(e-1)&&39==t.charCodeAt(e)}:oi&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?Pn=function(t,e){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(t.slice(e-1,e+1))}:ti&&/Chrome\/(?:29|[3-9]\d|\d\d\d)\./.test(navigator.userAgent)?Pn=function(t,e){var n=t.charCodeAt(e-1);return n>=8208&&8212>=n}:ti&&(Pn=function(t,e){if(e>1&&45==t.charCodeAt(e-1)){if(/\w/.test(t.charAt(e-2))&&/[^\-?\.]/.test(t.charAt(e)))return!0;if(e>2&&/[\d\.,]/.test(t.charAt(e-2))&&/[\d\.,]/.test(t.charAt(e)))return!1}return/[~!#%&*)=+}\]\\|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|…[\w~`@#$%\^&*(_=+{[><]/.test(t.slice(e-1,e+1))});var to,eo,no=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],i=t.length;i>=e;){var o=t.indexOf("\n",e);-1==o&&(o=t.length);var r=t.slice(e,"\r"==t.charAt(o-1)?o-1:o),s=r.indexOf("\r");-1!=s?(n.push(r.slice(0,s)),e+=s+1):(n.push(r),e=o+1)}return n}:function(t){return t.split(/\r\n?|\n/)};t.splitLines=no;var io=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},oo=function(){var t=In("div");return"oncopy"in t||(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy)}(),ro={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};t.keyNames=ro,function(){for(var t=0;10>t;t++)ro[t+48]=String(t);for(t=65;90>=t;t++)ro[t]=String.fromCharCode(t);for(t=1;12>=t;t++)ro[t+111]=ro[t+63235]="F"+t}();var so,ao=function(){function t(t){return 255>=t?e.charAt(t):t>=1424&&1524>=t?"R":t>=1536&&1791>=t?n.charAt(t-1536):t>=1792&&2220>=t?"r":"L"}var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",n="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,r=/[LRr]/,s=/[Lb1n]/,a=/[1n]/,l="L";return function(e){if(!i.test(e))return!1;for(var n=e.length,c=[],u=0;n>u;++u)c.push(g=t(e.charCodeAt(u)));u=0;for(var d=l;n>u;++u){"m"==(g=c[u])?c[u]=d:d=g}u=0;for(var h=l;n>u;++u){"1"==(g=c[u])&&"r"==h?c[u]="n":r.test(g)&&(h=g,"r"==g&&(c[u]="R"))}for(u=1,d=c[0];n-1>u;++u){"+"==(g=c[u])&&"1"==d&&"1"==c[u+1]?c[u]="1":","!=g||d!=c[u+1]||"1"!=d&&"n"!=d||(c[u]=d),d=g}for(u=0;n>u;++u){if(","==(g=c[u]))c[u]="N";else if("%"==g){for(var f=u+1;n>f&&"%"==c[f];++f);for(var p=u&&"!"==c[u-1]||n-1>f&&"1"==c[f]?"1":"N",m=u;f>m;++m)c[m]=p;u=f-1}}for(u=0,h=l;n>u;++u){var g=c[u];"L"==h&&"1"==g?c[u]="L":r.test(g)&&(h=g)}for(u=0;n>u;++u)if(o.test(c[u])){for(f=u+1;n>f&&o.test(c[f]);++f);var v="L"==(u?c[u-1]:l),b="L"==(n-1>f?c[f]:l);for(p=v||b?"L":"R",m=u;f>m;++m)c[m]=p;u=f-1}var y,C=[];for(u=0;n>u;)if(s.test(c[u])){var w=u;for(++u;n>u&&s.test(c[u]);++u);C.push({from:w,to:u,level:0})}else{var k=u,x=C.length;for(++u;n>u&&"L"!=c[u];++u);for(m=k;u>m;)if(a.test(c[m])){m>k&&C.splice(x,0,{from:k,to:m,level:1});var T=m;for(++m;u>m&&a.test(c[m]);++m);C.splice(x,0,{from:T,to:m,level:2}),k=m}else++m;u>k&&C.splice(x,0,{from:k,to:u,level:1})}return 1==C[0].level&&(y=e.match(/^\s+/))&&(C[0].from=y[0].length,C.unshift({from:0,to:y[0].length,level:0})),1==kn(C).level&&(y=e.match(/\s+$/))&&(kn(C).to-=y[0].length,C.push({from:n-y[0].length,to:n,level:0})),C[0].level!=kn(C).level&&C.push({from:n,to:n,level:C[0].level}),C}}();return t.version="3.20.0",t}(),CodeMirror.defineMode("xml",(function(t,e){function n(t,e){function n(n){return e.tokenize=n,n(t,e)}var o=t.next();if("<"==o){if(t.eat("!"))return t.eat("[")?t.match("CDATA[")?n(r("atom","]]>")):null:t.match("--")?n(r("comment","--\x3e")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),n(s(1))):null;if(t.eat("?"))return t.eatWhile(/[\w\._\-]/),e.tokenize=r("meta","?>"),"meta";var a,l=t.eat("/");for(g="";a=t.eat(/[^\s\u00a0=<>\"\'\/?]/);)g+=a;return g?(v=l?"closeTag":"openTag",e.tokenize=i,"tag"):"tag error"}return"&"==o?(t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"))?"atom":"error":(t.eatWhile(/[^&<]/),null)}function i(t,e){var i=t.next();if(">"==i||"/"==i&&t.eat(">"))return e.tokenize=n,v=">"==i?"endTag":"selfcloseTag","tag";if("="==i)return v="equals",null;if("<"==i){e.tokenize=n;var r=e.tokenize(t,e);return r?r+" error":"error"}return/[\'\"]/.test(i)?(e.tokenize=o(i),e.stringStartCol=t.column(),e.tokenize(t,e)):(t.eatWhile(/[^\s\u00a0=<>\"\']/),"word")}function o(t){var e=function(e,n){for(;!e.eol();)if(e.next()==t){n.tokenize=i;break}return"string"};return e.isInAttribute=!0,e}function r(t,e){return function(i,o){for(;!i.eol();){if(i.match(e)){o.tokenize=n;break}i.next()}return t}}function s(t){return function(e,i){for(var o;null!=(o=e.next());){if("<"==o)return i.tokenize=s(t+1),i.tokenize(e,i);if(">"==o){if(1==t){i.tokenize=n;break}return i.tokenize=s(t-1),i.tokenize(e,i)}}return"meta"}}function a(){for(var t=arguments.length-1;t>=0;t--)b.cc.push(arguments[t])}function l(){return a.apply(null,arguments),!0}function c(){b.context&&(b.context=b.context.prev)}function u(t){if("openTag"==t)return b.tagName=g,b.tagStart=y.column(),l(h,function(t){return function(e){var n=b.tagName;return b.tagName=b.tagStart=null,"selfcloseTag"==e||"endTag"==e&&T.autoSelfClosers.hasOwnProperty(n.toLowerCase())?(d(n.toLowerCase()),l()):"endTag"==e?(d(n.toLowerCase()),function(t,e){var n=T.doNotIndent.hasOwnProperty(t)||b.context&&b.context.noIndent;b.context={prev:b.context,tagName:t,indent:b.indented,startOfLine:e,noIndent:n}}(n,t),l()):l()}}(b.startOfLine));if("closeTag"==t){var e=!1;return b.context?b.context.tagName!=g&&(T.implicitlyClosed.hasOwnProperty(b.context.tagName.toLowerCase())&&c(),e=!b.context||b.context.tagName!=g):e=!0,e&&(C="error"),l(function(t){return function(e){return t&&(C="error"),"endTag"==e?(c(),l()):(C="error",l(arguments.callee))}}(e))}return l()}function d(t){for(var e;;){if(!b.context)return;if(e=b.context.tagName.toLowerCase(),!T.contextGrabbers.hasOwnProperty(e)||!T.contextGrabbers[e].hasOwnProperty(t))return;c()}}function h(t){return"word"==t?(C="attribute",l(f,h)):"endTag"==t||"selfcloseTag"==t?a():(C="error",l(h))}function f(t){if("equals"==t)return l(p,h);if(T.allowMissing){if("word"==t)return C="attribute",l(f,h)}else C="error";return"endTag"==t||"selfcloseTag"==t?a():l()}function p(t){return"string"==t?l(m):"word"==t&&T.allowUnquoted?(C="string",l()):(C="error","endTag"==t||"selfCloseTag"==t?a():l())}function m(t){return"string"==t?l(m):a()}var g,v,b,y,C,w=t.indentUnit,k=e.multilineTagIndentFactor||1,x=e.multilineTagIndentPastTag||!0,T=e.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},S=e.alignCDATA;return{startState:function(){return{tokenize:n,cc:[],indented:0,startOfLine:!0,tagName:null,tagStart:null,context:null}},token:function(t,e){if(!e.tagName&&t.sol()&&(e.startOfLine=!0,e.indented=t.indentation()),t.eatSpace())return null;C=v=g=null;var n=e.tokenize(t,e);if(e.type=v,(n||v)&&"comment"!=n)for(b=e,y=t;;){if((e.cc.pop()||u)(v||n))break}return e.startOfLine=!1,C&&(n="error"==C?n+" error":C),n},indent:function(t,e,o){var r=t.context;if(t.tokenize.isInAttribute)return t.stringStartCol+1;if(t.tokenize!=i&&t.tokenize!=n||r&&r.noIndent)return o?o.match(/^(\s*)/)[0].length:0;if(t.tagName)return x?t.tagStart+t.tagName.length+2:t.tagStart+w*k;if(S&&/<!\[CDATA\[/.test(e))return 0;for(r&&/^<\//.test(e)&&(r=r.prev);r&&!r.startOfLine;)r=r.prev;return r?r.indent+w:0},electricChars:"/",blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:e.htmlMode?"html":"xml",helperType:e.htmlMode?"html":"xml"}})),CodeMirror.defineMIME("text/xml","xml"),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.mimeModes.hasOwnProperty("text/html")||CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0}),function(){function t(t,e,n,i){var o=t.getMode(),r=t.getLine(e);if(null==i&&(i=r.length),!o.innerMode)return[{from:n,to:i,mode:o}];var s=t.getTokenAt({line:e,ch:n}).state,a=CodeMirror.innerMode(o,s).mode,l=[],c=new CodeMirror.StringStream(r);for(c.pos=c.start=n;;){o.token(c,s);var u=CodeMirror.innerMode(o,s).mode;if(u!=a){var d=c.start;"xml"==a.name&&">"==r.charAt(c.pos-1)&&(d=c.pos),l.push({from:n,to:d,mode:a}),n=d,a=u}if(c.pos>=i)break;c.start=c.pos}return i>n&&l.push({from:n,to:i,mode:a}),l}CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",wordWrapChars:[";","\\{","\\}"],autoFormatLineBreaks:function(t){return t.replace(new RegExp("(;|\\{|\\})([^\r\n])","g"),"$1\n$2")}}),CodeMirror.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",wordWrapChars:[";","\\{","\\}"],autoFormatLineBreaks:function(t){var e=0,n=this.jsonMode?function(t){return t.replace(/([,{])/g,"$1\n").replace(/}/g,"\n}")}:function(t){return t.replace(/(;|\{|\})([^\r\n;])/g,"$1\n$2")},i=function(t){for(var e=[/for\s*?\((.*?)\)/,/\"(.*?)(\"|$)/,/\'(.*?)(\'|$)/,/\/\*(.*?)(\*\/|$)/,/\/\/.*/],n=[],i=0;i<e.length;i++)for(var o=0;o<t.length;){var r=t.substr(o).match(e[i]);if(null==r)break;n.push({start:o+r.index,end:o+r.index+r[0].length}),o+=r.index+Math.max(1,r[0].length)}return n.sort((function(t,e){return t.start-e.start})),n}(t),o="";if(null!=i){for(var r=0;r<i.length;r++)i[r].start>e&&(o+=n(t.substring(e,i[r].start)),e=i[r].start),i[r].start<=e&&i[r].end>=e&&(o+=t.substring(e,i[r].end),e=i[r].end);e<t.length&&(o+=n(t.substr(e)))}else o=n(t);return o.replace(/^\n*|\n*$/,"")}}),CodeMirror.extendMode("xml",{commentStart:"\x3c!--",commentEnd:"--\x3e",wordWrapChars:[">"],autoFormatLineBreaks:function(t){for(var e=t.split("\n"),n=new RegExp("(^\\s*?<|^[^<]*?)(.+)(>\\s*?$|[^>]*?$)"),i=new RegExp("<","g"),o=new RegExp("(>)([^\r\n])","g"),r=0;r<e.length;r++){var s=e[r].match(n);null!=s&&s.length>3&&(e[r]=s[1]+s[2].replace(i,"\n$&").replace(o,"$1\n$2")+s[3])}return e.join("\n")}}),CodeMirror.defineExtension("commentRange",(function(t,e,n){var i=function(t,e){return CodeMirror.innerMode(t.getMode(),t.getTokenAt(e).state).mode}(this,e),o=this;this.operation((function(){if(t)o.replaceRange(i.commentEnd,n),o.replaceRange(i.commentStart,e),e.line==n.line&&e.ch==n.ch&&o.setCursor(e.line,e.ch+i.commentStart.length);else{var r=o.getRange(e,n),s=r.indexOf(i.commentStart),a=r.lastIndexOf(i.commentEnd);s>-1&&a>-1&&a>s&&(r=r.substr(0,s)+r.substring(s+i.commentStart.length,a)+r.substr(a+i.commentEnd.length)),o.replaceRange(r,e,n)}}))})),CodeMirror.defineExtension("autoIndentRange",(function(t,e){var n=this;this.operation((function(){for(var i=t.line;i<=e.line;i++)n.indentLine(i,"smart")}))})),CodeMirror.defineExtension("autoFormatRange",(function(e,n){var i=this;i.operation((function(){for(var o=e.line,r=n.line;r>=o;++o){for(var s={line:o,ch:o==e.line?e.ch:0},a={line:o,ch:o==r?n.ch:null},l=t(i,o,s.ch,a.ch),c="",u=i.getRange(s,a),d=0;d<l.length;++d){var h=l.length>1?u.slice(l[d].from,l[d].to):u;c&&(c+="\n"),c+=l[d].mode.autoFormatLineBreaks?l[d].mode.autoFormatLineBreaks(h):u}if(c!=u){for(var f=0,p=c.indexOf("\n");-1!=p;p=c.indexOf("\n",p+1),++f);i.replaceRange(c,s,a),o+=f,r+=f}}for(o=e.line+1;r>=o;++o)i.indentLine(o,"smart");i.setSelection(e,i.getCursor(!1))}))}))}(),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(window.jQuery)}((function(t){"use strict";var e,n=function(){var e=0;return{eq:function(t){return function(e){return t===e}},eq2:function(t,e){return t===e},peq2:function(t){return function(e,n){return e[t]===n[t]}},ok:function(){return!0},fail:function(){return!1},self:function(t){return t},not:function(t){return function(){return!t.apply(t,arguments)}},and:function(t,e){return function(n){return t(n)&&e(n)}},uniqueId:function(t){var n=++e+"";return t?t+n:n},rect2bnd:function(e){var n=t(document);return{top:e.top+n.scrollTop(),left:e.left+n.scrollLeft(),width:e.right-e.left,height:e.bottom-e.top}},invertObject:function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e},namespaceToCamel:function(t,e){return(e=e||"")+t.split(".").map((function(t){return t.substring(0,1).toUpperCase()+t.substring(1)})).join("")}}}(),i=function(){var e=function(t){return t[0]},i=function(t){return t[t.length-1]},o=function(t){return t.slice(1)},r=function(e,n){return t.inArray(n,e)},s=function(t,e){return-1!==r(t,e)};return{head:e,last:i,initial:function(t){return t.slice(0,t.length-1)},tail:o,prev:function(t,e){var n=r(t,e);return-1===n?null:t[n-1]},next:function(t,e){var n=r(t,e);return-1===n?null:t[n+1]},find:function(t,e){for(var n=0,i=t.length;i>n;n++){var o=t[n];if(e(o))return o}},contains:s,all:function(t,e){for(var n=0,i=t.length;i>n;n++)if(!e(t[n]))return!1;return!0},sum:function(t,e){return e=e||n.self,t.reduce((function(t,n){return t+e(n)}),0)},from:function(t){for(var e=[],n=-1,i=t.length;++n<i;)e[n]=t[n];return e},isEmpty:function(t){return!t||!t.length},clusterBy:function(t,n){return t.length?o(t).reduce((function(t,e){var o=i(t);return n(i(o),e)?o[o.length]=e:t[t.length]=[e],t}),[[e(t)]]):[]},compact:function(t){for(var e=[],n=0,i=t.length;i>n;n++)t[n]&&e.push(t[n]);return e},unique:function(t){for(var e=[],n=0,i=t.length;i>n;n++)s(e,t[n])||e.push(t[n]);return e}}}(),o="function"==typeof define&&define.amd,r=navigator.userAgent,s=/MSIE|Trident/i.test(r);if(s){var a=/MSIE (\d+[.]\d+)/.exec(r);a&&(e=parseFloat(a[1])),(a=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(r))&&(e=parseFloat(a[1]))}var l={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:s,isFF:/firefox/i.test(r),isWebkit:/webkit/i.test(r),isSafari:/safari/i.test(r),browserVersion:e,jqueryVersion:parseFloat(t.fn.jquery),isSupportAmd:o,hasCodeMirror:o?require.specified("codemirror"):!!window.CodeMirror,isFontInstalled:function(e){var n="Comic Sans MS"===e?"Courier New":"Comic Sans MS",i=t("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),o=i.css("fontFamily",n).width(),r=i.css("fontFamily",e+","+n).width();return i.remove(),o!==r},isW3CRangeSupport:!!document.createRange},c=String.fromCharCode(160),u=function(){var e=function(e){return e&&t(e).hasClass("note-editable")},o=function(t){return t=t.toUpperCase(),function(e){return e&&e.nodeName.toUpperCase()===t}},r=function(t){return t&&3===t.nodeType},s=function(t){return t&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(t.nodeName.toUpperCase())},a=function(t){return!e(t)&&(t&&/^DIV|^P|^LI|^H[1-7]/.test(t.nodeName.toUpperCase()))},d=o("PRE"),h=o("LI"),f=o("TABLE"),p=function(t){return!(y(t)||m(t)||g(t)||a(t)||f(t)||b(t))},m=function(t){return t&&/^UL|^OL/.test(t.nodeName.toUpperCase())},g=o("HR"),v=function(t){return t&&/^TD|^TH/.test(t.nodeName.toUpperCase())},b=o("BLOCKQUOTE"),y=function(t){return v(t)||b(t)||e(t)},C=o("A"),w=o("BODY"),k=l.isMSIE&&l.browserVersion<11?"&nbsp;":"<br>",x=function(t){return r(t)?t.nodeValue.length:t.childNodes.length},T=function(t){var e=x(t);return 0===e||(!r(t)&&1===e&&t.innerHTML===k||!(!i.all(t.childNodes,r)||""!==t.innerHTML))},S=function(t){s(t)||x(t)||(t.innerHTML=k)},L=function(t,n){for(;t;){if(n(t))return t;if(e(t))break;t=t.parentNode}return null},N=function(t,i){i=i||n.fail;var o=[];return L(t,(function(t){return e(t)||o.push(t),i(t)})),o},E=function(t,e){e=e||n.fail;for(var i=[];t&&!e(t);)i.push(t),t=t.nextSibling;return i},A=function(t,e){var n=e.nextSibling,i=e.parentNode;return n?i.insertBefore(t,n):i.appendChild(t),t},M=function(e,n){return t.each(n,(function(t,n){e.appendChild(n)})),e},I=function(t){return 0===t.offset},D=function(t){return t.offset===x(t.node)},H=function(t){return I(t)||D(t)},R=function(t,e){for(;t&&t!==e;){if(0!==P(t))return!1;t=t.parentNode}return!0},$=function(t,e){for(;t&&t!==e;){if(P(t)!==x(t.parentNode)-1)return!1;t=t.parentNode}return!0
},P=function(t){for(var e=0;t=t.previousSibling;)e+=1;return e},O=function(t){return!!(t&&t.childNodes&&t.childNodes.length)},F=function(t,n){var i,o;if(0===t.offset){if(e(t.node))return null;i=t.node.parentNode,o=P(t.node)}else O(t.node)?(i=t.node.childNodes[t.offset-1],o=x(i)):(i=t.node,o=n?0:t.offset-1);return{node:i,offset:o}},z=function(t,n){var i,o;if(x(t.node)===t.offset){if(e(t.node))return null;i=t.node.parentNode,o=P(t.node)+1}else O(t.node)?(i=t.node.childNodes[t.offset],o=0):(i=t.node,o=n?x(t.node):t.offset+1);return{node:i,offset:o}},B=function(t,e){return t.node===e.node&&t.offset===e.offset},W=function(t,e){var n=e&&e.isSkipPaddingBlankHTML,i=e&&e.isNotSplitEdgePoint;if(H(t)&&(r(t.node)||i)){if(I(t))return t.node;if(D(t))return t.node.nextSibling}if(r(t.node))return t.node.splitText(t.offset);var o=t.node.childNodes[t.offset],s=A(t.node.cloneNode(!1),t.node);return M(s,E(o)),n||(S(t.node),S(s)),s},U=function(t,e,i){var o=N(e.node,n.eq(t));return o.length?1===o.length?W(e,i):o.reduce((function(t,n){return t===e.node&&(t=W(e,i)),W({node:n,offset:t?u.position(t):x(n)},i)})):null},j=function(t){return document.createElement(t)},V=function(t,e){if(t&&t.parentNode){if(t.removeNode)return t.removeNode(e);var n=t.parentNode;if(!e){var i,o,r=[];for(i=0,o=t.childNodes.length;o>i;i++)r.push(t.childNodes[i]);for(i=0,o=r.length;o>i;i++)n.insertBefore(r[i],t)}n.removeChild(t)}},K=o("TEXTAREA"),G=function(t,e){var n=K(t[0])?t.val():t.html();return e?n.replace(/[\n\r]/g,""):n};return{NBSP_CHAR:c,ZERO_WIDTH_NBSP_CHAR:"\ufeff",blank:k,emptyPara:"<p>"+k+"</p>",makePredByNodeName:o,isEditable:e,isControlSizing:function(e){return e&&t(e).hasClass("note-control-sizing")},isText:r,isElement:function(t){return t&&1===t.nodeType},isVoid:s,isPara:a,isPurePara:function(t){return a(t)&&!h(t)},isHeading:function(t){return t&&/^H[1-7]/.test(t.nodeName.toUpperCase())},isInline:p,isBlock:n.not(p),isBodyInline:function(t){return p(t)&&!L(t,a)},isBody:w,isParaInline:function(t){return p(t)&&!!L(t,a)},isPre:d,isList:m,isTable:f,isCell:v,isBlockquote:b,isBodyContainer:y,isAnchor:C,isDiv:o("DIV"),isLi:h,isBR:o("BR"),isSpan:o("SPAN"),isB:o("B"),isU:o("U"),isS:o("S"),isI:o("I"),isImg:o("IMG"),isTextarea:K,isEmpty:T,isEmptyAnchor:n.and(C,T),isClosestSibling:function(t,e){return t.nextSibling===e||t.previousSibling===e},withClosestSiblings:function(t,e){e=e||n.ok;var i=[];return t.previousSibling&&e(t.previousSibling)&&i.push(t.previousSibling),i.push(t),t.nextSibling&&e(t.nextSibling)&&i.push(t.nextSibling),i},nodeLength:x,isLeftEdgePoint:I,isRightEdgePoint:D,isEdgePoint:H,isLeftEdgeOf:R,isRightEdgeOf:$,isLeftEdgePointOf:function(t,e){return I(t)&&R(t.node,e)},isRightEdgePointOf:function(t,e){return D(t)&&$(t.node,e)},prevPoint:F,nextPoint:z,isSamePoint:B,isVisiblePoint:function(t){if(r(t.node)||!O(t.node)||T(t.node))return!0;var e=t.node.childNodes[t.offset-1],n=t.node.childNodes[t.offset];return!(e&&!s(e)||n&&!s(n))},prevPointUntil:function(t,e){for(;t;){if(e(t))return t;t=F(t)}return null},nextPointUntil:function(t,e){for(;t;){if(e(t))return t;t=z(t)}return null},isCharPoint:function(t){if(!r(t.node))return!1;var e=t.node.nodeValue.charAt(t.offset-1);return e&&" "!==e&&e!==c},walkPoint:function(t,e,n,i){for(var o=t;o&&(n(o),!B(o,e));){var r=i&&t.node!==o.node&&e.node!==o.node;o=z(o,r)}},ancestor:L,singleChildAncestor:function(t,n){for(t=t.parentNode;t&&1===x(t);){if(n(t))return t;if(e(t))break;t=t.parentNode}return null},listAncestor:N,lastAncestor:function(t,e){var n=N(t);return i.last(n.filter(e))},listNext:E,listPrev:function(t,e){e=e||n.fail;for(var i=[];t&&!e(t);)i.push(t),t=t.previousSibling;return i},listDescendant:function(t,e){var i=[];return e=e||n.ok,function n(o){t!==o&&e(o)&&i.push(o);for(var r=0,s=o.childNodes.length;s>r;r++)n(o.childNodes[r])}(t),i},commonAncestor:function(e,n){for(var i=N(e),o=n;o;o=o.parentNode)if(t.inArray(o,i)>-1)return o;return null},wrap:function(e,n){var i=e.parentNode,o=t("<"+n+">")[0];return i.insertBefore(o,e),o.appendChild(e),o},insertAfter:A,appendChildNodes:M,position:P,hasChildren:O,makeOffsetPath:function(t,e){return N(e,n.eq(t)).map(P).reverse()},fromOffsetPath:function(t,e){for(var n=t,i=0,o=e.length;o>i;i++)n=n.childNodes.length<=e[i]?n.childNodes[n.childNodes.length-1]:n.childNodes[e[i]];return n},splitTree:U,splitPoint:function(t,e){var n,o,r=e?a:y,s=N(t.node,r),l=i.last(s)||t.node;r(l)?(n=s[s.length-2],o=l):o=(n=l).parentNode;var c=n&&U(n,t,{isSkipPaddingBlankHTML:e,isNotSplitEdgePoint:e});return c||o!==t.node||(c=t.node.childNodes[t.offset]),{rightNode:c,container:o}},create:j,createText:function(t){return document.createTextNode(t)},remove:V,removeWhile:function(t,n){for(;t&&!e(t)&&n(t);){var i=t.parentNode;V(t),t=i}},replace:function(t,e){if(t.nodeName.toUpperCase()===e.toUpperCase())return t;var n=j(e);return t.style.cssText&&(n.style.cssText=t.style.cssText),M(n,i.from(t.childNodes)),A(n,t),V(t),n},html:function(e,n){var i=G(e);if(n){i=i.replace(/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g,(function(t,e,n){n=n.toUpperCase();var i=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(n)&&!!e,o=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(n);return t+(i||o?"\n":"")})),i=t.trim(i)}return i},value:G,posFromPlaceholder:function(e){var n=t(e),i=n.offset(),o=n.outerHeight(!0);return{left:i.left,top:i.top+o}},attachEvents:function(t,e){Object.keys(e).forEach((function(n){t.on(n,e[n])}))},detachEvents:function(t,e){Object.keys(e).forEach((function(n){t.off(n,e[n])}))}}}(),d=function(e,o){var r=this,s=t.summernote.ui;return this.memos={},this.modules={},this.layoutInfo={},this.options=o,this.initialize=function(){return this.layoutInfo=s.createLayout(e,o),this._initialize(),e.hide(),this},this.destroy=function(){this._destroy(),e.removeData("summernote"),s.removeLayout(e,this.layoutInfo)},this.reset=function(){this.code(u.emptyPara),this._destroy(),this._initialize()},this._initialize=function(){var e=t.extend({},this.options.buttons);Object.keys(e).forEach((function(t){r.memo("button."+t,e[t])}));var n=t.extend({},this.options.modules,t.summernote.plugins||{});Object.keys(n).forEach((function(t){r.module(t,n[t],!0)})),Object.keys(this.modules).forEach((function(t){r.initializeModule(t)}))},this._destroy=function(){Object.keys(this.modules).reverse().forEach((function(t){r.removeModule(t)})),Object.keys(this.memos).forEach((function(t){r.removeMemo(t)}))},this.code=function(t){var n=this.invoke("codeview.isActivated");return void 0===t?(this.invoke("codeview.sync"),n?this.layoutInfo.codable.val():this.layoutInfo.editable.html()):(n?this.layoutInfo.codable.val(t):this.layoutInfo.editable.html(t),e.val(t),void this.triggerEvent("change",t))},this.isDisabled=function(){return"false"===this.layoutInfo.editable.attr("contenteditable")},this.enable=function(){this.layoutInfo.editable.attr("contenteditable",!0),this.invoke("toolbar.activate",!0)},this.disable=function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate"),this.layoutInfo.editable.attr("contenteditable",!1),this.invoke("toolbar.deactivate",!0)},this.triggerEvent=function(){var t=i.head(arguments),o=i.tail(i.from(arguments)),r=this.options.callbacks[n.namespaceToCamel(t,"on")];r&&r.apply(e[0],o),e.trigger("summernote."+t,o)},this.initializeModule=function(t){var i=this.modules[t];i.shouldInitialize=i.shouldInitialize||n.ok,i.shouldInitialize()&&(i.initialize&&i.initialize(),i.events&&u.attachEvents(e,i.events))},this.module=function(t,e,n){return 1===arguments.length?this.modules[t]:(this.modules[t]=new e(this),void(n||this.initializeModule(t)))},this.removeModule=function(t){var n=this.modules[t];n.shouldInitialize()&&(n.events&&u.detachEvents(e,n.events),n.destroy&&n.destroy()),delete this.modules[t]},this.memo=function(t,e){return 1===arguments.length?this.memos[t]:void(this.memos[t]=e)},this.removeMemo=function(t){this.memos[t]&&this.memos[t].destroy&&this.memos[t].destroy(),delete this.memos[t]},this.createInvokeHandler=function(e,n){return function(i){i.preventDefault(),r.invoke(e,n||t(i.target).data("value")||t(i.currentTarget).data("value"))}},this.invoke=function(){var t=i.head(arguments),e=i.tail(i.from(arguments)),n=t.split("."),o=n.length>1,r=o&&i.head(n),s=o?i.last(n):i.head(n),a=this.modules[r||"editor"];return!r&&this[s]?this[s].apply(this,e):a&&a[s]&&a.shouldInitialize()?a[s].apply(a,e):void 0},this.initialize()};t.summernote=t.summernote||{lang:{}},t.fn.extend({summernote:function(){var e=t.type(i.head(arguments)),n="string"===e,o="object"===e,r=o?i.head(arguments):{};(r=t.extend({},t.summernote.options,r)).langInfo=t.extend(!0,{},t.summernote.lang["en-US"],t.summernote.lang[r.lang]),this.each((function(e,n){var i=t(n);if(!i.data("summernote")){var o=new d(i,r);i.data("summernote",o),i.data("summernote").triggerEvent("init",o.layoutInfo)}}));var s=this.first();if(s.length){var a=s.data("summernote");if(n)return a.invoke.apply(a,i.from(arguments));r.focus&&a.invoke("editor.focus")}return this}});var h=function(e,n,i,o){this.render=function(r){var s=t(e);if(i&&i.contents&&s.html(i.contents),i&&i.className&&s.addClass(i.className),i&&i.data&&t.each(i.data,(function(t,e){s.attr("data-"+t,e)})),i&&i.click&&s.on("click",i.click),n){var a=s.find(".note-children-container");n.forEach((function(t){t.render(a.length?a:s)}))}return o&&o(s,i),i&&i.callback&&i.callback(s),r&&r.append(s),s}},f=function(e,n){return function(){var i=t.isArray(arguments[0])?arguments[0]:[],o="object"==typeof arguments[1]?arguments[1]:arguments[0];return o&&o.children&&(i=o.children),new h(e,i,o,n)}},p=f('<div class="note-editor note-frame panel panel-default"/>'),m=f('<div class="note-toolbar panel-heading"/>'),g=f('<div class="note-editing-area"/>'),v=f('<textarea class="note-codable"/>'),b=f('<div class="note-editable panel-body" contentEditable="true"/>'),y=f(['<div class="note-statusbar">','  <div class="note-resizebar">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join("")),C=f('<div class="note-editor"/>'),w=f('<div class="note-editable" contentEditable="true"/>'),k=f('<div class="note-btn-group btn-group">'),x=f('<button type="button" class="note-btn btn btn-default btn-sm">',(function(t,e){})),T=f('<div class="dropdown-menu">',(function(e,n){var i=t.isArray(n.items)?n.items.map((function(t){return'<li><a href="#" data-value="'+t+'">'+t+"</a></li>"})).join(""):n.items;e.html(i)})),S=f('<div class="dropdown-menu note-check">',(function(e,n){var i=t.isArray(n.items)?n.items.map((function(t){return'<li><a href="#" data-value="'+t+'">'+A(n.checkClassName)+" "+t+"</a></li>"})).join(""):n.items;e.html(i)})),L=f('<div class="note-color-palette"/>',(function(t,e){for(var n=[],i=0,o=e.colors.length;o>i;i++){for(var r=e.eventName,s=e.colors[i],a=[],l=0,c=s.length;c>l;l++){var u=s[l];a.push(['<button type="button" class="note-color-btn"','style="background-color:',u,'" ','data-event="',r,'" ','data-value="',u,'" ','title="',u,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}n.push('<div class="note-color-row">'+a.join("")+"</div>")}t.html(n.join("")),t.find(".note-color-btn").tooltip({container:"body",trigger:"hover",placement:"bottom"})})),N=f('<div class="modal" aria-hidden="false"/>',(function(t,e){t.html(['<div class="modal-dialog">','  <div class="modal-content">',e.title?'    <div class="modal-header">      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>      <h4 class="modal-title">'+e.title+"</h4>    </div>":"",'    <div class="modal-body">'+e.body+"</div>",e.footer?'    <div class="modal-footer">'+e.footer+"</div>":"","  </div>","</div>"].join(""))})),E=f(['<div class="note-popover popover bottom in">','  <div class="arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join("")),A=function(t,e){return"<"+(e=e||"i")+' class="'+t+'"/>'},M={editor:p,toolbar:m,editingArea:g,codable:v,editable:b,statusbar:y,airEditor:C,airEditable:w,buttonGroup:k,button:x,dropdown:T,dropdownCheck:S,palette:L,dialog:N,popover:E,icon:A,toggleBtn:function(t,e){t.toggleClass("disabled",!e),t.attr("disabled",!e)},toggleBtnActive:function(t,e){t.toggleClass("active",e)},onDialogShown:function(t,e){t.one("shown.bs.modal",e)},onDialogHidden:function(t,e){t.one("hidden.bs.modal",e)},showDialog:function(t){t.modal("show")},hideDialog:function(t){t.modal("hide")},createLayout:function(t,e){var n=(e.airMode?M.airEditor([M.editingArea([M.airEditable()])]):M.editor([M.toolbar(),M.editingArea([M.codable(),M.editable()]),M.statusbar()])).render();return n.insertAfter(t),{note:t,editor:n,toolbar:n.find(".note-toolbar"),editingArea:n.find(".note-editing-area"),editable:n.find(".note-editable"),codable:n.find(".note-codable"),statusbar:n.find(".note-statusbar")}},removeLayout:function(t,e){t.html(e.editable.html()),e.editor.remove(),t.show()}};t.extend(t.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var I,D=function(){var t={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(e){return i.contains([t.BACKSPACE,t.TAB,t.ENTER,t.SPACe],e)},isMove:function(e){return i.contains([t.LEFT,t.UP,t.RIGHT,t.DOWN],e)},nameFromCode:n.invertObject(t),code:t}}(),H=function(){var e=function(t,e){var n,o,r=t.parentElement(),s=document.body.createTextRange(),a=i.from(r.childNodes);for(n=0;n<a.length;n++)if(!u.isText(a[n])){if(s.moveToElementText(a[n]),s.compareEndPoints("StartToStart",t)>=0)break;o=a[n]}if(0!==n&&u.isText(a[n-1])){var l=document.body.createTextRange(),c=null;l.moveToElementText(o||r),l.collapse(!o),c=o?o.nextSibling:r.firstChild;var d=t.duplicate();d.setEndPoint("StartToStart",l);for(var h=d.text.replace(/[\r\n]/g,"").length;h>c.nodeValue.length&&c.nextSibling;)h-=c.nodeValue.length,c=c.nextSibling;c.nodeValue,e&&c.nextSibling&&u.isText(c.nextSibling)&&h===c.nodeValue.length&&(h-=c.nodeValue.length,c=c.nextSibling),r=c,n=h}return{cont:r,offset:n}},o=function(t){var e=function(t,o){var r,s;if(u.isText(t)){var a=u.listPrev(t,n.not(u.isText)),l=i.last(a).previousSibling;r=l||t.parentNode,o+=i.sum(i.tail(a),u.nodeLength),s=!l}else{if(r=t.childNodes[o]||t,u.isText(r))return e(r,0);o=0,s=!1}return{node:r,collapseToStart:s,offset:o}},o=document.body.createTextRange(),r=e(t.node,t.offset);return o.moveToElementText(r.node),o.collapse(r.collapseToStart),o.moveStart("character",r.offset),o},r=function(e,s,a,c){this.sc=e,this.so=s,this.ec=a,this.eo=c;var d=function(){if(l.isW3CRangeSupport){var t=document.createRange();return t.setStart(e,s),t.setEnd(a,c),t}var n=o({node:e,offset:s});return n.setEndPoint("EndToEnd",o({node:a,offset:c})),n};this.getPoints=function(){return{sc:e,so:s,ec:a,eo:c}},this.getStartPoint=function(){return{node:e,offset:s}},this.getEndPoint=function(){return{node:a,offset:c}},this.select=function(){var t=d();if(l.isW3CRangeSupport){var e=document.getSelection();e.rangeCount>0&&e.removeAllRanges(),e.addRange(t)}else t.select();return this},this.scrollIntoView=function(t){return t[0].scrollTop+t.height()<this.sc.offsetTop&&(t[0].scrollTop+=Math.abs(t[0].scrollTop+t.height()-this.sc.offsetTop)),this},this.normalize=function(){var t=function(t,e){if(u.isVisiblePoint(t)&&!u.isEdgePoint(t)||u.isVisiblePoint(t)&&u.isRightEdgePoint(t)&&!e||u.isVisiblePoint(t)&&u.isLeftEdgePoint(t)&&e||u.isVisiblePoint(t)&&u.isBlock(t.node)&&u.isEmpty(t.node))return t;var n=u.ancestor(t.node,u.isBlock);if((u.isLeftEdgePointOf(t,n)||u.isVoid(u.prevPoint(t).node))&&!e||(u.isRightEdgePointOf(t,n)||u.isVoid(u.nextPoint(t).node))&&e){if(u.isVisiblePoint(t))return t;e=!e}return(e?u.nextPointUntil(u.nextPoint(t),u.isVisiblePoint):u.prevPointUntil(u.prevPoint(t),u.isVisiblePoint))||t},e=t(this.getEndPoint(),!1),n=this.isCollapsed()?e:t(this.getStartPoint(),!0);return new r(n.node,n.offset,e.node,e.offset)},this.nodes=function(t,e){t=t||n.ok;var o=e&&e.includeAncestor,r=e&&e.fullyContains,s=this.getStartPoint(),a=this.getEndPoint(),l=[],c=[];return u.walkPoint(s,a,(function(e){var n;u.isEditable(e.node)||(r?(u.isLeftEdgePoint(e)&&c.push(e.node),u.isRightEdgePoint(e)&&i.contains(c,e.node)&&(n=e.node)):n=o?u.ancestor(e.node,t):e.node,n&&t(n)&&l.push(n))}),!0),i.unique(l)},this.commonAncestor=function(){return u.commonAncestor(e,a)},this.expand=function(t){var n=u.ancestor(e,t),i=u.ancestor(a,t);if(!n&&!i)return new r(e,s,a,c);var o=this.getPoints();return n&&(o.sc=n,o.so=0),i&&(o.ec=i,o.eo=u.nodeLength(i)),new r(o.sc,o.so,o.ec,o.eo)},this.collapse=function(t){return t?new r(e,s,e,s):new r(a,c,a,c)},this.splitText=function(){var t=e===a,n=this.getPoints();return u.isText(a)&&!u.isEdgePoint(this.getEndPoint())&&a.splitText(c),u.isText(e)&&!u.isEdgePoint(this.getStartPoint())&&(n.sc=e.splitText(s),n.so=0,t&&(n.ec=n.sc,n.eo=c-s)),new r(n.sc,n.so,n.ec,n.eo)},this.deleteContents=function(){if(this.isCollapsed())return this;var e=this.splitText(),n=e.nodes(null,{fullyContains:!0}),o=u.prevPointUntil(e.getStartPoint(),(function(t){return!i.contains(n,t.node)})),s=[];return t.each(n,(function(t,e){var n=e.parentNode;o.node!==n&&1===u.nodeLength(n)&&s.push(n),u.remove(e,!1)})),t.each(s,(function(t,e){u.remove(e,!1)})),new r(o.node,o.offset,o.node,o.offset).normalize()};var h=function(t){return function(){var n=u.ancestor(e,t);return!!n&&n===u.ancestor(a,t)}};this.isOnEditable=h(u.isEditable),this.isOnList=h(u.isList),this.isOnAnchor=h(u.isAnchor),this.isOnCell=h(u.isCell),this.isLeftEdgeOf=function(t){if(!u.isLeftEdgePoint(this.getStartPoint()))return!1;var e=u.ancestor(this.sc,t);return e&&u.isLeftEdgeOf(this.sc,e)},this.isCollapsed=function(){return e===a&&s===c},this.wrapBodyInlineWithPara=function(){if(u.isBodyContainer(e)&&u.isEmpty(e))return e.innerHTML=u.emptyPara,new r(e.firstChild,0,e.firstChild,0);var t,o=this.normalize();if(u.isParaInline(e)||u.isPara(e))return o;if(u.isInline(o.sc)){var s=u.listAncestor(o.sc,n.not(u.isInline));t=i.last(s),u.isInline(t)||(t=s[s.length-2]||o.sc.childNodes[o.so])}else t=o.sc.childNodes[o.so>0?o.so-1:0];var a=u.listPrev(t,u.isParaInline).reverse();if((a=a.concat(u.listNext(t.nextSibling,u.isParaInline))).length){var l=u.wrap(i.head(a),"p");u.appendChildNodes(l,i.tail(a))}return this.normalize()},this.insertNode=function(t){var e=this.wrapBodyInlineWithPara().deleteContents(),n=u.splitPoint(e.getStartPoint(),u.isInline(t));return n.rightNode?n.rightNode.parentNode.insertBefore(t,n.rightNode):n.container.appendChild(t),t},this.pasteHTML=function(e){var n=t("<div></div>").html(e)[0],o=i.from(n.childNodes),r=this.wrapBodyInlineWithPara().deleteContents();return o.reverse().map((function(t){return r.insertNode(t)})).reverse()},this.toString=function(){var t=d();return l.isW3CRangeSupport?t.toString():t.text},this.getWordRange=function(t){var e=this.getEndPoint();if(!u.isCharPoint(e))return this;var n=u.prevPointUntil(e,(function(t){return!u.isCharPoint(t)}));return t&&(e=u.nextPointUntil(e,(function(t){return!u.isCharPoint(t)}))),new r(n.node,n.offset,e.node,e.offset)},this.bookmark=function(t){return{s:{path:u.makeOffsetPath(t,e),offset:s},e:{path:u.makeOffsetPath(t,a),offset:c}}},this.paraBookmark=function(t){return{s:{path:i.tail(u.makeOffsetPath(i.head(t),e)),offset:s},e:{path:i.tail(u.makeOffsetPath(i.last(t),a)),offset:c}}},this.getClientRects=function(){return d().getClientRects()}};return{create:function(t,n,i,o){if(arguments.length)2===arguments.length&&(i=t,o=n);else if(l.isW3CRangeSupport){var s=document.getSelection();if(!s||0===s.rangeCount)return null;if(u.isBody(s.anchorNode))return null;var a=s.getRangeAt(0);t=a.startContainer,n=a.startOffset,i=a.endContainer,o=a.endOffset}else{var c=document.selection.createRange(),d=c.duplicate();d.collapse(!1);var h=c;h.collapse(!0);var f=e(h,!0),p=e(d,!1);u.isText(f.node)&&u.isLeftEdgePoint(f)&&u.isTextNode(p.node)&&u.isRightEdgePoint(p)&&p.node.nextSibling===f.node&&(f=p),t=f.cont,n=f.offset,i=p.cont,o=p.offset}return new r(t,n,i,o)},createFromNode:function(t){var e=t,n=0,i=t,o=u.nodeLength(i);return u.isVoid(e)&&(n=u.listPrev(e).length-1,e=e.parentNode),u.isBR(i)?(o=u.listPrev(i).length-1,i=i.parentNode):u.isVoid(i)&&(o=u.listPrev(i).length,i=i.parentNode),this.create(e,n,i,o)},createFromNodeBefore:function(t){return this.createFromNode(t).collapse(!0)},createFromNodeAfter:function(t){return this.createFromNode(t).collapse()},createFromBookmark:function(t,e){var n=u.fromOffsetPath(t,e.s.path),i=e.s.offset,o=u.fromOffsetPath(t,e.e.path),s=e.e.offset;return new r(n,i,o,s)},createFromParaBookmark:function(t,e){var n=t.s.offset,o=t.e.offset,s=u.fromOffsetPath(i.head(e),t.s.path),a=u.fromOffsetPath(i.last(e),t.e.path);return new r(s,n,a,o)}}}(),R={readFileAsDataURL:function(e){return t.Deferred((function(n){t.extend(new FileReader,{onload:function(t){var e=t.target.result;n.resolve(e)},onerror:function(){n.reject(this)}}).readAsDataURL(e)})).promise()},createImage:function(e){return t.Deferred((function(n){var i=t("<img>");i.one("load",(function(){i.off("error abort"),n.resolve(i)})).one("error abort",(function(){i.off("load").detach(),n.reject(i)})).css({display:"none"}).appendTo(document.body).attr("src",e)})).promise()}},$=function(t){var e=[],n=-1,i=t[0],o=function(e){null!==e.contents&&t.html(e.contents),null!==e.bookmark&&H.createFromBookmark(i,e.bookmark).select()};this.rewind=function(){t.html()!==e[n].contents&&this.recordUndo(),o(e[n=0])},this.reset=function(){e=[],n=-1,t.html(""),this.recordUndo()},this.undo=function(){t.html()!==e[n].contents&&this.recordUndo(),n>0&&(n--,o(e[n]))},this.redo=function(){e.length-1>n&&(n++,o(e[n]))},this.recordUndo=function(){n++,e.length>n&&(e=e.slice(0,n)),e.push(function(){var e=H.create();return{contents:t.html(),bookmark:e?e.bookmark(i):{s:{path:[],offset:0},e:{path:[],offset:0}}}}())}},P=function(){var e=function(e,n){if(l.jqueryVersion<1.9){var i={};return t.each(n,(function(t,n){i[n]=e.css(n)})),i}return e.css.call(e,n)};this.fromNode=function(t){var n=e(t,["font-family","font-size","text-align","list-style-type","line-height"])||{};return n["font-size"]=parseInt(n["font-size"],10),n},this.stylePara=function(e,n){t.each(e.nodes(u.isPara,{includeAncestor:!0}),(function(e,i){t(i).css(n)}))},this.styleNodes=function(e,o){e=e.splitText();var r=o&&o.nodeName||"SPAN",s=!(!o||!o.expandClosestSibling),a=!(!o||!o.onlyPartialContains);if(e.isCollapsed())return[e.insertNode(u.create(r))];var l=u.makePredByNodeName(r),c=e.nodes(u.isText,{fullyContains:!0}).map((function(t){return u.singleChildAncestor(t,l)||u.wrap(t,r)}));if(s){if(a){var d=e.nodes();l=n.and(l,(function(t){return i.contains(d,t)}))}return c.map((function(e){var n=u.withClosestSiblings(e,l),o=i.head(n),r=i.tail(n);return t.each(r,(function(t,e){u.appendChildNodes(o,e.childNodes),u.remove(e)})),i.head(n)}))}return c},this.current=function(e){var n=t(u.isElement(e.sc)?e.sc:e.sc.parentNode),i=this.fromNode(n);try{i=t.extend(i,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikeThrough")?"strikethrough":"normal"})}catch(t){}if(e.isOnList()){var o=t.inArray(i["list-style-type"],["circle","disc","disc-leading-zero","square"])>-1;i["list-style"]=o?"unordered":"ordered"}else i["list-style"]="none";var r=u.ancestor(e.sc,u.isPara);if(r&&r.style["line-height"])i["line-height"]=r.style.lineHeight;else{var s=parseInt(i["line-height"],10)/parseInt(i["font-size"],10);i["line-height"]=s.toFixed(1)}return i.anchor=e.isOnAnchor()&&u.ancestor(e.sc,u.isAnchor),i.ancestors=u.listAncestor(e.sc,u.isEditable),i.range=e,i}},O=function(){this.insertOrderedList=function(){this.toggleList("OL")},this.insertUnorderedList=function(){this.toggleList("UL")},this.indent=function(){var e=this,o=H.create().wrapBodyInlineWithPara(),r=o.nodes(u.isPara,{includeAncestor:!0}),s=i.clusterBy(r,n.peq2("parentNode"));t.each(s,(function(n,o){var r=i.head(o);u.isLi(r)?e.wrapList(o,r.parentNode.nodeName):t.each(o,(function(e,n){t(n).css("marginLeft",(function(t,e){return(parseInt(e,10)||0)+25}))}))})),o.select()},this.outdent=function(){var e=this,o=H.create().wrapBodyInlineWithPara(),r=o.nodes(u.isPara,{includeAncestor:!0}),s=i.clusterBy(r,n.peq2("parentNode"));t.each(s,(function(n,o){var r=i.head(o);u.isLi(r)?e.releaseList([o]):t.each(o,(function(e,n){t(n).css("marginLeft",(function(t,e){return(e=parseInt(e,10)||0)>25?e-25:""}))}))})),o.select()},this.toggleList=function(e){var o=this,r=H.create().wrapBodyInlineWithPara(),s=r.nodes(u.isPara,{includeAncestor:!0}),a=r.paraBookmark(s),l=i.clusterBy(s,n.peq2("parentNode"));if(i.find(s,u.isPurePara)){var c=[];t.each(l,(function(t,n){c=c.concat(o.wrapList(n,e))})),s=c}else{var d=r.nodes(u.isList,{includeAncestor:!0}).filter((function(n){return!t.nodeName(n,e)}));d.length?t.each(d,(function(t,n){u.replace(n,e)})):s=this.releaseList(l,!0)}H.createFromParaBookmark(a,s).select()},this.wrapList=function(t,e){var n=i.head(t),o=i.last(t),r=u.isList(n.previousSibling)&&n.previousSibling,s=u.isList(o.nextSibling)&&o.nextSibling,a=r||u.insertAfter(u.create(e||"UL"),o);return t=t.map((function(t){return u.isPurePara(t)?u.replace(t,"LI"):t})),u.appendChildNodes(a,t),s&&(u.appendChildNodes(a,i.from(s.childNodes)),u.remove(s)),t},this.releaseList=function(e,n){var o=[];return t.each(e,(function(e,r){var s=i.head(r),a=i.last(r),l=n?u.lastAncestor(s,u.isList):s.parentNode,c=l.childNodes.length>1?u.splitTree(l,{node:a.parentNode,offset:u.position(a)+1},{isSkipPaddingBlankHTML:!0}):null,d=u.splitTree(l,{node:s.parentNode,offset:u.position(s)},{isSkipPaddingBlankHTML:!0});r=n?u.listDescendant(d,u.isLi):i.from(d.childNodes).filter(u.isLi),(n||!u.isList(l.parentNode))&&(r=r.map((function(t){return u.replace(t,"P")}))),t.each(i.from(r).reverse(),(function(t,e){u.insertAfter(e,l)}));var h=i.compact([l,d,c]);t.each(h,(function(e,n){var i=[n].concat(u.listDescendant(n,u.isList));t.each(i.reverse(),(function(t,e){u.nodeLength(e)||u.remove(e,!0)}))})),o=o.concat(r)})),o}},F=function(){var e=new O;this.insertTab=function(t,e,n){var i=u.createText(new Array(n+1).join(u.NBSP_CHAR));(e=e.deleteContents()).insertNode(i,!0),(e=H.create(i,n)).select()},this.insertParagraph=function(n){var i=H.create();i=(i=i.deleteContents()).wrapBodyInlineWithPara();var o,r=u.ancestor(i.sc,u.isPara);if(r){if(u.isEmpty(r)&&u.isLi(r))return void e.toggleList(r.parentNode.nodeName);if(u.isEmpty(r)&&u.isPara(r)&&u.isBlockquote(r.parentNode))u.insertAfter(r,r.parentNode),o=r;else{o=u.splitTree(r,i.getStartPoint());var s=u.listDescendant(r,u.isEmptyAnchor);s=s.concat(u.listDescendant(o,u.isEmptyAnchor)),t.each(s,(function(t,e){u.remove(e)})),(u.isHeading(o)||u.isPre(o))&&u.isEmpty(o)&&(o=u.replace(o,"p"))}}else{var a=i.sc.childNodes[i.so];o=t(u.emptyPara)[0],a?i.sc.insertBefore(o,a):i.sc.appendChild(o)}H.create(o,0).normalize().select().scrollIntoView(n)}},z=function(){this.tab=function(t,e){var n=u.ancestor(t.commonAncestor(),u.isCell),o=u.ancestor(n,u.isTable),r=u.listDescendant(o,u.isCell),s=i[e?"prev":"next"](r,n);s&&H.create(s,0).select()},this.createTable=function(e,n,i){for(var o,r=[],s=0;e>s;s++)r.push("<td>"+u.blank+"</td>");o=r.join("");for(var a,l=[],c=0;n>c;c++)l.push("<tr>"+o+"</tr>");a=l.join("");var d=t("<table>"+a+"</table>");return i&&i.tableClassName&&d.addClass(i.tableClassName),d[0]}},B="bogus";l.hasCodeMirror&&(l.isSupportAmd?require(["codemirror"],(function(t){I=t})):I=window.CodeMirror);t.summernote=t.extend(t.summernote,{version:"0.7.1",ui:M,plugins:{},options:{modules:{editor:function(e){var n=this,o=e.layoutInfo.note,r=e.layoutInfo.editor,s=e.layoutInfo.editable,a=e.options,c=a.langInfo,d=new P,h=new z,f=new F,p=new O,m=new $(s);this.initialize=function(){s.on("keydown",(function(t){t.keyCode===D.code.ENTER&&e.triggerEvent("enter",t),e.triggerEvent("keydown",t),a.shortcuts&&!t.isDefaultPrevented()&&n.handleKeyMap(t)})).on("keyup",(function(t){e.triggerEvent("keyup",t)})).on("focus",(function(t){e.triggerEvent("focus",t)})).on("blur",(function(t){e.triggerEvent("blur",t)})).on("mousedown",(function(t){e.triggerEvent("mousedown",t)})).on("mouseup",(function(t){e.triggerEvent("mouseup",t)})).on("scroll",(function(t){e.triggerEvent("scroll",t)})).on("paste",(function(t){e.triggerEvent("paste",t)}));var t=l.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";s.on(t,(function(){e.triggerEvent("change",s.html())})),r.on("focusin",(function(t){e.triggerEvent("focusin",t)
})).on("focusout",(function(t){e.triggerEvent("focusout",t)})),!a.airMode&&a.height&&s.outerHeight(a.height),!a.airMode&&a.maxHeight&&s.css("max-height",a.maxHeight),!a.airMode&&a.minHeight&&s.css("min-height",a.minHeight),s.html(u.html(o)||u.emptyPara),m.recordUndo()},this.destroy=function(){s.off()},this.handleKeyMap=function(t){var n=a.keyMap[l.isMac?"mac":"pc"],i=[];t.metaKey&&i.push("CMD"),t.ctrlKey&&!t.altKey&&i.push("CTRL"),t.shiftKey&&i.push("SHIFT");var o=D.nameFromCode[t.keyCode];o&&i.push(o);var r=n[i.join("+")];r?(t.preventDefault(),e.invoke(r)):D.isEdit(t.keyCode)&&this.afterCommand()},this.createRange=function(){return this.focus(),H.create()},this.saveRange=function(t){this.focus(),s.data("range",H.create()),t&&H.create().collapse().select()},this.restoreRange=function(){var t=s.data("range");t&&(t.select(),this.focus())},this.saveTarget=function(t){s.data("target",t)},this.clearTarget=function(){s.removeData("target")},this.restoreTarget=function(){return s.data("target")},this.currentStyle=function(){var t=H.create();return t&&(t=t.normalize()),t?d.current(t):d.fromNode(s)},this.styleFromNode=function(t){return d.fromNode(t)},this.undo=function(){e.triggerEvent("before.command",s.html()),m.undo(),e.triggerEvent("change",s.html())},e.memo("help.undo",c.help.undo),this.redo=function(){e.triggerEvent("before.command",s.html()),m.redo(),e.triggerEvent("change",s.html())},e.memo("help.redo",c.help.redo);for(var g=this.beforeCommand=function(){e.triggerEvent("before.command",s.html()),n.focus()},v=this.afterCommand=function(t){m.recordUndo(),t||e.triggerEvent("change",s.html())},b=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"],y=0,C=b.length;C>y;y++)this[b[y]]=function(t){return function(e){g(),document.execCommand(t,!1,e),v(!0)}}(b[y]),e.memo("help."+b[y],c.help[b[y]]);this.tab=function(){var t=this.createRange();t.isCollapsed()&&t.isOnCell()?h.tab(t):(g(),f.insertTab(s,t,a.tabSize),v())},e.memo("help.tab",c.help.tab),this.untab=function(){var t=this.createRange();t.isCollapsed()&&t.isOnCell()&&h.tab(t,!0)},e.memo("help.untab",c.help.untab),this.wrapCommand=function(t){return function(){g(),t.apply(n,arguments),v()}},this.insertParagraph=this.wrapCommand((function(){f.insertParagraph(s)})),e.memo("help.insertParagraph",c.help.insertParagraph),this.insertOrderedList=this.wrapCommand((function(){p.insertOrderedList(s)})),e.memo("help.insertOrderedList",c.help.insertOrderedList),this.insertUnorderedList=this.wrapCommand((function(){p.insertUnorderedList(s)})),e.memo("help.insertUnorderedList",c.help.insertUnorderedList),this.indent=this.wrapCommand((function(){p.indent(s)})),e.memo("help.indent",c.help.indent),this.outdent=this.wrapCommand((function(){p.outdent(s)})),e.memo("help.outdent",c.help.outdent),this.insertImage=function(t,n){return R.createImage(t,n).then((function(t){g(),"function"==typeof n?n(t):("string"==typeof n&&t.attr("data-filename",n),t.css("width",Math.min(s.width(),t.width()))),t.show(),H.create().insertNode(t[0]),H.createFromNodeAfter(t[0]).select(),v()})).fail((function(){e.triggerEvent("image.upload.error")}))},this.insertImages=function(i){t.each(i,(function(t,i){var o=i.name;a.maximumImageFileSize&&a.maximumImageFileSize<i.size?e.triggerEvent("image.upload.error",c.image.maximumFileSizeError):R.readFileAsDataURL(i).then((function(t){return n.insertImage(t,o)})).fail((function(){e.triggerEvent("image.upload.error")}))}))},this.insertImagesOrCallback=function(t){a.callbacks.onImageUpload?e.triggerEvent("image.upload",t):this.insertImages(t)},this.insertNode=this.wrapCommand((function(t){H.create().insertNode(t),H.createFromNodeAfter(t).select()})),this.insertText=this.wrapCommand((function(t){var e=H.create().insertNode(u.createText(t));H.create(e,u.nodeLength(e)).select()})),this.getSelectedText=function(){var t=this.createRange();return t.isOnAnchor()&&(t=H.createFromNode(u.ancestor(t.sc,u.isAnchor))),t.toString()},this.pasteHTML=this.wrapCommand((function(t){var e=H.create().pasteHTML(t);H.createFromNodeAfter(i.last(e)).select()})),this.formatBlock=this.wrapCommand((function(t){t=l.isMSIE?"<"+t+">":t,document.execCommand("FormatBlock",!1,t)})),this.formatPara=function(){this.formatBlock("P")},e.memo("help.formatPara",c.help.formatPara);for(y=1;6>=y;y++)this["formatH"+y]=function(t){return function(){this.formatBlock("H"+t)}}(y),e.memo("help.formatH"+y,c.help["formatH"+y]);this.fontSize=function(e){this.focus();var n=H.create();if(n&&n.isCollapsed()){var o=d.styleNodes(n),r=i.head(o);t(o).css({"font-size":e+"px"}),r&&!u.nodeLength(r)&&(r.innerHTML=u.ZERO_WIDTH_NBSP_CHAR,H.createFromNodeAfter(r.firstChild).select(),s.data(B,r))}else g(),t(d.styleNodes(n)).css({"font-size":e+"px"}),v()},this.insertHorizontalRule=this.wrapCommand((function(){var e=H.create().insertNode(t("<HR/>")[0]);e.nextSibling&&H.create(e.nextSibling,0).normalize().select()})),e.memo("help.insertHorizontalRule",c.help.insertHorizontalRule),this.removeBogus=function(){var t=s.data(B);if(t){var e=i.find(i.from(t.childNodes),u.isText),n=e.nodeValue.indexOf(u.ZERO_WIDTH_NBSP_CHAR);-1!==n&&e.deleteData(n,1),u.isEmpty(t)&&u.remove(t),s.removeData(B)}},this.lineHeight=this.wrapCommand((function(t){d.stylePara(H.create(),{lineHeight:t})})),this.unlink=function(){var t=this.createRange();if(t.isOnAnchor()){var e=u.ancestor(t.sc,u.isAnchor);(t=H.createFromNode(e)).select(),g(),document.execCommand("unlink"),v()}},this.createLink=this.wrapCommand((function(e){var n=e.url,o=e.text,r=e.isNewWindow,s=e.range||this.createRange(),l=s.toString()!==o;a.onCreateLink&&(n=a.onCreateLink(n));var c=[];if(l){var u=s.insertNode(t("<A>"+o+"</A>")[0]);c.push(u)}else c=d.styleNodes(s,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});t.each(c,(function(e,i){t(i).attr("href",n),r?t(i).attr("target","_blank"):t(i).removeAttr("target")}));var h=H.createFromNodeBefore(i.head(c)).getStartPoint(),f=H.createFromNodeAfter(i.last(c)).getEndPoint();H.create(h.node,h.offset,f.node,f.offset).select()})),this.getLinkInfo=function(){this.focus();var e=H.create().expand(u.isAnchor),n=t(i.head(e.nodes(u.isAnchor)));return{range:e,text:e.toString(),isNewWindow:!!n.length&&"_blank"===n.attr("target"),url:n.length?n.attr("href"):""}},this.color=this.wrapCommand((function(t){var e=t.foreColor,n=t.backColor;e&&document.execCommand("foreColor",!1,e),n&&document.execCommand("backColor",!1,n)})),this.insertTable=this.wrapCommand((function(t){var e=t.split("x");H.create().deleteContents().insertNode(h.createTable(e[0],e[1],a))})),this.floatMe=this.wrapCommand((function(e){t(this.restoreTarget()).css("float",e)})),this.resize=this.wrapCommand((function(e){t(this.restoreTarget()).css({width:100*e+"%",height:""})})),this.resizeTo=function(t,e,n){var i;if(n){var o=t.y/t.x,r=e.data("ratio");i={width:r>o?t.x:t.y/r,height:r>o?t.x*r:t.y}}else i={width:t.x,height:t.y};e.css(i)},this.removeMedia=this.wrapCommand((function(){var n=t(this.restoreTarget()).detach();e.triggerEvent("media.delete",n,s)})),this.focus=function(){s.is(":focus")||(s.focus(),!s.is(":focus")&&l.isFF&&H.createFromNode(s[0]).normalize().collapse().select())},this.isEmpty=function(){return u.isEmpty(s[0])||u.emptyPara===s.html()}},clipboard:function(e){var n=this,o=e.layoutInfo.editable;this.events={"summernote.keydown":function(t,i){n.needKeydownHook()&&(i.ctrlKey||i.metaKey)&&i.keyCode===D.code.V&&(e.invoke("editor.saveRange"),n.$paste.focus(),setTimeout((function(){n.pasteByHook()}),0))}},this.needKeydownHook=function(){return l.isMSIE&&l.browserVersion>10||l.isFF},this.initialize=function(){this.needKeydownHook()?(this.$paste=t("<div />").attr("contenteditable",!0).css({position:"absolute",left:-1e5,opacity:0}),o.before(this.$paste),this.$paste.on("paste",(function(t){e.triggerEvent("paste",t)}))):o.on("paste",this.pasteByEvent)},this.destroy=function(){this.needKeydownHook()&&(this.$paste.remove(),this.$paste=null)},this.pasteByHook=function(){var n=this.$paste[0].firstChild;if(u.isImg(n)){for(var i=n.src,o=atob(i.split(",")[1]),r=new Uint8Array(o.length),s=0;s<o.length;s++)r[s]=o.charCodeAt(s);var a=new Blob([r],{type:"image/png"});a.name="clipboard.png",e.invoke("editor.restoreRange"),e.invoke("editor.focus"),e.invoke("editor.insertImagesOrCallback",[a])}else{var l=t("<div />").html(this.$paste.html()).html();e.invoke("editor.restoreRange"),e.invoke("editor.focus"),l&&e.invoke("editor.pasteHTML",l)}this.$paste.empty()},this.pasteByEvent=function(t){var n=t.originalEvent.clipboardData;if(n&&n.items&&n.items.length){var o=i.head(n.items);"file"===o.kind&&-1!==o.type.indexOf("image/")&&e.invoke("editor.insertImagesOrCallback",[o.getAsFile()]),e.invoke("editor.afterCommand")}}},dropzone:function(e){var n=t(document),i=e.layoutInfo.editor,o=e.layoutInfo.editable,r=e.options,s=r.langInfo,a=t(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(i);this.initialize=function(){r.disableDragAndDrop?n.on("drop",(function(t){t.preventDefault()})):this.attachDragAndDropEvent()},this.attachDragAndDropEvent=function(){var r=t(),l=a.find(".note-dropzone-message");n.on("dragenter",(function(t){var n=e.invoke("codeview.isActivated"),o=i.width()>0&&i.height()>0;n||r.length||!o||(i.addClass("dragover"),a.width(i.width()),a.height(i.height()),l.text(s.image.dragImageHere)),r=r.add(t.target)})).on("dragleave",(function(t){(r=r.not(t.target)).length||i.removeClass("dragover")})).on("drop",(function(){r=t(),i.removeClass("dragover")})),a.on("dragenter",(function(){a.addClass("hover"),l.text(s.image.dropImage)})).on("dragleave",(function(){a.removeClass("hover"),l.text(s.image.dragImageHere)})),a.on("drop",(function(n){var i=n.originalEvent.dataTransfer;i&&i.files&&i.files.length?(n.preventDefault(),o.focus(),e.invoke("editor.insertImagesOrCallback",i.files)):t.each(i.types,(function(n,o){var r=i.getData(o);o.toLowerCase().indexOf("text")>-1?e.invoke("editor.pasteHTML",r):t(r).each((function(){e.invoke("editor.insertNode",this)}))}))})).on("dragover",!1)}},codeview:function(t){var e=t.layoutInfo.editor,n=t.layoutInfo.editable,i=t.layoutInfo.codable,o=t.options;this.sync=function(){this.isActivated()&&l.hasCodeMirror&&i.data("cmEditor").save()},this.isActivated=function(){return e.hasClass("codeview")},this.toggle=function(){this.isActivated()?this.deactivate():this.activate(),t.triggerEvent("codeview.toggled")},this.activate=function(){if(i.val(u.html(n,o.prettifyHtml)),i.height(n.height()),t.invoke("toolbar.updateCodeview",!0),e.addClass("codeview"),i.focus(),l.hasCodeMirror){var r=I.fromTextArea(i[0],o.codemirror);if(void 0!==o.codemirror.callbacks)for(var s in o.codemirror.callbacks)if(o.codemirror.callbacks.hasOwnProperty(s)){if("onBlur"==s)var a="blur";else if("onFocus"==s)a="focus";else if("onChange"==s)a="change";r.on(a,o.codemirror.callbacks[s],r)}if(o.codemirror.tern){var c=new I.TernServer(o.codemirror.tern);r.ternServer=c,r.on("cursorActivity",(function(t){c.updateArgHints(t)}))}r.setSize(null,n.outerHeight()),i.data("cmEditor",r)}},this.deactivate=function(){if(l.hasCodeMirror){var r=i.data("cmEditor");i.val(r.getValue()),r.toTextArea()}var s=u.value(i,o.prettifyHtml)||u.emptyPara,a=n.html()!==s;n.html(s),n.height(o.height?i.height():"auto"),e.removeClass("codeview"),a&&t.triggerEvent("change",n.html(),n),n.focus(),t.invoke("toolbar.updateCodeview",!1)},this.destroy=function(){this.isActivated()&&this.deactivate()}},statusbar:function(e){var n=t(document),i=e.layoutInfo.statusbar,o=e.layoutInfo.editable,r=e.options;this.initialize=function(){r.airMode||r.disableResizeEditor||i.on("mousedown",(function(t){t.preventDefault(),t.stopPropagation();var e=o.offset().top-n.scrollTop();n.on("mousemove",(function(t){var n=t.clientY-(e+24);n=r.minheight>0?Math.max(n,r.minheight):n,n=r.maxHeight>0?Math.min(n,r.maxHeight):n,o.height(n)})).one("mouseup",(function(){n.off("mousemove")}))}))},this.destroy=function(){i.off()}},fullscreen:function(e){var n=e.layoutInfo.editor,i=e.layoutInfo.toolbar,o=e.layoutInfo.editable,r=e.layoutInfo.codable,s=t(window),a=t("html, body");this.toggle=function(){var t=function(t){o.css("height",t.h),r.css("height",t.h),r.data("cmeditor")&&r.data("cmeditor").setsize(null,t.h)};n.toggleClass("fullscreen");var l=n.hasClass("fullscreen");l?(o.data("orgHeight",o.css("height")),s.on("resize",(function(){t({h:s.height()-i.outerHeight()})})).trigger("resize"),a.css("overflow","hidden")):(s.off("resize"),t({h:o.data("orgHeight")}),a.css("overflow","visible")),e.invoke("toolbar.updateFullscreen",l)}},handle:function(e){var n=this,i=t(document),o=e.layoutInfo.editingArea,r=e.options;this.events={"summernote.mousedown":function(t,e){n.update(e.target)&&e.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){n.update()}},this.initialize=function(){this.$handle=t(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',r.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',r.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(o),this.$handle.on("mousedown",(function(t){if(u.isControlSizing(t.target)){t.preventDefault(),t.stopPropagation();var o=n.$handle.find(".note-control-selection").data("target"),r=o.offset(),s=i.scrollTop();i.on("mousemove",(function(t){e.invoke("editor.resizeTo",{x:t.clientX-r.left,y:t.clientY-(r.top-s)},o,!t.shiftKey),n.update(o[0])})).one("mouseup",(function(t){t.preventDefault(),i.off("mousemove"),e.invoke("editor.afterCommand")})),o.data("ratio")||o.data("ratio",o.height()/o.width())}}))},this.destroy=function(){this.$handle.remove()},this.update=function(n){var i=u.isImg(n),o=this.$handle.find(".note-control-selection");if(e.invoke("imagePopover.update",n),i){var r=t(n),s=r.position(),a={w:r.outerWidth(!0),h:r.outerHeight(!0)};o.css({display:"block",left:s.left,top:s.top,width:a.w,height:a.h}).data("target",r);var l=a.w+"x"+a.h;o.find(".note-control-selection-info").text(l),e.invoke("editor.saveTarget",n)}else this.hide();return i},this.hide=function(){e.invoke("editor.clearTarget"),this.$handle.children().hide()}},hintPopover:function(e){var o=this,r=t.summernote.ui,s=e.options.hint||[],a=t.isArray(s)?s:[s];this.events={"summernote.keyup":function(t,e){e.isDefaultPrevented()||o.handleKeyup(e)},"summernote.keydown":function(t,e){o.handleKeydown(e)},"summernote.dialog.shown":function(){o.hide()}},this.shouldInitialize=function(){return a.length>0},this.initialize=function(){this.lastWordRange=null,this.$popover=r.popover({className:"note-hint-popover"}).render().appendTo("body"),this.$content=this.$popover.find(".popover-content"),this.$content.on("click",".note-hint-item",(function(){o.$content.find(".active").removeClass("active"),t(this).addClass("active"),o.replace()}))},this.destroy=function(){this.$popover.remove()},this.selectItem=function(t){this.$content.find(".active").removeClass("active"),t.addClass("active"),this.$content[0].scrollTop=t[0].offsetTop-this.$content.innerHeight()/2},this.moveDown=function(){var t=this.$content.find(".note-hint-item.active"),e=t.next();if(e.length)this.selectItem(e);else{var n=t.parent().next();n.length||(n=this.$content.find(".note-hint-group").first()),this.selectItem(n.find(".note-hint-item").first())}},this.moveUp=function(){var t=this.$content.find(".note-hint-item.active"),e=t.prev();if(e.length)this.selectItem(e);else{var n=t.parent().prev();n.length||(n=this.$content.find(".note-hint-group").last()),this.selectItem(n.find(".note-hint-item").last())}},this.replace=function(){var t=this.$content.find(".note-hint-item.active"),n=this.nodeFromItem(t);this.lastWordRange.insertNode(n),H.createFromNode(n).collapse().select(),this.lastWordRange=null,this.hide(),e.invoke("editor.focus")},this.nodeFromItem=function(t){var e=a[t.data("index")],n=t.data("item"),i=e.content?e.content(n):n;return"string"==typeof i&&(i=u.createText(i)),i},this.createItemTemplates=function(e,n){var i=a[e];return n.map((function(n,o){var r=t('<div class="note-hint-item"/>');return r.append(i.template?i.template(n):n+""),r.data({index:e,item:n}),0===e&&0===o&&r.addClass("active"),r}))},this.handleKeydown=function(t){this.$popover.is(":visible")&&(t.keyCode===D.code.ENTER?(t.preventDefault(),this.replace()):t.keyCode===D.code.UP?(t.preventDefault(),this.moveUp()):t.keyCode===D.code.DOWN&&(t.preventDefault(),this.moveDown()))},this.searchKeyword=function(t,e,n){var i=a[t];if(i&&i.match.test(e)&&i.search){var o=i.match.exec(e);i.search(o[1],n)}else n()},this.createGroup=function(e,n){var i=t('<div class="note-hint-group note-hint-group-'+e+'"/>');return this.searchKeyword(e,n,(function(t){(t=t||[]).length&&(i.html(o.createItemTemplates(e,t)),o.show())})),i},this.handleKeyup=function(t){if(i.contains([D.code.ENTER,D.code.UP,D.code.DOWN],t.keyCode)){if(t.keyCode===D.code.ENTER&&this.$popover.is(":visible"))return}else{var r=e.invoke("editor.createRange").getWordRange(),s=r.toString();if(a.length&&s){this.$content.empty();var l=n.rect2bnd(i.last(r.getClientRects()));l&&(this.$popover.css({left:l.left,top:l.top+l.height}).hide(),this.lastWordRange=r,a.forEach((function(t,e){t.match.test(s)&&o.createGroup(e,s).appendTo(o.$content)})))}else this.hide()}},this.show=function(){this.$popover.show()},this.hide=function(){this.$popover.hide()}},autoLink:function(e){var n=this,o=/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+-]+@)(.+)$/i;this.events={"summernote.keyup":function(t,e){e.isDefaultPrevented()||n.handleKeyup(e)},"summernote.keydown":function(t,e){n.handleKeydown(e)}},this.initialize=function(){this.lastWordRange=null},this.destroy=function(){this.lastWordRange=null},this.replace=function(){if(this.lastWordRange){var t=this.lastWordRange.toString();if(o.test(t)){var n=this.nodeFromKeyword(t);this.lastWordRange.insertNode(n),this.lastWordRange=null,e.invoke("editor.focus")}}},this.nodeFromKeyword=function(e){return t("<a />").html(e).attr("href",e)[0]},this.handleKeydown=function(t){if(i.contains([D.code.ENTER,D.code.SPACE],t.keyCode)){var n=e.invoke("editor.createRange").getWordRange();this.lastWordRange=n}},this.handleKeyup=function(t){i.contains([D.code.ENTER,D.code.SPACE],t.keyCode)&&this.replace()}},autoSync:function(t){var e=t.layoutInfo.note;this.events={"summernote.change":function(){e.val(t.invoke("code"))}},this.shouldInitialize=function(){return u.isTextarea(e[0])}},placeholder:function(e){var n=this,i=e.layoutInfo.editingArea,o=e.options;this.events={"summernote.init summernote.change":function(){n.update()},"summernote.codeview.toggled":function(){n.update()}},this.shouldInitialize=function(){return!!o.placeholder},this.initialize=function(){this.$placeholder=t('<div class="note-placeholder">'),this.$placeholder.on("click",(function(){e.invoke("focus")})).text(o.placeholder).prependTo(i)},this.destroy=function(){this.$placeholder.remove()},this.update=function(){var t=!e.invoke("codeview.isActivated")&&e.invoke("editor.isEmpty");this.$placeholder.toggle(t)}},buttons:function(e){var o=this,r=t.summernote.ui,s=e.layoutInfo.toolbar,a=e.options,c=a.langInfo,u=n.invertObject(a.keyMap[l.isMac?"mac":"pc"]),d=this.representShortcut=function(t){var e=u[t];return l.isMac&&(e=e.replace("CMD","⌘").replace("SHIFT","⇧"))," ("+(e=e.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]"))+")"};this.initialize=function(){this.addToolbarButtons(),this.addImagePopoverButtons(),this.addLinkPopoverButtons()},this.addToolbarButtons=function(){e.memo("button.style",(function(){return r.buttonGroup([r.button({className:"dropdown-toggle",contents:r.icon(a.icons.magic)+" "+r.icon(a.icons.caret,"span"),tooltip:c.style.style,data:{toggle:"dropdown"}}),r.dropdown({className:"dropdown-style",items:e.options.styleTags,click:e.createInvokeHandler("editor.formatBlock")})]).render()})),e.memo("button.bold",(function(){return r.button({className:"note-btn-bold",contents:r.icon(a.icons.bold),tooltip:c.font.bold+d("bold"),click:e.createInvokeHandler("editor.bold")}).render()})),e.memo("button.italic",(function(){return r.button({className:"note-btn-italic",contents:r.icon(a.icons.italic),tooltip:c.font.italic+d("italic"),click:e.createInvokeHandler("editor.italic")}).render()})),e.memo("button.underline",(function(){return r.button({className:"note-btn-underline",contents:r.icon(a.icons.underline),tooltip:c.font.underline+d("underline"),click:e.createInvokeHandler("editor.underline")}).render()})),e.memo("button.clear",(function(){return r.button({contents:r.icon(a.icons.eraser),tooltip:c.font.clear+d("removeFormat"),click:e.createInvokeHandler("editor.removeFormat")}).render()})),e.memo("button.strikethrough",(function(){return r.button({contents:r.icon(a.icons.strikethrough),tooltip:c.font.strikethrough+d("strikethrough"),click:e.createInvokeHandler("editor.strikethrough")}).render()})),e.memo("button.superscript",(function(){return r.button({contents:r.icon(a.icons.superscript),tooltip:c.font.superscript,click:e.createInvokeHandler("editor.superscript")}).render()})),e.memo("button.subscript",(function(){return r.button({contents:r.icon(a.icons.subscript),tooltip:c.font.subscript,click:e.createInvokeHandler("editor.subscript")}).render()})),e.memo("button.fontname",(function(){return r.buttonGroup([r.button({className:"dropdown-toggle",contents:'<span class="note-current-fontname"/> '+r.icon(a.icons.caret,"span"),tooltip:c.font.name,data:{toggle:"dropdown"}}),r.dropdownCheck({className:"dropdown-fontname",checkClassName:a.icons.menuCheck,items:a.fontNames.filter((function(t){return l.isFontInstalled(t)||i.contains(a.fontNamesIgnoreCheck,t)})),click:e.createInvokeHandler("editor.fontName")})]).render()})),e.memo("button.fontsize",(function(){return r.buttonGroup([r.button({className:"dropdown-toggle",contents:'<span class="note-current-fontsize"/>'+r.icon(a.icons.caret,"span"),tooltip:c.font.size,data:{toggle:"dropdown"}}),r.dropdownCheck({className:"dropdown-fontsize",checkClassName:a.icons.menuCheck,items:a.fontSizes,click:e.createInvokeHandler("editor.fontSize")})]).render()})),e.memo("button.color",(function(){return r.buttonGroup({className:"note-color",children:[r.button({className:"note-current-color-button",contents:r.icon(a.icons.font+" note-recent-color"),tooltip:c.color.recent,click:e.createInvokeHandler("editor.color"),callback:function(t){t.find(".note-recent-color").css({"background-color":"yellow"}),t.data("value",{backColor:"yellow"})}}),r.button({className:"dropdown-toggle",contents:r.icon(a.icons.caret,"span"),tooltip:c.color.more,data:{toggle:"dropdown"}}),r.dropdown({items:["<li>",'<div class="btn-group">','  <div class="note-palette-title">'+c.color.background+"</div>","  <div>",'    <button class="note-color-reset btn btn-default" data-event="backColor" data-value="inherit">',c.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"</div>",'<div class="btn-group">','  <div class="note-palette-title">'+c.color.foreground+"</div>","  <div>",'    <button class="note-color-reset btn btn-default" data-event="removeFormat" data-value="foreColor">',c.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"</div>","</li>"].join(""),callback:function(e){e.find(".note-holder").each((function(){var e=t(this);e.append(r.palette({colors:a.colors,eventName:e.data("event")}).render())}))},click:function(n){var i=t(n.target),o=i.data("event"),r=i.data("value");if(o&&r){var s="backColor"===o?"background-color":"color",a=i.closest(".note-color").find(".note-recent-color"),l=i.closest(".note-color").find(".note-current-color-button"),c=l.data("value");c[o]=r,a.css(s,r),l.data("value",c),e.invoke("editor."+o,r)}}})]}).render()})),e.memo("button.ol",(function(){return r.button({contents:r.icon(a.icons.unorderedlist),tooltip:c.lists.unordered+d("insertUnorderedList"),click:e.createInvokeHandler("editor.insertUnorderedList")}).render()})),e.memo("button.ul",(function(){return r.button({contents:r.icon(a.icons.orderedlist),tooltip:c.lists.ordered+d("insertOrderedList"),click:e.createInvokeHandler("editor.insertOrderedList")}).render()})),e.memo("button.paragraph",(function(){return r.buttonGroup([r.button({className:"dropdown-toggle",contents:r.icon(a.icons.align)+" "+r.icon(a.icons.caret,"span"),tooltip:c.paragraph.paragraph,data:{toggle:"dropdown"}}),r.dropdown([r.buttonGroup({className:"note-align",children:[r.button({contents:r.icon(a.icons.alignLeft),tooltip:c.paragraph.left+d("justifyLeft"),click:e.createInvokeHandler("editor.justifyLeft")}),r.button({contents:r.icon(a.icons.alignCenter),tooltip:c.paragraph.center+d("justifyCenter"),click:e.createInvokeHandler("editor.justifyCenter")}),r.button({contents:r.icon(a.icons.alignRight),tooltip:c.paragraph.right+d("justifyRight"),click:e.createInvokeHandler("editor.justifyRight")}),r.button({contents:r.icon(a.icons.alignJustify),tooltip:c.paragraph.justify+d("justifyFull"),click:e.createInvokeHandler("editor.justifyFull")})]}),r.buttonGroup({className:"note-list",children:[r.button({contents:r.icon(a.icons.outdent),tooltip:c.paragraph.outdent+d("outdent"),click:e.createInvokeHandler("editor.outdent")}),r.button({contents:r.icon(a.icons.indent),tooltip:c.paragraph.indent+d("indent"),click:e.createInvokeHandler("editor.indent")})]})])]).render()})),e.memo("button.height",(function(){return r.buttonGroup([r.button({className:"dropdown-toggle",contents:r.icon(a.icons.textHeight)+" "+r.icon(a.icons.caret,"span"),tooltip:c.font.height,data:{toggle:"dropdown"}}),r.dropdownCheck({items:a.lineHeights,checkClassName:a.icons.menuCheck,className:"dropdown-line-height",click:e.createInvokeHandler("editor.lineHeight")})]).render()})),e.memo("button.table",(function(){return r.buttonGroup([r.button({className:"dropdown-toggle",contents:r.icon(a.icons.table)+" "+r.icon(a.icons.caret,"span"),tooltip:c.table.table,data:{toggle:"dropdown"}}),r.dropdown({className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(t){t.find(".note-dimension-picker-mousecatcher").css({width:a.insertTableMaxSize.col+"em",height:a.insertTableMaxSize.row+"em"}).mousedown(e.createInvokeHandler("editor.insertTable")).on("mousemove",o.tableMoveHandler)}}).render()})),e.memo("button.link",(function(){return r.button({contents:r.icon(a.icons.link),tooltip:c.link.link,click:e.createInvokeHandler("linkDialog.show")}).render()})),e.memo("button.picture",(function(){return r.button({contents:r.icon(a.icons.picture),tooltip:c.image.image,click:e.createInvokeHandler("imageDialog.show")}).render()})),e.memo("button.video",(function(){return r.button({contents:r.icon(a.icons.video),tooltip:c.video.video,click:e.createInvokeHandler("videoDialog.show")}).render()})),e.memo("button.hr",(function(){return r.button({contents:r.icon(a.icons.minus),tooltip:c.hr.insert+d("insertHorizontalRule"),click:e.createInvokeHandler("editor.insertHorizontalRule")}).render()})),e.memo("button.fullscreen",(function(){return r.button({className:"btn-fullscreen",contents:r.icon(a.icons.arrowsAlt),tooltip:c.options.fullscreen,click:e.createInvokeHandler("fullscreen.toggle")}).render()})),e.memo("button.codeview",(function(){return r.button({className:"btn-codeview",contents:r.icon(a.icons.code),tooltip:c.options.codeview,click:e.createInvokeHandler("codeview.toggle")}).render()})),e.memo("button.redo",(function(){return r.button({contents:r.icon(a.icons.redo),tooltip:c.history.redo+d("redo"),click:e.createInvokeHandler("editor.redo")}).render()})),e.memo("button.undo",(function(){return r.button({contents:r.icon(a.icons.undo),tooltip:c.history.undo+d("undo"),click:e.createInvokeHandler("editor.undo")}).render()})),e.memo("button.help",(function(){return r.button({contents:r.icon(a.icons.question),tooltip:c.options.help,click:e.createInvokeHandler("helpDialog.show")}).render()}))},this.addImagePopoverButtons=function(){e.memo("button.imageSize100",(function(){return r.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:c.image.resizeFull,click:e.createInvokeHandler("editor.resize","1")}).render()})),e.memo("button.imageSize50",(function(){return r.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:c.image.resizeHalf,click:e.createInvokeHandler("editor.resize","0.5")}).render()})),e.memo("button.imageSize25",(function(){return r.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:c.image.resizeQuarter,click:e.createInvokeHandler("editor.resize","0.25")}).render()})),e.memo("button.floatLeft",(function(){return r.button({contents:r.icon(a.icons.alignLeft),tooltip:c.image.floatLeft,click:e.createInvokeHandler("editor.floatMe","left")}).render()})),e.memo("button.floatRight",(function(){return r.button({contents:r.icon(a.icons.alignRight),tooltip:c.image.floatRight,click:e.createInvokeHandler("editor.floatMe","right")}).render()})),e.memo("button.floatNone",(function(){return r.button({contents:r.icon(a.icons.alignJustify),tooltip:c.image.floatNone,click:e.createInvokeHandler("editor.floatMe","none")}).render()})),e.memo("button.removeMedia",(function(){return r.button({contents:r.icon(a.icons.trash),tooltip:c.image.remove,click:e.createInvokeHandler("editor.removeMedia")}).render()}))},this.addLinkPopoverButtons=function(){e.memo("button.linkDialogShow",(function(){return r.button({contents:r.icon(a.icons.link),tooltip:c.link.edit,click:e.createInvokeHandler("linkDialog.show")}).render()})),e.memo("button.unlink",(function(){return r.button({contents:r.icon(a.icons.unlink),tooltip:c.link.unlink,click:e.createInvokeHandler("editor.unlink")}).render()}))},this.build=function(t,n){for(var i=0,o=n.length;o>i;i++){for(var s=n[i],a=s[0],l=s[1],c=r.buttonGroup({className:"note-"+a}).render(),u=0,d=l.length;d>u;u++){var h=e.memo("button."+l[u]);h&&c.append("function"==typeof h?h(e):h)}c.appendTo(t)}},this.updateCurrentStyle=function(){var n=e.invoke("editor.currentStyle");if(this.updateBtnStates({".note-btn-bold":function(){return"bold"===n["font-bold"]},".note-btn-italic":function(){return"italic"===n["font-italic"]},".note-btn-underline":function(){return"underline"===n["font-underline"]}}),n["font-family"]){var o=n["font-family"].split(",").map((function(t){return t.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")})),r=i.find(o,(function(t){return l.isFontInstalled(t)||i.contains(a.fontNamesIgnoreCheck,t)}));s.find(".dropdown-fontname li a").each((function(){var e=t(this).data("value")+""==r+"";this.className=e?"checked":""})),s.find(".note-current-fontname").text(r)}if(n["font-size"]){var c=n["font-size"];s.find(".dropdown-fontsize li a").each((function(){var e=t(this).data("value")+""==c+"";this.className=e?"checked":""})),s.find(".note-current-fontsize").text(c)}if(n["line-height"]){var u=n["line-height"];s.find(".dropdown-line-height li a").each((function(){var e=t(this).data("value")+""==u+"";this.className=e?"checked":""}))}},this.updateBtnStates=function(e){t.each(e,(function(t,e){r.toggleBtnActive(s.find(t),e())}))},this.tableMoveHandler=function(e){var n,i=t(e.target.parentNode),o=i.next(),r=i.find(".note-dimension-picker-mousecatcher"),s=i.find(".note-dimension-picker-highlighted"),l=i.find(".note-dimension-picker-unhighlighted");if(void 0===e.offsetX){
var c=t(e.target).offset();n={x:e.pageX-c.left,y:e.pageY-c.top}}else n={x:e.offsetX,y:e.offsetY};var u=Math.ceil(n.x/18)||1,d=Math.ceil(n.y/18)||1;s.css({width:u+"em",height:d+"em"}),r.data("value",u+"x"+d),3<u&&u<a.insertTableMaxSize.col&&l.css({width:u+1+"em"}),3<d&&d<a.insertTableMaxSize.row&&l.css({height:d+1+"em"}),o.html(u+" x "+d)}},toolbar:function(e){var n=t.summernote.ui,i=e.layoutInfo.note,o=e.layoutInfo.toolbar,r=e.options;this.shouldInitialize=function(){return!r.airMode},this.initialize=function(){r.toolbar=r.toolbar||[],r.toolbar.length?e.invoke("buttons.build",o,r.toolbar):o.hide(),i.on("summernote.keyup summernote.mouseup summernote.change",(function(){e.invoke("buttons.updateCurrentStyle")})),e.invoke("buttons.updateCurrentStyle")},this.destroy=function(){o.children().remove()},this.updateFullscreen=function(t){n.toggleBtnActive(o.find(".btn-fullscreen"),t)},this.updateCodeview=function(t){n.toggleBtnActive(o.find(".btn-codeview"),t),t?this.deactivate():this.activate()},this.activate=function(t){var e=o.find("button");t||(e=e.not(".btn-codeview")),n.toggleBtn(e,!0)},this.deactivate=function(t){var e=o.find("button");t||(e=e.not(".btn-codeview")),n.toggleBtn(e,!1)}},linkDialog:function(e){var n=this,i=t.summernote.ui,o=e.layoutInfo.editor,r=e.options,s=r.langInfo;this.initialize=function(){var e=r.dialogsInBody?t(document.body):o,n='<div class="form-group"><label>'+s.link.textToDisplay+'</label><input class="note-link-text form-control" type="text" /></div><div class="form-group"><label>'+s.link.url+'</label><input class="note-link-url form-control" type="text" value="http://" /></div>'+(r.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+s.link.openInNewWindow+"</label></div>"),a='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+s.link.insert+"</button>";this.$dialog=i.dialog({className:"link-dialog",title:s.link.insert,body:n,footer:a}).render().appendTo(e)},this.destroy=function(){i.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(t,e){t.on("keypress",(function(t){t.keyCode===D.code.ENTER&&e.trigger("click")}))},this.showLinkDialog=function(o){return t.Deferred((function(t){var r=n.$dialog.find(".note-link-text"),s=n.$dialog.find(".note-link-url"),a=n.$dialog.find(".note-link-btn"),l=n.$dialog.find("input[type=checkbox]");i.onDialogShown(n.$dialog,(function(){e.triggerEvent("dialog.shown"),r.val(o.text),r.on("input",(function(){i.toggleBtn(a,r.val()&&s.val()),o.text=r.val()})),o.url||(o.url=o.text||"http://",i.toggleBtn(a,o.text)),s.on("input",(function(){i.toggleBtn(a,r.val()&&s.val()),o.text||r.val(s.val())})).val(o.url).trigger("focus"),n.bindEnterKey(s,a),n.bindEnterKey(r,a),l.prop("checked",o.isNewWindow),a.one("click",(function(e){e.preventDefault(),t.resolve({range:o.range,url:s.val(),text:r.val(),isNewWindow:l.is(":checked")}),n.$dialog.modal("hide")}))})),i.onDialogHidden(n.$dialog,(function(){r.off("input keypress"),s.off("input keypress"),a.off("click"),"pending"===t.state()&&t.reject()})),i.showDialog(n.$dialog)})).promise()},this.show=function(){var t=e.invoke("editor.getLinkInfo");e.invoke("editor.saveRange"),this.showLinkDialog(t).then((function(t){e.invoke("editor.restoreRange"),e.invoke("editor.createLink",t)})).fail((function(){e.invoke("editor.restoreRange")}))},e.memo("help.linkDialog.show",r.langInfo.help["linkDialog.show"])},linkPopover:function(e){var n=this,o=t.summernote.ui,r=e.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){n.update()},"summernote.dialog.shown":function(){n.hide()}},this.shouldInitialize=function(){return!i.isEmpty(r.popover.link)},this.initialize=function(){this.$popover=o.popover({className:"note-link-popover",callback:function(t){t.find(".popover-content").prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo("body");var t=this.$popover.find(".popover-content");e.invoke("buttons.build",t,r.popover.link)},this.destroy=function(){this.$popover.remove()},this.update=function(){var n=e.invoke("editor.createRange");if(n.isCollapsed()&&n.isOnAnchor()){var i=u.ancestor(n.sc,u.isAnchor),o=t(i).attr("href");this.$popover.find("a").attr("href",o).html(o);var r=u.posFromPlaceholder(i);this.$popover.css({display:"block",left:r.left,top:r.top})}else this.hide()},this.hide=function(){this.$popover.hide()}},imageDialog:function(e){var n=this,i=t.summernote.ui,o=e.layoutInfo.editor,r=e.options,s=r.langInfo;this.initialize=function(){var e=r.dialogsInBody?t(document.body):o,n="";if(r.maximumImageFileSize){var a=Math.floor(Math.log(r.maximumImageFileSize)/Math.log(1024)),l=1*(r.maximumImageFileSize/Math.pow(1024,a)).toFixed(2)+" "+" KMGTP"[a]+"B";n="<small>"+s.image.maximumFileSize+" : "+l+"</small>"}var c='<div class="form-group note-group-select-from-files"><label>'+s.image.selectFromFiles+'</label><input class="note-image-input form-control" type="file" name="files" accept="image/*" multiple="multiple" />'+n+'</div><div class="form-group" style="overflow:auto;"><label>'+s.image.url+'</label><input class="note-image-url form-control col-md-12" type="text" /></div>',u='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+s.image.insert+"</button>";this.$dialog=i.dialog({title:s.image.insert,body:c,footer:u}).render().appendTo(e)},this.destroy=function(){i.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(t,e){t.on("keypress",(function(t){t.keyCode===D.code.ENTER&&e.trigger("click")}))},this.show=function(){e.invoke("editor.saveRange"),this.showImageDialog().then((function(t){i.hideDialog(n.$dialog),e.invoke("editor.restoreRange"),"string"==typeof t?e.invoke("editor.insertImage",t):e.invoke("editor.insertImagesOrCallback",t)})).fail((function(){e.invoke("editor.restoreRange")}))},this.showImageDialog=function(){return t.Deferred((function(t){var o=n.$dialog.find(".note-image-input"),r=n.$dialog.find(".note-image-url"),s=n.$dialog.find(".note-image-btn");i.onDialogShown(n.$dialog,(function(){e.triggerEvent("dialog.shown"),o.replaceWith(o.clone().on("change",(function(){t.resolve(this.files||this.value)})).val("")),s.click((function(e){e.preventDefault(),t.resolve(r.val())})),r.on("keyup paste",(function(){var t=r.val();i.toggleBtn(s,t)})).val("").trigger("focus"),n.bindEnterKey(r,s)})),i.onDialogHidden(n.$dialog,(function(){o.off("change"),r.off("keyup paste keypress"),s.off("click"),"pending"===t.state()&&t.reject()})),i.showDialog(n.$dialog)}))}},imagePopover:function(e){var n=t.summernote.ui,o=e.options;this.shouldInitialize=function(){return!i.isEmpty(o.popover.image)},this.initialize=function(){this.$popover=n.popover({className:"note-image-popover"}).render().appendTo("body");var t=this.$popover.find(".popover-content");e.invoke("buttons.build",t,o.popover.image)},this.destroy=function(){this.$popover.remove()},this.update=function(t){if(u.isImg(t)){var e=u.posFromPlaceholder(t);this.$popover.css({display:"block",left:e.left,top:e.top})}else this.hide()},this.hide=function(){this.$popover.hide()}},videoDialog:function(e){var n=this,i=t.summernote.ui,o=e.layoutInfo.editor,r=e.options,s=r.langInfo;this.initialize=function(){var e=r.dialogsInBody?t(document.body):o,n='<div class="form-group row-fluid"><label>'+s.video.url+' <small class="text-muted">'+s.video.providers+'</small></label><input class="note-video-url form-control span12" type="text" /></div>',a='<button href="#" class="btn btn-primary note-video-btn disabled" disabled>'+s.video.insert+"</button>";this.$dialog=i.dialog({title:s.video.insert,body:n,footer:a}).render().appendTo(e)},this.destroy=function(){i.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(t,e){t.on("keypress",(function(t){t.keyCode===D.code.ENTER&&e.trigger("click")}))},this.createVideoNode=function(e){var n,i=e.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/),o=e.match(/\/\/instagram.com\/p\/(.[a-zA-Z0-9_-]*)/),r=e.match(/\/\/vine.co\/v\/(.[a-zA-Z0-9]*)/),s=e.match(/\/\/(player.)?vimeo.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/),a=e.match(/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/),l=e.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),c=e.match(/^.+.(mp4|m4v)$/),u=e.match(/^.+.(ogg|ogv)$/),d=e.match(/^.+.(webm)$/);if(i&&11===i[1].length){var h=i[1];n=t("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+h).attr("width","640").attr("height","360")}else if(o&&o[0].length)n=t("<iframe>").attr("frameborder",0).attr("src",o[0]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(r&&r[0].length)n=t("<iframe>").attr("frameborder",0).attr("src",r[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(s&&s[3].length)n=t("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+s[3]).attr("width","640").attr("height","360");else if(a&&a[2].length)n=t("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+a[2]).attr("width","640").attr("height","360");else if(l&&l[1].length)n=t("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+l[1]);else{if(!(c||u||d))return!1;n=t("<video controls>").attr("src",e).attr("width","640").attr("height","360")}return n.addClass("note-video-clip"),n[0]},this.show=function(){var t=e.invoke("editor.getSelectedText");e.invoke("editor.saveRange"),this.showVideoDialog(t).then((function(t){i.hideDialog(n.$dialog),e.invoke("editor.restoreRange");var o=n.createVideoNode(t);o&&e.invoke("editor.insertNode",o)})).fail((function(){e.invoke("editor.restoreRange")}))},this.showVideoDialog=function(o){return t.Deferred((function(t){var r=n.$dialog.find(".note-video-url"),s=n.$dialog.find(".note-video-btn");i.onDialogShown(n.$dialog,(function(){e.triggerEvent("dialog.shown"),r.val(o).on("input",(function(){i.toggleBtn(s,r.val())})).trigger("focus"),s.click((function(e){e.preventDefault(),t.resolve(r.val())})),n.bindEnterKey(r,s)})),i.onDialogHidden(n.$dialog,(function(){r.off("input"),s.off("click"),"pending"===t.state()&&t.reject()})),i.showDialog(n.$dialog)}))}},helpDialog:function(e){var n=this,i=t.summernote.ui,o=e.layoutInfo.editor,r=e.options,s=r.langInfo;this.createShortCutList=function(){var n=r.keyMap[l.isMac?"mac":"pc"],i=t("<div />");return Object.keys(n).forEach((function(o){var r=t('<div class="help-list-item"/>'),s=n[o],a=e.memo("help."+s)?e.memo("help."+s):s,l=t("<label />").css({width:180,"max-width":200,"margin-right":10}).html(o),c=t("<span />").html(a);r.html(l).append(c),i.append(r)})),i.html()},this.initialize=function(){var e=r.dialogsInBody?t(document.body):o,n=['<p class="text-center">','<a href="//summernote.org/" target="_blank">Summernote 0.7.1</a> · ','<a href="//github.com/summernote/summernote" target="_blank">Project</a> · ','<a href="//github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=i.dialog({title:s.options.help,body:this.createShortCutList(),footer:n,callback:function(t){t.find(".modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(e)},this.destroy=function(){i.hideDialog(this.$dialog),this.$dialog.remove()},this.showHelpDialog=function(){return t.Deferred((function(t){i.onDialogHidden(n.$dialog,(function(){e.triggerEvent("dialog.shown"),t.resolve()})),i.showDialog(n.$dialog)})).promise()},this.show=function(){e.invoke("editor.saveRange"),this.showHelpDialog().then((function(){e.invoke("editor.restoreRange")}))}},airPopover:function(e){var o=this,r=t.summernote.ui,s=e.options;this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){o.update()},"summernote.change summernote.dialog.shown":function(){o.hide()},"summernote.focusout":function(t,e){l.isFF||e.relatedTarget&&u.ancestor(e.relatedTarget,n.eq(o.$popover[0]))||o.hide()}},this.shouldInitialize=function(){return s.airMode&&!i.isEmpty(s.popover.air)},this.initialize=function(){this.$popover=r.popover({className:"note-air-popover"}).render().appendTo("body");var t=this.$popover.find(".popover-content");e.invoke("buttons.build",t,s.popover.air)},this.destroy=function(){this.$popover.remove()},this.update=function(){var t=e.invoke("editor.currentStyle");if(t.range&&!t.range.isCollapsed()){var o=i.last(t.range.getClientRects());if(o){var r=n.rect2bnd(o);this.$popover.css({display:"block",left:Math.max(r.left+r.width/2,0)-20,top:r.top+r.height})}}else this.hide()},this.hide=function(){this.$popover.hide()}}},buttons:{},lang:"en-US",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:!1,width:null,height:null,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,direction:null,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onEnter:null,onKeyup:null,onKeydown:null,onSubmit:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"fa fa-align-left",alignCenter:"fa fa-align-center",alignJustify:"fa fa-align-justify",alignLeft:"fa fa-align-left",alignRight:"fa fa-align-right",indent:"fa fa-indent",outdent:"fa fa-outdent",arrowsAlt:"fa fa-arrows-alt",bold:"fa fa-bold",caret:"caret",circle:"fa fa-circle",close:"fa fa-close",code:"fa fa-code",eraser:"fa fa-eraser",font:"fa fa-font",frame:"fa fa-frame",italic:"fa fa-italic",link:"fa fa-link",unlink:"fa fa-chain-broken",magic:"fa fa-magic",menuCheck:"fa fa-check",minus:"fa fa-minus",orderedlist:"fa fa-list-ol",pencil:"fa fa-pencil",picture:"fa fa-picture-o",question:"fa fa-question",redo:"fa fa-repeat",square:"fa fa-square",strikethrough:"fa fa-strikethrough",subscript:"fa fa-subscript",superscript:"fa fa-superscript",table:"fa fa-table",textHeight:"fa fa-text-height",trash:"fa fa-trash",underline:"fa fa-underline",undo:"fa fa-undo",unorderedlist:"fa fa-list-ul",video:"fa fa-youtube-play"}}})}));