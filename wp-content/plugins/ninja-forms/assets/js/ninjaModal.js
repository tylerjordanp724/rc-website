function NinjaModal(t){this.settings={width:void 0!==t.width?t.width:400,class:void 0!==t.class?t.class:"dashboard-modal",closeOnClick:void 0!==t.closeOnClick?t.closeOnClick:"body",closeOnEsc:void 0===t.closeOnEsc||t.closeOnEsc},this.title=void 0!==t.title?t.title:"",this.content=void 0!==t.content?t.content:"",this.buttons={},this.buttons.primary={},this.buttons.secondary={},this.buttons.primary.data=void 0!==t.btnPrimary&&t.btnPrimary,this.buttons.secondary.data=void 0!==t.btnSecondary&&t.btnSecondary,this.onOpenCallback=void 0!==t.onOpenCallback&&t.onOpenCallback,this.useProgressBar=void 0!==t.useProgressBar&&t.useProgressBar,this.useProgressBar&&(this.loadingText=void 0!==t.loadingText?t.loadingText:"Loading..."),this.popup,this.hasPrimary=!1,this.hasSecondary=!1,this.initModal(),this.toggleModal(!0)}NinjaModal.prototype.destroy=function(){this.popup.destroy()},NinjaModal.prototype.incrementProgress=function(t){var s=document.getElementById("nf-progress-bar-slider-"+this.popup.dataId),n=s.offsetWidth/s.parentElement.offsetWidth*100;t>n&&(n=Number(n)+1,this.setProgress(n))},NinjaModal.prototype.initButtons=function(){if(this.buttons.primary.data){var t=document.createElement("div");t.id="nf-button-primary-"+this.popup.dataId,t.classList.add("nf-button","primary","pull-right"),this.buttons.primary.data.class&&t.classList.add(this.buttons.primary.data.class),void 0!==this.buttons.primary.data.text?t.innerHTML=this.buttons.primary.data.text:t.innerHTML="Confirm",this.buttons.primary.dom=t,this.buttons.primary.callback=this.buttons.primary.data.callback,this.hasPrimary=!0,delete this.buttons.primary.data}if(this.buttons.secondary.data){var s=document.createElement("div");s.id="nf-button-secondary-"+this.popup.dataId,s.classList.add("nf-button","secondary"),this.buttons.secondary.data.class&&s.classList.add(this.buttons.secondary.data.class),void 0!==this.buttons.secondary.data.text?s.innerHTML=this.buttons.secondary.data.text:s.innerHTML="Cancel",this.buttons.secondary.dom=s,this.buttons.secondary.callback=this.buttons.secondary.data.callback,this.hasSecondary=!0,delete this.buttons.secondary.data}},NinjaModal.prototype.initModal=function(){var t=this;this.popup=new jBox("Modal",{width:this.settings.width,addClass:this.settings.class,overlay:!0,closeOnClick:this.settings.closeOnClick,closeOnEsc:this.settings.closeOnEsc,onOpen:function(){t.hasPrimary&&jQuery(this.content).find("#nf-button-primary-"+this.dataId).click(t.buttons.primary.callback),t.hasSecondary&&jQuery(this.content).find("#nf-button-secondary-"+this.dataId).click(t.buttons.secondary.callback),t.onOpenCallback&&t.onOpenCallback()}}),this.popup.dataId=this.popup.id.replace("jBoxID",""),this.renderTitle(),this.initButtons(),this.renderContent()},NinjaModal.prototype.maybeShowActions=function(t){(this.hasPrimary||this.hasSecondary)&&(document.getElementById("nf-action-block-"+this.popup.dataId).style.display=t?"block":"none")},NinjaModal.prototype.maybeShowProgress=function(t){this.useProgressBar&&(document.getElementById("nf-progress-block-"+this.popup.dataId).style.display=t?"block":"none")},NinjaModal.prototype.renderContent=function(){var t=document.createElement("div");if(t.classList.add("message"),t.style.padding="0px 20px 20px 20px",t.innerHTML=this.content,this.useProgressBar){var s=document.createElement("div");s.id="nf-progress-block-"+this.popup.dataId,s.style.display="none";var n=document.createElement("div");n.classList.add("nf-progress-bar");var a=document.createElement("div");a.id="nf-progress-bar-slider-"+this.popup.dataId,a.classList.add("nf-progress-bar-slider"),n.appendChild(a),s.appendChild(n);var i=document.createElement("p");i.style.color="#1ea9ea",i.style.fontWeight="bold",i.innerHTML=this.loadingText,s.appendChild(i),t.appendChild(s)}if(this.hasPrimary||this.hasSecondary){var o=document.createElement("div");o.id="nf-action-block-"+this.popup.dataId,o.classList.add("buttons"),this.hasPrimary&&o.appendChild(this.buttons.primary.dom),this.hasSecondary&&o.appendChild(this.buttons.secondary.dom),t.appendChild(o),this.popup.onOpen=function(){this.buttons.primary.dom.onclick=this.buttons.primary.callback,this.buttons.secondary.dom.onclick=this.buttons.secondary.callback}}this.popup.setContent(document.createElement("div").appendChild(t).parentElement.innerHTML)},NinjaModal.prototype.renderTitle=function(){""!=this.title&&this.popup.setTitle(this.title)},NinjaModal.prototype.setProgress=function(t){document.getElementById("nf-progress-bar-slider-"+this.popup.dataId).style.width=t+"%"},NinjaModal.prototype.toggleModal=function(t){t?this.popup.open():this.popup.close()},NinjaModal.prototype.updateContent=function(t){this.content=t,this.renderContent()},NinjaModal.prototype.updateTitle=function(t){this.title=t,this.renderTitle()};