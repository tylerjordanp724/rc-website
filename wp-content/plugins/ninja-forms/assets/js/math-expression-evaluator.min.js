!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).mexp=e()}}((function(){return function e(t,n,a){function o(p,h){if(!n[p]){if(!t[p]){var s="function"==typeof require&&require;if(!h&&s)return s(p,!0);if(u)return u(p,!0);var i=new Error("Cannot find module '"+p+"'");throw i.code="MODULE_NOT_FOUND",i}var r=n[p]={exports:{}};t[p][0].call(r.exports,(function(e){var n=t[p][1][e];return o(n||e)}),r,r.exports,e,t,n,a)}return n[p].exports}for(var u="function"==typeof require&&require,p=0;p<a.length;p++)o(a[p]);return o}({1:[function(e,t,n){var a=e("./postfix_evaluator.js");a.prototype.formulaEval=function(){"use strict";for(var e,t,n,a=[],o=this.value,u=0;u<o.length;u++)1===o[u].type||3===o[u].type?a.push({value:3===o[u].type?o[u].show:o[u].value,type:1}):13===o[u].type?a.push({value:o[u].show,type:1}):0===o[u].type?a[a.length-1]={value:o[u].show+("-"!=o[u].show?"(":"")+a[a.length-1].value+("-"!=o[u].show?")":""),type:0}:7===o[u].type?a[a.length-1]={value:(1!=a[a.length-1].type?"(":"")+a[a.length-1].value+(1!=a[a.length-1].type?")":"")+o[u].show,type:7}:10===o[u].type?(e=a.pop(),t=a.pop(),"P"===o[u].show||"C"===o[u].show?a.push({value:"<sup>"+t.value+"</sup>"+o[u].show+"<sub>"+e.value+"</sub>",type:10}):a.push({value:(1!=t.type?"(":"")+t.value+(1!=t.type?")":"")+"<sup>"+e.value+"</sup>",type:1})):2===o[u].type||9===o[u].type?(e=a.pop(),t=a.pop(),a.push({value:(1!=t.type?"(":"")+t.value+(1!=t.type?")":"")+o[u].show+(1!=e.type?"(":"")+e.value+(1!=e.type?")":""),type:o[u].type})):12===o[u].type&&(e=a.pop(),t=a.pop(),n=a.pop(),a.push({value:o[u].show+"("+n.value+","+t.value+","+e.value+")",type:12}));return a[0].value},t.exports=a},{"./postfix_evaluator.js":5}],2:[function(e,t,n){function a(e,t){for(var n=0;n<e.length;n++)e[n]+=t;return e}function o(e,t,n,a){for(var o=0;o<a;o++)if(e[n+o]!==t[o])return!1;return!0}var u=e("./math_function.js"),p=["sin","cos","tan","pi","(",")","P","C","asin","acos","atan","7","8","9","int","cosh","acosh","ln","^","root","4","5","6","/","!","tanh","atanh","Mod","1","2","3","*","sinh","asinh","e","log","0",".","+","-",",","Sigma","n","Pi","pow"],h=["sin","cos","tan","&pi;","(",")","P","C","asin","acos","atan","7","8","9","Int","cosh","acosh"," ln","^","root","4","5","6","&divide;","!","tanh","atanh"," Mod ","1","2","3","&times;","sinh","asinh","e"," log","0",".","+","-",",","&Sigma;","n","&Pi;","pow"],s=[u.math.sin,u.math.cos,u.math.tan,"PI","(",")",u.math.P,u.math.C,u.math.asin,u.math.acos,u.math.atan,"7","8","9",Math.floor,u.math.cosh,u.math.acosh,Math.log,Math.pow,Math.sqrt,"4","5","6",u.math.div,u.math.fact,u.math.tanh,u.math.atanh,u.math.mod,"1","2","3",u.math.mul,u.math.sinh,u.math.asinh,"E",u.math.log,"0",".",u.math.add,u.math.sub,",",u.math.sigma,"n",u.math.Pi,Math.pow],r={0:11,1:0,2:3,3:0,4:0,5:0,6:0,7:11,8:11,9:1,10:10,11:0,12:11,13:0},l=[0,0,0,3,4,5,10,10,0,0,0,1,1,1,0,0,0,0,10,0,1,1,1,2,7,0,0,2,1,1,1,2,0,0,3,0,1,6,9,9,11,12,13,12,8],f={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,9:!0,12:!0,13:!0},v={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0},c={0:!0,3:!0,4:!0,8:!0,12:!0,13:!0},g={},m={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,12:!0,13:!0},w={1:!0},d=[[],["1","2","3","7","8","9","4","5","6","+","-","*","/","(",")","^","!","P","C","e","0",".",",","n"],["pi","ln","Pi"],["sin","cos","tan","Del","int","Mod","log","pow"],["asin","acos","atan","cosh","root","tanh","sinh"],["acosh","atanh","asinh","Sigma"]];u.addToken=function(e){for(i=0;i<e.length;i++){x=e[i].token.length;var t=-1;if(x<d.length)for(y=0;y<d[x].length;y++)if(e[i].token===d[x][y]){t=p.indexOf(d[x][y]);break}-1===t?(p.push(e[i].token),l.push(e[i].type),d.length<=e[i].token.length&&(d[e[i].token.length]=[]),d[e[i].token.length].push(e[i].token),s.push(e[i].value),h.push(e[i].show)):(p[t]=e[i].token,l[t]=e[i].type,s[t]=e[i].value,h[t]=e[i].show)}},u.lex=function(e,t){"use strict";var n,i,y,x,M=[{type:4,value:"(",show:"(",pre:0}],P=[],E=e,b=0,k=f,D=0,j=g,C="";void 0!==t&&u.addToken(t);var I={};for(i=0;i<E.length;i++)if(" "!=E[i]){n="";e:for(y=E.length-i>d.length-2?d.length-1:E.length-i;y>0;y--)for(x=0;x<d[y].length;x++)if(o(E,d[y][x],i,y)){n=d[y][x];break e}if(i+=n.length-1,""===n)throw new u.exception("Can't understand after "+E.slice(i));var N=p.indexOf(n),q=n,O=l[N],S=s[N],_=r[O],R=h[N],T=M[M.length-1];for(U=P.length;U--;)if(0===P[U]&&-1!==[0,2,3,5,9,11,12,13].indexOf(O)){if(!0!==k[O])throw new u.exception(n+" is not allowed after "+C);M.push({value:")",type:5,pre:0,show:")"}),k=v,j=m,a(P,-1).pop()}if(!0!==k[O])throw new u.exception(n+" is not allowed after "+C);if(!0===j[O]&&(O=2,S=u.math.mul,R="&times;",_=3,i-=n.length),I={value:S,type:O,pre:_,show:R},0===O)k=f,j=g,a(P,2).push(2),M.push(I),M.push({value:"(",type:4,pre:0,show:"("});else if(1===O)1===T.type?(T.value+=S,a(P,1)):M.push(I),k=v,j=c;else if(2===O)k=f,j=g,a(P,2),M.push(I);else if(3===O)M.push(I),k=v,j=m;else if(4===O)b+=P.length,P=[],D++,k=f,j=g,M.push(I);else if(5===O){if(!D)throw new u.exception("Closing parenthesis are more than opening one, wait What!!!");for(;b--;)M.push({value:")",type:5,pre:0,show:")"});b=0,D--,k=v,j=m,M.push(I)}else if(6===O){if(T.hasDec)throw new u.exception("Two decimals are not allowed in one number");1!==T.type&&(T={value:0,type:1,pre:0},M.push(T),a(P,-1)),k=w,a(P,1),j=g,T.value+=S,T.hasDec=!0}else 7===O&&(k=v,j=m,a(P,1),M.push(I));8===O?(k=f,j=g,a(P,4).push(4),M.push(I),M.push({value:"(",type:4,pre:0,show:"("})):9===O?(9===T.type?T.value===u.math.add?(T.value=S,T.show=R,a(P,1)):T.value===u.math.sub&&"-"===R&&(T.value=u.math.add,T.show="+",a(P,1)):5!==T.type&&7!==T.type&&1!==T.type&&3!==T.type&&13!==T.type?"-"===q&&(k=f,j=g,a(P,2).push(2),M.push({value:u.math.changeSign,type:0,pre:21,show:"-"}),M.push({value:"(",type:4,pre:0,show:"("})):(M.push(I),a(P,2)),k=f,j=g):10===O?(k=f,j=g,a(P,2),M.push(I)):11===O?(k=f,j=g,M.push(I)):12===O?(k=f,j=g,a(P,6).push(6),M.push(I),M.push({value:"(",type:4,pre:0})):13===O&&(k=v,j=m,M.push(I)),a(P,-1),C=n}for(var U=P.length;U--;)0===P[U]&&(M.push({value:")",show:")",type:5,pre:3}),a(P,-1).pop());if(!0!==k[5])throw new u.exception("complete the expression");for(;D--;)M.push({value:")",show:")",type:5,pre:3});return M.push({type:5,value:")",show:")",pre:0}),new u(M)},t.exports=u},{"./math_function.js":3}],3:[function(e,t,n){var a=function(e){this.value=e};a.math={isDegree:!0,acos:function(e){return a.math.isDegree?180/Math.PI*Math.acos(e):Math.acos(e)},add:function(e,t){return e+t},asin:function(e){return a.math.isDegree?180/Math.PI*Math.asin(e):Math.asin(e)},atan:function(e){return a.math.isDegree?180/Math.PI*Math.atan(e):Math.atan(e)},acosh:function(e){return Math.log(e+Math.sqrt(e*e-1))},asinh:function(e){return Math.log(e+Math.sqrt(e*e+1))},atanh:function(e){return Math.log((1+e)/(1-e))},C:function(e,t){var n=1,o=e-t,u=t;u<o&&(u=o,o=t);for(var p=u+1;p<=e;p++)n*=p;return n/a.math.fact(o)},changeSign:function(e){return-e},cos:function(e){return a.math.isDegree&&(e=a.math.toRadian(e)),Math.cos(e)},cosh:function(e){return(Math.pow(Math.E,e)+Math.pow(Math.E,-1*e))/2},div:function(e,t){return e/t},fact:function(e){if(e%1!=0)return"NAN";for(var t=1,n=2;n<=e;n++)t*=n;return t},inverse:function(e){return 1/e},log:function(e){return Math.log(e)/Math.log(10)},mod:function(e,t){return e%t},mul:function(e,t){return e*t},P:function(e,t){for(var n=1,a=Math.floor(e)-Math.floor(t)+1;a<=Math.floor(e);a++)n*=a;return n},Pi:function(e,t,n){for(var a=1,o=e;o<=t;o++)a*=Number(n.postfixEval({n:o}));return a},pow10x:function(e){for(var t=1;e--;)t*=10;return t},sigma:function(e,t,n){for(var a=0,o=e;o<=t;o++)a+=Number(n.postfixEval({n:o}));return a},sin:function(e){return a.math.isDegree&&(e=a.math.toRadian(e)),Math.sin(e)},sinh:function(e){return(Math.pow(Math.E,e)-Math.pow(Math.E,-1*e))/2},sub:function(e,t){return e-t},tan:function(e){return a.math.isDegree&&(e=a.math.toRadian(e)),Math.tan(e)},tanh:function(e){return a.sinha(e)/a.cosha(e)},toRadian:function(e){return e*Math.PI/180}},a.exception=function(e){this.message=e},t.exports=a},{}],4:[function(e,t,n){var a=e("./lexer.js");a.prototype.toPostfix=function(){"use strict";for(var e,t,n,o,u,p=[],h=[{value:"(",type:4,pre:0}],s=this.value,i=1;i<s.length;i++)if(1===s[i].type||3===s[i].type||13===s[i].type)1===s[i].type&&(s[i].value=Number(s[i].value)),p.push(s[i]);else if(4===s[i].type)h.push(s[i]);else if(5===s[i].type)for(;4!==(t=h.pop()).type;)p.push(t);else if(11===s[i].type){for(;4!==(t=h.pop()).type;)p.push(t);h.push(t)}else{o=(e=s[i]).pre,n=(u=h[h.length-1]).pre;var r="Math.pow"==u.value&&"Math.pow"==e.value;if(o>n)h.push(e);else{for(;n>=o&&!r||r&&o<n;)t=h.pop(),u=h[h.length-1],p.push(t),n=u.pre,r="Math.pow"==e.value&&"Math.pow"==u.value;h.push(e)}}return new a(p)},t.exports=a},{"./lexer.js":2}],5:[function(e,t,n){var a=e("./postfix.js");a.prototype.postfixEval=function(e){"use strict";(e=e||{}).PI=Math.PI,e.E=Math.E;for(var t,n,o,u=[],p=this.value,h=void 0!==e.n,s=0;s<p.length;s++)1===p[s].type?u.push({value:p[s].value,type:1}):3===p[s].type?u.push({value:e[p[s].value],type:1}):0===p[s].type||7===p[s].type?void 0===u[u.length-1].type?u[u.length-1].value.push(p[s]):u[u.length-1].value=p[s].value(u[u.length-1].value):8===p[s].type?(t=u.pop(),n=u.pop(),u.push({type:1,value:p[s].value(n.value,t.value)})):10===p[s].type?(t=u.pop(),void 0===(n=u.pop()).type?(n.value=n.concat(t),n.value.push(p[s]),u.push(n)):void 0===t.type?(t.unshift(n),t.push(p[s]),u.push(t)):u.push({type:1,value:p[s].value(n.value,t.value)})):2===p[s].type||9===p[s].type?(t=u.pop(),void 0===(n=u.pop()).type?(console.log(n),(n=n.concat(t)).push(p[s]),u.push(n)):void 0===t.type?(t.unshift(n),t.push(p[s]),u.push(t)):u.push({type:1,value:p[s].value(n.value,t.value)})):12===p[s].type?(void 0!==(t=u.pop()).type&&(t=[t]),n=u.pop(),o=u.pop(),u.push({type:1,value:p[s].value(o.value,n.value,new a(t))})):13===p[s].type&&(h?u.push({value:e[p[s].value],type:3}):u.push([p[s]]));if(u.length>1)throw new a.exception("Uncaught Syntax error");return u[0].value>1e15?"Infinity":Number(u[0].value.toFixed(15)).toPrecision()},a.eval=function(e,t,n){return void 0===t?this.lex(e).toPostfix().postfixEval():void 0===n?void 0!==t.length?this.lex(e,t).toPostfix().postfixEval():this.lex(e).toPostfix().postfixEval(t):this.lex(e,t).toPostfix().postfixEval(n)},t.exports=a},{"./postfix.js":4}]},{},[1])(1)}));